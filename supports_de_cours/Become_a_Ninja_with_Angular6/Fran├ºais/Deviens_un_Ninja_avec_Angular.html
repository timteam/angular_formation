<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7">
<meta name="author" content="Ninja Squad">
<meta name="copyright" content="Ninja Squad">
<title>Deviens un ninja avec Angular</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Deviens un ninja avec Angular</h1>
<div class="details">
<span id="author" class="author">Ninja Squad</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#intro">1. Introduction</a></li>
<li><a href="#es6">2. Une rapide introduction à ECMASCRIPT&#160;6</a>
<ul class="sectlevel2">
<li><a href="#_transpileur">2.1. Transpileur</a></li>
<li><a href="#_let">2.2. <code>let</code></a></li>
<li><a href="#_constantes">2.3. Constantes</a></li>
<li><a href="#_création_dobjets">2.4. Création d&#8217;objets</a></li>
<li><a href="#_affectations_déstructurées">2.5. Affectations déstructurées</a></li>
<li><a href="#_paramètres_optionnels_et_valeurs_par_défaut">2.6. Paramètres optionnels et valeurs par défaut</a></li>
<li><a href="#_rest_operator">2.7. <em>Rest operator</em></a></li>
<li><a href="#_classes">2.8. Classes</a></li>
<li><a href="#_promises">2.9. <em>Promises</em></a></li>
<li><a href="#_arrow_functions">2.10. (<em>arrow functions</em>)</a></li>
<li><a href="#_set_et_map">2.11. <em>Set</em> et <em>Map</em></a></li>
<li><a href="#_template_de_string">2.12. Template de string</a></li>
<li><a href="#modules">2.13. Modules</a></li>
<li><a href="#_conclusion">2.14. Conclusion</a></li>
</ul>
</li>
<li><a href="#types">3. Un peu plus loin qu&#8217;ES6</a>
<ul class="sectlevel2">
<li><a href="#_types_dynamiques_statiques_et_optionnels">3.1. Types dynamiques, statiques et optionnels</a></li>
<li><a href="#_hello_typescript">3.2. Hello TypeScript</a></li>
<li><a href="#_un_exemple_concret_dinjection_de_dépendance">3.3. Un exemple concret d&#8217;injection de dépendance</a></li>
</ul>
</li>
<li><a href="#typescript">4. Découvrir TypeScript</a>
<ul class="sectlevel2">
<li><a href="#_les_types_de_typescript">4.1. Les types de TypeScript</a></li>
<li><a href="#_valeurs_énumérées_enum">4.2. Valeurs énumérées (<em>enum</em>)</a></li>
<li><a href="#_return_types">4.3. Return types</a></li>
<li><a href="#_interfaces">4.4. Interfaces</a></li>
<li><a href="#_paramètre_optionnel">4.5. Paramètre optionnel</a></li>
<li><a href="#_des_fonctions_en_propriété">4.6. Des fonctions en propriété</a></li>
<li><a href="#_classes_2">4.7. Classes</a></li>
<li><a href="#_utiliser_dautres_bibliothèques">4.8. Utiliser d&#8217;autres bibliothèques</a></li>
<li><a href="#_decorateurs">4.9. Decorateurs</a></li>
</ul>
</li>
<li><a href="#web-components">5. Le monde merveilleux des Web Components</a>
<ul class="sectlevel2">
<li><a href="#_le_nouveau_monde">5.1. Le nouveau Monde</a></li>
<li><a href="#_custom_elements">5.2. Custom elements</a></li>
<li><a href="#_shadow_dom">5.3. Shadow DOM</a></li>
<li><a href="#_template">5.4. Template</a></li>
<li><a href="#_html_imports">5.5. HTML imports</a></li>
<li><a href="#_polymer_et_x_tag">5.6. Polymer et X-tag</a></li>
</ul>
</li>
<li><a href="#philosophy">6. La philosophie d&#8217;Angular</a></li>
<li><a href="#zero-to-something">7. Commencer de zéro</a>
<ul class="sectlevel2">
<li><a href="#_nodejs_et_npm">7.1. NodeJS et NPM</a></li>
<li><a href="#_angular_cli">7.2. Angular CLI</a></li>
<li><a href="#_structure_de_lapplication">7.3. Structure de l&#8217;application</a></li>
<li><a href="#_notre_premier_composant">7.4. Notre premier composant</a></li>
<li><a href="#_notre_premier_module_angular">7.5. Notre premier module Angular</a></li>
<li><a href="#_démarrer_lapplication">7.6. Démarrer l&#8217;application</a></li>
</ul>
</li>
<li><a href="#templates">8. La syntaxe des templates</a>
<ul class="sectlevel2">
<li><a href="#_interpolation">8.1. Interpolation</a></li>
<li><a href="#_utiliser_dautres_composants_dans_nos_templates">8.2. Utiliser d&#8217;autres composants dans nos templates</a></li>
<li><a href="#_binding_de_propriété">8.3. <em>Binding</em> de propriété</a></li>
<li><a href="#_événements">8.4. Événements</a></li>
<li><a href="#_expressions_vs_instructions">8.5. Expressions vs instructions</a></li>
<li><a href="#local-variables">8.6. Variables locales</a></li>
<li><a href="#_directives_de_structure">8.7. Directives de structure</a></li>
<li><a href="#_autres_directives_de_templating">8.8. Autres directives de templating</a></li>
<li><a href="#_syntaxe_canonique">8.9. Syntaxe canonique</a></li>
<li><a href="#_résumé">8.10. Résumé</a></li>
</ul>
</li>
<li><a href="#dependency-injection">9. Injection de dépendances</a>
<ul class="sectlevel2">
<li><a href="#_cuisine_et_dépendances">9.1. Cuisine et Dépendances</a></li>
<li><a href="#_développement_facile">9.2. Développement facile</a></li>
<li><a href="#_configuration_facile">9.3. Configuration facile</a></li>
<li><a href="#_autres_types_de_provider">9.4. Autres types de provider</a></li>
<li><a href="#_injecteurs_hiérarchiques">9.5. Injecteurs hiérarchiques</a></li>
<li><a href="#_injection_sans_types">9.6. Injection sans types</a></li>
</ul>
</li>
<li><a href="#services">10. Services</a>
<ul class="sectlevel2">
<li><a href="#_service_title">10.1. Service Title</a></li>
<li><a href="#_service_meta">10.2. Service Meta</a></li>
<li><a href="#_créer_son_propre_service">10.3. Créer son propre service</a></li>
</ul>
</li>
<li><a href="#pipes">11. <em>Pipes</em></a>
<ul class="sectlevel2">
<li><a href="#_ceci_nest_pas_une_pipe">11.1. Ceci n&#8217;est pas une pipe</a></li>
<li><a href="#_json">11.2. json</a></li>
<li><a href="#_slice">11.3. slice</a></li>
<li><a href="#_uppercase_majuscule">11.4. uppercase ("majuscule")</a></li>
<li><a href="#_lowercase_minuscule">11.5. lowercase ("minuscule")</a></li>
<li><a href="#_titlecase_titre">11.6. titlecase ("titre")</a></li>
<li><a href="#_number_nombre">11.7. number ("nombre")</a></li>
<li><a href="#_percent_pourcent">11.8. percent ("pourcent")</a></li>
<li><a href="#_currency_devise_monétaire">11.9. currency ("devise monétaire")</a></li>
<li><a href="#_date">11.10. date</a></li>
<li><a href="#_async">11.11. async</a></li>
<li><a href="#_créer_tes_propres_pipes">11.12. Créer tes propres <em>pipes</em></a></li>
</ul>
</li>
<li><a href="#reactive-programming">12. Programmation réactive</a>
<ul class="sectlevel2">
<li><a href="#_ok_on_vous_rappellera">12.1. OK, on vous rappellera</a></li>
<li><a href="#_principes_généraux">12.2. Principes généraux</a></li>
<li><a href="#_rxjs">12.3. RxJS</a></li>
<li><a href="#_programmation_réactive_en_angular">12.4. Programmation réactive en Angular</a></li>
</ul>
</li>
<li><a href="#building-components">13. Créer des composants et directives</a>
<ul class="sectlevel2">
<li><a href="#_introduction">13.1. Introduction</a></li>
<li><a href="#_directives">13.2. Directives</a></li>
<li><a href="#_composants">13.3. Composants</a></li>
</ul>
</li>
<li><a href="#styles">14. Style des composants et encapsulation</a>
<ul class="sectlevel2">
<li><a href="#_stratégie_native">14.1. Stratégie <em>Native</em></a></li>
<li><a href="#_stratégie_emulated_émulée">14.2. Stratégie <em>Emulated</em> ("émulée")</a></li>
<li><a href="#_stratégie_none_aucune">14.3. Stratégie <em>None</em> ("aucune")</a></li>
<li><a href="#_style_lhôte">14.4. Style l&#8217;hôte</a></li>
</ul>
</li>
<li><a href="#tests">15. Tester ton application</a>
<ul class="sectlevel2">
<li><a href="#_tester_cest_douter">15.1. Tester c&#8217;est douter</a></li>
<li><a href="#_test_unitaire">15.2. Test unitaire</a></li>
<li><a href="#_dépendances_factices">15.3. Dépendances factices</a></li>
<li><a href="#_tester_des_composants">15.4. Tester des composants</a></li>
<li><a href="#_tester_avec_des_templates_ou_providers_factices">15.5. Tester avec des templates ou providers factices</a></li>
<li><a href="#_tests_end_to_end_de_bout_en_bout">15.6. Tests end-to-end ("de bout en bout")</a></li>
</ul>
</li>
<li><a href="#http">16. Envoyer et recevoir des données par HTTP</a>
<ul class="sectlevel2">
<li><a href="#_obtenir_des_données">16.1. Obtenir des données</a></li>
<li><a href="#_transformer_des_données">16.2. Transformer des données</a></li>
<li><a href="#_options_avancées">16.3. Options avancées</a></li>
<li><a href="#_jsonp">16.4. Jsonp</a></li>
<li><a href="#_intercepteurs">16.5. Intercepteurs</a></li>
<li><a href="#_tests">16.6. Tests</a></li>
</ul>
</li>
<li><a href="#router">17. Routeur</a>
<ul class="sectlevel2">
<li><a href="#_en_route">17.1. En route</a></li>
<li><a href="#_navigation">17.2. Navigation</a></li>
<li><a href="#_redirections">17.3. Redirections</a></li>
<li><a href="#_quelle_route_pour_une_url">17.4. Quelle route pour une URL&#160;?</a></li>
<li><a href="#_routes_hiérarchiques">17.5. Routes hiérarchiques</a></li>
<li><a href="#_guards">17.6. Guards</a></li>
<li><a href="#_resolvers">17.7. Resolvers</a></li>
<li><a href="#_événements_de_routage">17.8. Événements de routage</a></li>
<li><a href="#_paramètres_et_data">17.9. Paramètres et data</a></li>
<li><a href="#_chargement_à_la_demande">17.10. Chargement à la demande</a></li>
</ul>
</li>
<li><a href="#forms">18. Formulaires</a>
<ul class="sectlevel2">
<li><a href="#_form_form_form_idable">18.1. Form, form, form-idable&#160;!</a></li>
<li><a href="#_formulaire_piloté_par_le_template">18.2. Formulaire piloté par le template</a></li>
<li><a href="#_formulaire_piloté_par_le_code">18.3. Formulaire piloté par le code</a></li>
<li><a href="#_un_peu_de_validation">18.4. Un peu de validation</a></li>
<li><a href="#_erreurs_et_soumission">18.5. Erreurs et soumission</a></li>
<li><a href="#_un_peu_de_style">18.6. Un peu de style</a></li>
<li><a href="#_créer_un_validateur_spécifique">18.7. Créer un validateur spécifique</a></li>
<li><a href="#_regrouper_des_champs">18.8. Regrouper des champs</a></li>
<li><a href="#_réagir_aux_modifications">18.9. Réagir aux modifications</a></li>
<li><a href="#_mettre_à_jour_seulement_à_la_perte_de_focus_ou_à_la_soumission">18.10. Mettre à jour seulement à la perte de focus ou à la soumission</a></li>
<li><a href="#_conclusion_2">18.11. Conclusion</a></li>
</ul>
</li>
<li><a href="#zones">19. Les Zones et la magie d&#8217;Angular</a>
<ul class="sectlevel2">
<li><a href="#_angularjs1_x_et_le_digest_cycle">19.1. AngularJS&#160;1.x et le <em>digest cycle</em></a></li>
<li><a href="#_angular_et_les_zones">19.2. Angular et les zones</a></li>
</ul>
</li>
<li><a href="#aot-compiler">20. Compilation Angular&#160;: JiT (<em>Just in Time</em>) et AoT (<em>Ahead of Time</em>)</a>
<ul class="sectlevel2">
<li><a href="#_génération_de_code">20.1. Génération de Code</a></li>
<li><a href="#_compilation_en_avance_ahead_of_time_aot">20.2. Compilation En Avance (<em>Ahead of Time</em>, AoT)</a></li>
</ul>
</li>
<li><a href="#advanced-observables">21. Observables&#160;: utilisation avancée</a>
<ul class="sectlevel2">
<li><a href="#_subscribe_unsubscribe_et_pipe_async">21.1. subscribe, unsubscribe et <em>pipe</em> <code>async</code></a></li>
<li><a href="#_le_pouvoir_des_opérateurs">21.2. Le pouvoir des opérateurs</a></li>
<li><a href="#_construire_son_propre_observable">21.3. Construire son propre Observable</a></li>
</ul>
</li>
<li><a href="#advanced-components">22. Composants et directives avancés</a>
<ul class="sectlevel2">
<li><a href="#_requêtes_de_vue_viewchild">22.1. Requêtes de vue&#160;: <code>ViewChild</code></a></li>
<li><a href="#_contenu_content">22.2. Contenu&#160;: <code>Content</code></a></li>
<li><a href="#_requêtes_de_contenu_contentchild">22.3. Requêtes de contenu&#160;: <code>ContentChild</code></a></li>
<li><a href="#_à_lécoute_de_lhôte_hostlistener">22.4. À l&#8217;écoute de l&#8217;hôte&#160;: <code>HostListener</code></a></li>
<li><a href="#_binding_sur_lhôte_hostbinding">22.5. Binding sur l&#8217;hôte&#160;: <code>HostBinding</code></a></li>
</ul>
</li>
<li><a href="#internationalisation">23. Internationalisation</a>
<ul class="sectlevel2">
<li><a href="#_la_locale">23.1. La <em>locale</em></a></li>
<li><a href="#_traduire_du_texte">23.2. Traduire du texte</a></li>
<li><a href="#_processus_et_outillage">23.3. Processus et outillage</a></li>
<li><a href="#_traduire_les_messages_dans_le_code">23.4. Traduire les messages dans le code</a></li>
<li><a href="#_pluralisation">23.5. Pluralisation</a></li>
<li><a href="#_bonnes_pratiques">23.6. Bonnes pratiques</a></li>
</ul>
</li>
<li><a href="#ending">24. Ce n&#8217;est qu&#8217;un au revoir</a></li>
<li><a href="#changelog">Annexe A: Historique des versions</a>
<ul class="sectlevel2">
<li><a href="#_changes_since_last_release_2018_05_09">A.1. Changes since last release - 2018-05-09</a></li>
<li><a href="#_v1_10_2018_05_04">A.2. v1.10 - 2018-05-04</a></li>
<li><a href="#_v1_9_2017_11_02">A.3. v1.9 - 2017-11-02</a></li>
<li><a href="#_v1_8_2017_07_16">A.4. v1.8 - 2017-07-16</a></li>
<li><a href="#_v1_7_2017_06_09">A.5. v1.7 - 2017-06-09</a></li>
<li><a href="#_v1_6_2017_03_24">A.6. v1.6 - 2017-03-24</a></li>
<li><a href="#_v1_5_2017_01_25">A.7. v1.5 - 2017-01-25</a></li>
<li><a href="#_v1_4_2016_11_18">A.8. v1.4 - 2016-11-18</a></li>
<li><a href="#_v1_3_2016_09_15">A.9. v1.3 - 2016-09-15</a></li>
<li><a href="#_v1_2_2016_08_25">A.10. v1.2 - 2016-08-25</a></li>
<li><a href="#_v1_1_2016_05_11">A.11. v1.1 - 2016-05-11</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="intro">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alors comme ça on veut devenir un ninja&#160;?!
Ça tombe bien, tu es entre de bonnes mains&#160;!</p>
</div>
<div class="paragraph">
<p>Mais pour y parvenir, nous avons un bon bout de chemin à parcourir ensemble,
semé d&#8217;embûches et de connaissances à acquérir :).</p>
</div>
<div class="paragraph">
<p>On vit une époque excitante pour le développement web.
Il y a un nouvel Angular, une réécriture complète de ce bon vieil AngularJS.
Pourquoi une réécriture complète&#160;? AngularJS&#160;1.x ne suffisait-il donc pas&#160;?</p>
</div>
<div class="paragraph">
<p>J&#8217;adore cet ancien AngularJS. Dans notre petite entreprise, on l&#8217;a utilisé pour construire plusieurs projets,
on a contribué du code au cœur du framework, on a formé des centaines de développeurs (oui, des centaines, littéralement),
et on a même écrit <a href="https://books.ninja-squad.com/angularjs">un livre</a> sur le sujet.</p>
</div>
<div class="paragraph">
<p>AngularJS est incroyablement productif une fois maîtrisé.
Mais cela ne nous empêche pas de constater ses faiblesses.
AngularJS n&#8217;est pas parfait, avec des concepts très difficiles à cerner, et des pièges ardus à éviter.</p>
</div>
<div class="paragraph">
<p>Et qui plus est, le web a bien évolué depuis qu&#8217;AngularJS a été conçu.
JavaScript a changé.
De nouveaux frameworks sont apparus, avec de belles idées, ou de meilleures implémentations.
Nous ne sommes pas le genre de développeurs à te conjurer d&#8217;utiliser tel outil plutôt que tel autre.
Nous connaissons juste très bien quelques outils, et savons ce qui peut correspondre au projet.
AngularJS était un de ces outils, qui nous permettait de construire des applications web bien testées, et de les construire vite.
On a aussi essayé de le plier quand il n&#8217;était pas forcément l&#8217;outil idéal. Merci de ne pas nous condamner, ça arrive aux meilleurs d&#8217;entre nous, n&#8217;est-ce pas&#160;? ;p</p>
</div>
<div class="paragraph">
<p>Angular sera-t-il l&#8217;outil que l&#8217;on utilisera sans aucune hésitation dans nos projets futurs&#160;?
C&#8217;est difficile à dire pour le moment, parce que ce framework est encore tout jeune, et que son écosystème est à peine bourgeonnant.</p>
</div>
<div class="paragraph">
<p>En tout cas, Angular a beaucoup de points positifs, et une vision dont peu de frameworks peuvent se targuer.
Il a été conçu pour le web de demain, avec ECMAScript&#160;6, les Web Components, et le mobile en tête.
Quand il a été annoncé, j&#8217;ai d&#8217;abord été triste, comme beaucoup de gens, en réalisant que cette version 2.0 n&#8217;allait pas être une simple évolution (et désolé si tu viens de l&#8217;apprendre).</p>
</div>
<div class="paragraph">
<p>Mais j&#8217;étais aussi très curieux de voir quelles idées allait apporter la talentueuse équipe de Google.</p>
</div>
<div class="paragraph">
<p>Alors j&#8217;ai commencé à écrire ce livre, dès les premiers commits,
lisant les documents de conception, regardant les vidéos de conférences, et analysant chaque commit depuis le début.
J&#8217;avais écrit mon premier livre sur AngularJS&#160;1.x quand c&#8217;était déjà un animal connu et bien apprivoisé.
Ce livre-ci est très différent, commencé quand rien n&#8217;était encore clair dans la tête même des concepteurs.
Parce que je savais que j&#8217;allais apprendre beaucoup, sur Angular évidemment,
mais aussi sur les concepts qui allaient définir le futur du développement web, et certains n&#8217;ont rien à voir avec Angular.
Et ce fut le cas. J&#8217;ai du creuser pas mal,
et j&#8217;espère que tu vas apprécier revivre ces découvertes avec moi, et comprendre comment ces concepts s&#8217;articulent avec Angular.</p>
</div>
<div class="paragraph">
<p>L&#8217;ambition de cet ebook est d&#8217;évoluer avec Angular.
S&#8217;il s&#8217;avère qu&#8217;Angular devient le grand framework qu&#8217;on espère,
tu en recevras des mises à jour avec des bonnes pratiques et de nouvelles fonctionnalités quand elles émergeront
(et avec moins de fautes de frappe, parce qu&#8217;il en reste probablement malgré nos nombreuses relectures&#8230;&#8203;).
Et j&#8217;adorerais avoir tes retours, si certains chapitres ne sont pas assez clairs,
si tu as repéré une erreur, ou si tu as une meilleure solution pour certains points.</p>
</div>
<div class="paragraph">
<p>Je suis cependant assez confiant sur nos exemples de code,
parce qu&#8217;ils sont extraits d&#8217;un vrai projet, et sont couverts par des centaines de tests unitaires.
C&#8217;était la seule façon d&#8217;écrire un livre sur un framework en gestation, et de repérer les problèmes
qui arrivaient inévitablement avec chaque release.</p>
</div>
<div class="paragraph">
<p>Même si au final tu n&#8217;es pas convaincu par Angular, je suis à peu près sûr que tu vas apprendre deux-trois trucs en chemin.</p>
</div>
<div class="paragraph">
<p>Si tu as acheté le "pack pro" (merci&#160;!), tu pourras construire une petite application morceau par morceau, tout au long du livre.
Cette application s&#8217;appelle <strong>PonyRacer</strong>, c&#8217;est un site web où tu peux parier sur des courses de poneys.
Tu peux même <a href="http://ponyracer.ninja-squad.com">tester cette application ici</a>&#160;!
Vas-y, je t&#8217;attend.</p>
</div>
<div class="paragraph">
<p>Cool, non&#160;?</p>
</div>
<div class="paragraph">
<p>Mais en plus d&#8217;être super cool, c&#8217;est une application complète.
Tu devras écrire des composants, des formulaires, des tests,
tu devras utiliser le routeur, appeler une API HTTP (fournie), et même faire des Web Sockets.
Elle intègre tous les morceaux dont tu auras besoin pour construire une vraie application.</p>
</div>
<div class="paragraph">
<p>Chaque exercice viendra avec son squelette, un ensemble d&#8217;instructions et quelques tests.
Quand tu auras tous les tests en succès, tu auras terminé l&#8217;exercice&#160;!</p>
</div>
<div class="paragraph">
<p>Les 6 premiers exercices du Pack Pro sont gratuits.
Les autres ne sont accessibles que pour les acheteurs de notre formation en ligne.
À la fin de chaque chapitre,
nous listerons les exercices du Pack Pro liés aux fonctionnalités expliquées dans le chapitre,
en signalant les exercices gratuits avec le symbole suivant&#160;:
<span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18px" title="Free"></span>
, et les autres avec le symbole suivant&#160;:
<span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>.</p>
</div>
<div class="paragraph">
<p>Si tu n&#8217;as pas acheté le "pack pro" (tu devrais), ne t&#8217;inquiète pas&#160;:
tu apprendras tout ce dont tu auras besoin.
Mais tu ne construiras pas cette application incroyable avec de beaux poneys en pixel art.
Quel dommage :)&#160;!</p>
</div>
<div class="paragraph">
<p>Tu te rendras vite compte qu&#8217;au-delà d&#8217;Angular, nous avons essayé d&#8217;expliquer les concepts au cœur du framework.
Les premiers chapitres ne parlent même pas d&#8217;Angular&#160;: ce sont ceux que j&#8217;appelle les "chapitres conceptuels",
ils te permettront de monter en puissance avec les nouveautés intéressantes de notre domaine.</p>
</div>
<div class="paragraph">
<p>Ensuite, nous construirons progressivement notre connaissance du framework, avec les composants, les templates, les <em>pipes</em>, les formulaires, http, le routeur, les tests&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Et enfin, nous nous attaquerons à quelques sujets avancés.
Mais c&#8217;est une autre histoire.</p>
</div>
<div class="paragraph">
<p>Passons cette trop longue introduction,
et jetons-nous sur un sujet qui va définitivement changer notre façon de coder&#160;: ECMAScript&#160;6.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Cet ebook utilise Angular version 6.0.0 dans les exemples.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Angular et versions</div>
<div class="paragraph">
<p>Le titre de ce livre était à l&#8217;origine "Deviens un Ninja avec Angular&#160;2".
Car à l&#8217;origine, Google appelait ce framework Angular&#160;2.
Depuis, ils ont revu leur <a href="http://angularjs.blogspot.fr/2016/10/versioning-and-releasing-angular.html">politique de <em>versioning</em></a>.</p>
</div>
<div class="paragraph">
<p>D&#8217;après leur plan, on aura une version majeure tous les 6 mois.
Et désormais, le framework est simplement nommé “Angular”.</p>
</div>
<div class="paragraph">
<p>Pas d&#8217;inquiétudes, ces versions majeures ne seront pas des réécritures complètes sans compatibilité ascendante,
comme Angular&#160;2 l&#8217;a été pour AngularJS&#160;1.x.</p>
</div>
<div class="paragraph">
<p>Comme cet ebook sera (gratuitement) mis à jour avec chacune des versions majeures,
il est désormais nommé "Deviens un Ninja avec Angular" (sans aucun numéro).</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="es6">2. Une rapide introduction à ECMASCRIPT&#160;6</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Si tu lis ce livre, on peut imaginer que tu as déjà entendu parler de JavaScript. Ce qu&#8217;on appelle JavaScript (JS) est une des implémentations d&#8217;une spécification standardisée, appelée ECMAScript. La version de la spécification que tu connais le plus est probablement la version 5&#160;: c&#8217;est celle utilisée depuis de nombreuses années.</p>
</div>
<div class="paragraph">
<p>Depuis quelque temps, une nouvelle version de cette spécification est en travaux&#160;: ECMASCRIPT&#160;6, ES6, ou ECMASCRIPT&#160;2015. Je l&#8217;appellerai désormais systématiquement ES6, parce que c&#8217;est son petit nom le plus populaire. Elle ajoute une tonne de fonctionnalités à JavaScript, comme les classes, les constantes, les <em>arrow functions</em>, les générateurs&#8230;&#8203; Il y a tellement de choses qu&#8217;on ne peut pas tout couvrir, sauf à y consacrer entièrement ce livre. Mais Angular a été conçu pour bénéficier de cette nouvelle version de JavaScript. Même si tu peux toujours utiliser ton bon vieux JavaScript, tu auras plein d&#8217;avantages à utiliser ES6. Ainsi, nous allons consacrer ce chapitre à découvrir ES6, et voir comment il peut nous être utile pour construire une application Angular.</p>
</div>
<div class="paragraph">
<p>On va laisser beaucoup d&#8217;aspects de côté, et on ne sera pas exhaustifs sur ce qu&#8217;on verra. Si tu connais déjà ES6, tu peux directement sauter ce chapitre. Sinon, tu vas apprendre des trucs plutôt incroyables qui te serviront à l&#8217;avenir même si tu n&#8217;utilises finalement pas Angular&#160;!</p>
</div>
<div class="sect2">
<h3 id="_transpileur">2.1. Transpileur</h3>
<div class="paragraph">
<p>ES6 vient d&#8217;atteindre son état final, il n&#8217;est pas encore supporté par tous les navigateurs. Et bien sûr, certains navigateurs vont être en retard (mais, pour une fois, Microsoft fait un bon travail avec Edge). Ainsi, on peut se demander à quoi bon présenter le sujet s&#8217;il est toujours en pleine évolution&#160;? Et tu as raison, car rares sont les applications qui peuvent se permettre d&#8217;ignorer les navigateurs devenus obsolètes. Mais comme tous les développeurs qui ont essayé ES6 ont hâte de l&#8217;utiliser dans leurs applications, la communauté a trouvé une solution&#160;: un transpileur.</p>
</div>
<div class="paragraph">
<p>Un transpileur prend du code source ES6 en entrée et génère du code ES5, qui peut tourner dans n&#8217;importe quel navigateur. Il génère même les fichiers <em>source map</em>, qui permettent de débugger directement le code ES6 depuis le navigateur. Au moment de l&#8217;écriture de ces lignes, il y a deux outils principaux pour transpiler de l&#8217;ES6&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/google/traceur-compiler">Traceur</a>, un projet Google.</p>
</li>
<li>
<p><a href="https://babeljs.io/">Babeljs</a>, un projet démarré par Sebastian McKenzie, un jeune développeur de 17 ans (oui, ça fait mal), et qui a reçu beaucoup de contributions extérieures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Chacun a ses avantages et ses inconvénients. Par exemple Babeljs produit un code source plus lisible que Traceur. Mais Traceur est un projet Google, alors évidemment, Angular et Traceur vont bien ensemble. Le code source d&#8217;Angular était d&#8217;ailleurs transpilé avec Traceur, avant de basculer en TypeScript.
TypeScript est un langage open source développé par Microsoft. C&#8217;est un sur-ensemble typé de JavaScript qui compile vers du JavaScript standard, mais nous étudierons cela très bientôt.</p>
</div>
<div class="paragraph">
<p>Pour parler franchement, Babel est biiiiien plus populaire que Traceur, on aurait donc tendance à te le conseiller.
Le projet devient peu à peu le standard de-facto.</p>
</div>
<div class="paragraph">
<p>Si tu veux jouer avec ES6, ou le mettre en place dans un de tes projets,
jette un œil à ces transpileurs, et ajoute une étape à la construction de ton projet.
Elle prendra tes fichiers sources ES6 et générera l&#8217;équivalent en ES5.
Ça fonctionne très bien mais, évidemment, certaines fonctionnalités nouvelles sont difficiles voire impossibles à transformer,
parce qu&#8217;elles n&#8217;existent tout simplement pas en ES5.
Néanmoins, l&#8217;état d&#8217;avancement actuel de ces transpileurs est largement suffisant pour les utiliser sans problèmes,
alors jetons un coup d&#8217;œil à ces nouveautés ES6.</p>
</div>
</div>
<div class="sect2">
<h3 id="_let">2.2. <code>let</code></h3>
<div class="paragraph">
<p>Si tu pratiques le JS depuis un certain temps, tu dois savoir que la déclaration de variable avec <code>var</code> peut être délicate. Dans à peu près tous les autres langages, une variable existe à partir de la ligne contenant la déclaration de cette variable. Mais en JS, il y a un concept nommé <em>hoisting</em> ("remontée") qui déclare la variable au tout début de la fonction, même si tu l&#8217;as écrite plus loin.</p>
</div>
<div class="paragraph">
<p>Ainsi, déclarer une variable <code>name</code> dans le bloc <code>if</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function getPonyFullName(pony) {
  if (pony.isChampion) {
    var name = 'Champion ' + pony.name;
    return name;
  }
  return pony.name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>est équivalent à la déclarer tout en haut de la fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function getPonyFullName(pony) {
  var name;
  if (pony.isChampion) {
    name = 'Champion ' + pony.name;
    return name;
  }
  // name is still accessible here
  return pony.name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ES6 introduit un nouveau mot-clé pour la déclaration de variable, <code>let</code>, qui se comporte enfin comme on pourrait s&#8217;y attendre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function getPonyFullName(pony) {
  if (pony.isChampion) {
    let name = 'Champion ' + pony.name;
    return name;
  }
  // name is not accessible here
  return pony.name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;accès à la variable <code>name</code> est maintenant restreint à son bloc. <code>let</code> a été pensé pour remplacer définitivement <code>var</code> à long terme, donc tu peux abandonner ce bon vieux <code>var</code> au profit de <code>let</code>. La bonne nouvelle est que ça doit être indolore, et que si ça ne l&#8217;est pas, c&#8217;est que tu as mis le doigt sur un défaut de ton code&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_constantes">2.3. Constantes</h3>
<div class="paragraph">
<p>Tant qu&#8217;on est sur le sujet des nouveaux mot-clés et des variables, il y en a un autre qui peut être intéressant. ES6 introduit aussi <code>const</code> pour déclarer des&#8230;&#8203; constantes&#160;! Si tu déclares une variable avec <code>const</code>, elle doit obligatoirement être initialisée, et tu ne pourras plus lui affecter de nouvelle valeur par la suite.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const poniesInRace = 6;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">poniesInRace = 7; // SyntaxError</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme pour les variables déclarées avec <code>let</code>, les constantes ne sont pas hoisted ("remontées") et sont bien déclarées dans leur bloc.</p>
</div>
<div class="paragraph">
<p>Il y a un détail qui peut cependant surprendre le profane. Tu peux initialiser une constante avec un objet et modifier par la suite le contenu de l&#8217;objet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const PONY = {};
PONY.color = 'blue'; // works</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais tu ne peux pas assigner à la constante un nouvel objet&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const PONY = {};</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">PONY = {color: 'blue'}; // SyntaxError</code></pre>
</div>
</div>
<div class="paragraph">
<p>Même chose avec les tableaux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const PONIES = [];
PONIES.push({ color: 'blue' }); // works</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">PONIES = []; // SyntaxError</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_création_dobjets">2.4. Création d&#8217;objets</h3>
<div class="paragraph">
<p>Ce n&#8217;est pas un nouveau mot-clé, mais ça peut te faire tiquer en lisant du code ES6. Il y a un nouveau raccourci pour créer des objets, quand la propriété de l&#8217;objet que tu veux créer a le même nom que la variable utilisée comme valeur pour l&#8217;attribut.</p>
</div>
<div class="paragraph">
<p>Exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function createPony() {
  const name = 'Rainbow Dash';
  const color = 'blue';
  return { name: name, color: color };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>peut être simplifié en&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function createPony() {
  const name = 'Rainbow Dash';
  const color = 'blue';
  return { name, color };
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_affectations_déstructurées">2.5. Affectations déstructurées</h3>
<div class="paragraph">
<p>Celui-là aussi peut te faire tiquer en lisant du code ES6. Il y a maintenant un raccourci pour affecter des variables à partir d&#8217;objets ou de tableaux.</p>
</div>
<div class="paragraph">
<p>En ES5&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">var httpOptions = { timeout: 2000, isCache: true };
// later
var httpTimeout = httpOptions.timeout;
var httpCache = httpOptions.isCache;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, en ES6, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const httpOptions = { timeout: 2000, isCache: true };
// later
const { timeout: httpTimeout, isCache: httpCache } = httpOptions;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu auras le même résultat. Cela peut être perturbant, parce que la clé est la propriété à lire dans l&#8217;objet et la valeur est la variable à affecter. Mais cela fonctionne plutôt bien&#160;! Et même mieux&#160;: si la variable que tu veux affecter a le même nom que la propriété de l&#8217;objet à lire, tu peux écrire simplement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const httpOptions = { timeout: 2000, isCache: true };
// later
const { timeout, isCache } = httpOptions;
// you now have a variable named 'timeout'
// and one named 'isCache' with correct values</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le truc cool est que ça marche aussi avec des objets imbriqués&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const httpOptions = { timeout: 2000, cache: { age: 2 } };
// later
const { cache: { age } } = httpOptions;
// you now have a variable named 'age' with value 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et la même chose est possible avec des tableaux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const timeouts = [1000, 2000, 3000];
// later
const [shortTimeout, mediumTimeout] = timeouts;
// you now have a variable named 'shortTimeout' with value 1000
// and a variable named 'mediumTimeout' with value 2000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bien entendu, cela fonctionne avec des tableaux de tableaux, des tableaux dans des objets, etc.</p>
</div>
<div class="paragraph">
<p>Un cas d&#8217;usage intéressant de cette fonctionnalité est la possibilité de retourner des valeurs multiples.
Imagine une fonction <code>randomPonyInRace</code> qui retourne un poney et sa position dans la course.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function randomPonyInRace() {
  const pony = { name: 'Rainbow Dash' };
  const position = 2;
  // ...
  return { pony, position };
}

const { position, pony } = randomPonyInRace();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette nouvelle fonctionnalité de déstructuration assigne la <code>position</code> retournée par la méthode à la variable <code>position</code>, et le poney à la variable <code>pony</code>. Et si tu n&#8217;as pas usage de la position, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function randomPonyInRace() {
  const pony = { name: 'Rainbow Dash' };
  const position = 2;
  // ...
  return { pony, position };
}

const { pony } = randomPonyInRace();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu auras seulement une variable <code>pony</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_paramètres_optionnels_et_valeurs_par_défaut">2.6. Paramètres optionnels et valeurs par défaut</h3>
<div class="paragraph">
<p>JS a la particularité de permettre aux développeurs d&#8217;appeler une fonction avec un nombre d&#8217;arguments variable&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>si tu passes plus d&#8217;arguments que déclarés par la fonction, les arguments supplémentaires sont tout simplement ignorés (pour être tout à fait exact, tu peux quand même les utiliser dans la fonction avec la variable spéciale <code>arguments</code>).</p>
</li>
<li>
<p>si tu passes moins d&#8217;arguments que déclarés par la fonction, les paramètres manquants auront la valeur <code>undefined</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ce dernier cas est celui qui nous intéresse. Souvent, on passe moins d&#8217;arguments quand les paramètres sont optionnels, comme dans l&#8217;exemple suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function getPonies(size, page) {
  size = size || 10;
  page = page || 1;
  // ...
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les paramètres optionnels ont la plupart du temps une valeur par défaut. L&#8217;opérateur OR (<code>||</code>) va retourner l&#8217;opérande de droite si celui de gauche est <code>undefined</code>, comme cela serait le cas si le paramètre n&#8217;avait pas été fourni par l&#8217;appelant (pour être précis, si l&#8217;opérande de gauche est <em>falsy</em>, c&#8217;est-à-dire <code>undefined</code>, <code>0</code>, <code>false</code>, <code>""</code>, etc.). Avec cette astuce, la fonction <code>getPonies</code> peut ainsi être invoquée&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getPonies(20, 2);
getPonies(); // same as getPonies(10, 1);
getPonies(15); // same as getPonies(15, 1);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela fonctionnait, mais ce n&#8217;était pas évident de savoir que les paramètres étaient optionnels, sauf à lire le corps de la fonction. ES6 offre désormais une façon plus formelle de déclarer des paramètres optionnels, dès la déclaration de la fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function getPonies(size = 10, page = 1) {
  // ...
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant il est limpide que la valeur par défaut de <code>size</code> sera 10 et celle de <code>page</code> sera <code>1</code> s&#8217;ils ne sont pas fournis.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Il y a cependant une subtile différence, car maintenant <code>0</code> ou <code>""</code> sont des valeurs valides, et ne seront pas remplacées par les valeurs par défaut, comme <code>size = size || 10</code> l&#8217;aurait fait. C&#8217;est donc plutôt équivalent à <code>size = size === undefined ? 10: size;</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La valeur par défaut peut aussi être un appel de fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function getPonies(size = defaultSize(), page = 1) {
  // the defaultSize method will be called if size is not provided
  // ...
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou même d&#8217;autres variables, d&#8217;autres variables globales, ou d&#8217;autres paramètres de la même fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function getPonies(size = defaultSize(), page = size - 1) {
  // if page is not provided, it will be set to the value
  // of the size parameter minus one.
  // ...
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que si tu essayes d&#8217;utiliser des paramètres sur la droite, leur valeur sera toujours <code>undefined</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function getPonies(size = page, page = 1) {
  // size will always be undefined, as the page parameter is on its right.
  server.get(size, page);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce mécanisme de valeur par défaut ne s&#8217;applique pas qu&#8217;aux paramètres de fonction, mais aussi aux valeurs de variables, par exemple dans le cas d&#8217;une affectation déstructurée&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const { timeout = 1000 } = httpOptions;
// you now have a variable named 'timeout',
// with the value of 'httpOptions.timeout' if it exists
// or 1000 if not</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rest_operator">2.7. <em>Rest operator</em></h3>
<div class="paragraph">
<p>ES6 introduit aussi une nouvelle syntaxe pour déclarer un nombre variable de paramètres dans une fonction. Comme on le disait précédemment, tu peux toujours passer des arguments supplémentaires à un appel de fonction, et y accéder avec la variable spéciale <code>arguments</code>. Tu peux faire quelque chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function addPonies(ponies) {
  for (var i = 0; i &lt; arguments.length; i++) {
    poniesInRace.push(arguments[i]);
  }
}

addPonies('Rainbow Dash', 'Pinkie Pie');</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais tu seras d&#8217;accord pour dire que ce n&#8217;est ni élégant, ni évident&#160;: le paramètre <code>ponies</code> n&#8217;est jamais utilisé, et rien n&#8217;indique que l&#8217;on peut fournir plusieurs poneys.</p>
</div>
<div class="paragraph">
<p>ES6 propose une syntaxe bien meilleure, grâce au <em>rest operator</em> <code>&#8230;&#8203;</code> ("opérateur de reste").</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function addPonies(...ponies) {
  for (let pony of ponies) {
    poniesInRace.push(pony);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ponies</code> est désormais un véritable tableau, sur lequel on peut itérer.
La boucle <code>for &#8230;&#8203; of</code> utilisée pour l&#8217;itération est aussi une nouveauté d&#8217;ES6.
Elle permet d&#8217;être sûr de n&#8217;itérer que sur les valeurs de la collection,
et non pas sur ses propriétés comme <code>for &#8230;&#8203; in</code>.
Ne trouves-tu pas que notre code est maintenant bien plus beau et lisible&#160;?</p>
</div>
<div class="paragraph">
<p>Le <em>rest operator</em> peut aussi fonctionner avec des affectations déstructurées&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const [winner, ...losers] = poniesInRace;
// assuming 'poniesInRace' is an array containing several ponies
// 'winner' will have the first pony,
// and 'losers' will be an array of the other ones</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le <em>rest operator</em> ne doit pas être confondu avec le <em>spread operator</em> ("opérateur d&#8217;étalement"), même si, on te l&#8217;accorde, ils se ressemblent dangereusement&#160;! Le <em>spread operator</em> est son opposé&#160;: il prend un tableau, et l&#8217;étale en arguments variables. Le seul cas d&#8217;utilisation qui me vient à l&#8217;esprit serait pour les fonctions comme <code>min</code> ou <code>max</code>, qui peuvent recevoir des arguments variables, et que tu voudrais appeler avec un tableau&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const ponyPrices = [12, 3, 4];
const minPrice = Math.min(...ponyPrices);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes">2.8. Classes</h3>
<div class="paragraph">
<p>Une des fonctionnalités les plus emblématiques, et qui va largement être utilisée dans l&#8217;écriture d&#8217;applications Angular&#160;: ES6 introduit les classes en JavaScript&#160;! Tu pourras désormais facilement faire de l&#8217;héritage de classes en JavaScript. C&#8217;était déjà possible, avec l&#8217;héritage prototypal, mais ce n&#8217;était pas une tâche aisée, surtout pour les débutants&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Maintenant c&#8217;est les doigts dans le nez, regarde&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class Pony {
  constructor(color) {
    this.color = color;
  }

  toString() {
    return `${this.color} pony`;
    // see that? It is another cool feature of ES6, called template literals
    // we'll talk about these quickly!
  }
}
const bluePony = new Pony('blue');
console.log(bluePony.toString()); // blue pony</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les déclarations de classes, contrairement aux déclarations de fonctions, ne sont pas <em>hoisted</em> ("remontées"), donc tu dois déclarer une classe avant de l&#8217;utiliser. Tu as probablement remarqué la fonction spéciale <code>constructor</code>. C&#8217;est le constructeur, la fonction appelée à la création d&#8217;un nouvel objet avec le mot-clé <code>new</code>. Dans l&#8217;exemple, il requiert une couleur, et nous créons une nouvelle instance de la classe <code>Pony</code> avec la couleur "blue". Une classe peut aussi avoir des méthodes, appelables sur une instance, comme la méthode <code>toString()</code> dans l&#8217;exemple.</p>
</div>
<div class="paragraph">
<p>Une classe peut aussi avoir des attributs et des méthodes statiques&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class Pony {
  static defaultSpeed() {
    return 10;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces méthodes statiques ne peuvent être appelées que sur la classe directement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const speed = Pony.defaultSpeed();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une classe peut avoir des accesseurs (<em>getters, setters</em>), si tu veux implémenter du code sur ces opérations&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class Pony {
  get color() {
    console.log('get color');
    return this._color;
  }

  set color(newColor) {
    console.log(`set color ${newColor}`);
    this._color = newColor;
  }
}
const pony = new Pony();
pony.color = 'red';
// 'set color red'
console.log(pony.color);
// 'get color'
// 'red'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et bien évidemment, si tu as des classes, l&#8217;héritage est possible en ES6.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class Animal {
  speed() {
    return 10;
  }
}
class Pony extends Animal {

}
const pony = new Pony();
console.log(pony.speed()); // 10, as Pony inherits the parent method</code></pre>
</div>
</div>
<div class="paragraph">
<p>Animal est appelée la classe de base, et Pony la classe dérivée. Comme tu peux le voir, la classe dérivée possède toutes les méthodes de la classe de base. Mais elle peut aussi les redéfinir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class Animal {
  speed() {
    return 10;
  }
}
class Pony extends Animal {
  speed() {
    return super.speed() + 10;
  }
}
const pony = new Pony();
console.log(pony.speed()); // 20, as Pony overrides the parent method</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, le mot-clé <code>super</code> permet d&#8217;invoquer la méthode de la classe de base, avec <code>super.speed()</code> par exemple.</p>
</div>
<div class="paragraph">
<p>Ce mot-clé <code>super</code> peut aussi être utilisé dans les constructeurs, pour invoquer le constructeur de la classe de base&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class Animal {
  constructor(speed) {
    this.speed = speed;
  }
}
class Pony extends Animal {
  constructor(speed, color) {
    super(speed);
    this.color = color;
  }
}
const pony = new Pony(20, 'blue');
console.log(pony.speed); // 20</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_promises">2.9. <em>Promises</em></h3>
<div class="paragraph">
<p>Les <em>promises</em> ("promesses") ne sont pas si nouvelles, et tu les connais ou les utilises peut-être déjà, parce qu&#8217;elles tenaient une place importante dans AngularJS&#160;1.x. Mais comme nous les utiliserons beaucoup avec Angular, et même si tu n&#8217;utilises que du pur JS sans Angular, on pense que c&#8217;est important de s&#8217;y attarder un peu.</p>
</div>
<div class="paragraph">
<p>L&#8217;objectif des <em>promises</em> est de simplifier la programmation asynchrone. Notre code JS est plein d&#8217;asynchronisme, comme des requêtes AJAX, et en général on utilise des <em>callbacks</em> pour gérer le résultat et l&#8217;erreur. Mais le code devient vite confus, avec des <em>callbacks</em> dans des <em>callbacks</em>, qui le rendent illisible et peu maintenable. Les <em>promises</em> sont plus pratiques que les <em>callbacks</em>, parce qu&#8217;elles permettent d&#8217;écrire du code à plat, et le rendent ainsi plus simple à comprendre. Prenons un cas d&#8217;utilisation simple, où on doit récupérer un utilisateur, puis ses droits, puis mettre à jour un menu quand on a récupéré tout ça&#160;.</p>
</div>
<div class="paragraph">
<p>Avec des <em>callbacks</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getUser(login, function (user) {
  getRights(user, function (rights) {
    updateMenu(rights);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec des <em>promises</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user);
  })
  .then(function (rights) {
    updateMenu(rights);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>J&#8217;aime cette version, parce qu&#8217;elle s&#8217;exécute comme elle se lit&#160;: je veux récupérer un utilisateur, puis ses droits, puis mettre à jour le menu.</p>
</div>
<div class="paragraph">
<p>Une <em>promise</em> est un objet <em>thenable</em>, ce qui signifie simplement qu&#8217;il a une méthode <code>then</code>. Cette méthode prend deux arguments&#160;: un callback de succès et un callback d&#8217;erreur. Une <em>promise</em> a trois états&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>pending</em> ("en cours")&#160;: quand la <em>promise</em> n&#8217;est pas réalisée, par exemple quand l&#8217;appel serveur n&#8217;est pas encore terminé.</p>
</li>
<li>
<p><em>fulfilled</em> ("réalisée")&#160;: quand la <em>promise</em> s&#8217;est réalisée avec succès, par exemple quand l&#8217;appel HTTP serveur a retourné un status 200-OK.</p>
</li>
<li>
<p><em>rejected</em> ("rejetée")&#160;: quand la <em>promise</em> a échoué, par exemple si l&#8217;appel HTTP serveur a retourné un status 404-NotFound.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quand la promesse est réalisée (<em>fulfilled</em>), alors le callback de succès est invoqué, avec le résultat en argument. Si la promesse est rejetée (<em>rejected</em>), alors le callback d&#8217;erreur est invoqué, avec la valeur rejetée ou une erreur en argument.</p>
</div>
<div class="paragraph">
<p>Alors, comment crée-t-on une <em>promise</em>&#160;? C&#8217;est simple, il y a une nouvelle classe <code>Promise</code>, dont le constructeur attend une fonction avec deux paramètres, <code>resolve</code> et <code>reject</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const getUser = function (login) {
  return new Promise(function (resolve, reject) {
    // async stuff, like fetching users from server, returning a response
    if (response.status === 200) {
      resolve(response.data);
    } else {
      reject('No user');
    }
  });
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une fois la <em>promise</em> créée, tu peux enregistrer des <em>callbacks</em>, via la méthode <code>then</code>. Cette méthode peut recevoir deux arguments, les deux <em>callbacks</em> que tu veux voir invoqués en cas de succès ou en cas d&#8217;échec. Dans l&#8217;exemple suivant, nous passons simplement un seul <em>callback</em> de succès, ignorant ainsi une erreur potentielle&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getUser(login)
  .then(function (user) {
    console.log(user);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand la promesse sera réalisée, le callback de succès (qui se contente ici de tracer l&#8217;utilisateur en console) sera invoqué.</p>
</div>
<div class="paragraph">
<p>La partie la plus cool c&#8217;est que le code peut s&#8217;écrire à plat. Si par exemple ton <em>callback</em> de succès retourne lui aussi une <em>promise</em>, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user) // getRights is returning a promise
      .then(function (rights) {
        return updateMenu(rights);
      });
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou plus élégamment&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user); // getRights is returning a promise
  })
  .then(function (rights) {
    return updateMenu(rights);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un autre truc cool est la gestion d&#8217;erreur&#160;: tu peux définir une gestion d&#8217;erreur par <em>promise</em>, ou globale à toute la chaîne.</p>
</div>
<div class="paragraph">
<p>Une gestion d&#8217;erreur par <em>promise</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user);
  }, function (error) {
    console.log(error); // will be called if getUser fails
    return Promise.reject(error);
  })
  .then(function (rights) {
    return updateMenu(rights);
  }, function (error) {
    console.log(error); // will be called if getRights fails
    return Promise.reject(error);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une gestion d&#8217;erreur globale pour toute la chaîne&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user);
  })
  .then(function (rights) {
    return updateMenu(rights);
  })
  .catch(function (error) {
    console.log(error); // will be called if getUser or getRights fails
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu devrais sérieusement t&#8217;intéresser aux <em>promises</em>, parce que ça va devenir la nouvelle façon d&#8217;écrire des APIs, et toutes les bibliothèques vont bientôt les utiliser. Même les bibliothèques standards&#160;: c&#8217;est le cas de la nouvelle <a href="https://fetch.spec.whatwg.org/">Fetch API</a> par exemple.</p>
</div>
</div>
<div class="sect2">
<h3 id="_arrow_functions">2.10. (<em>arrow functions</em>)</h3>
<div class="paragraph">
<p>Un truc que j&#8217;adore dans ES6 est la nouvelle syntaxe <em>arrow function</em> ("fonction flèche"), utilisant l&#8217;opérateur <em>fat arrow</em> ("grosse flèche")&#160;: <code>&#8658;</code>. C&#8217;est très utile pour les <em>callbacks</em> et les fonctions anonymes&#160;!</p>
</div>
<div class="paragraph">
<p>Prenons notre exemple précédent avec des <em>promises</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getUser(login)
  .then(function (user) {
    return getRights(user); // getRights is returning a promise
  })
  .then(function (rights) {
    return updateMenu(rights);
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il peut être réécrit avec des <em>arrow functions</em> comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getUser(login)
  .then(user =&gt; getRights(user))
  .then(rights =&gt; updateMenu(rights))</code></pre>
</div>
</div>
<div class="paragraph">
<p>N&#8217;est-ce pas super cool&#160;?!</p>
</div>
<div class="paragraph">
<p>Note que le <code>return</code> est implicite s&#8217;il n&#8217;y a pas de bloc&#160;: pas besoin d&#8217;écrire <code>user &#8658; return getRights(user)</code>. Mais si nous avions un bloc, nous aurions besoin d&#8217;un <code>return</code> explicite&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">getUser(login)
  .then(user =&gt; {
    console.log(user);
    return getRights(user);
  })
  .then(rights =&gt; updateMenu(rights))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et les <em>arrow functions</em> ont une particularité bien agréable que n&#8217;ont pas les fonctions normales&#160;: le <code>this</code> reste attaché lexicalement, ce qui signifie que ces <em>arrow functions</em> n&#8217;ont pas un nouveau <code>this</code> comme les fonctions normales. Prenons un exemple où on itère sur un tableau avec la fonction <code>map</code> pour y trouver le maximum.</p>
</div>
<div class="paragraph">
<p>En ES5&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">var maxFinder = {
  max: 0,
  find: function (numbers) {
    // let's iterate
    numbers.forEach(
      function (element) {
        // if the element is greater, set it as the max
        if (element &gt; this.max) {
          this.max = element;
        }
      });
  }
};

maxFinder.find([2, 3, 4]);
// log the result
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ca semble pas mal, non&#160;? Mais en fait ça ne marche pas&#8230;&#8203;
Si tu as de bons yeux, tu as remarqué que le <code>forEach</code> dans la fonction <code>find</code> utilise <code>this</code>,
mais ce <code>this</code> n&#8217;est lié à aucun objet.
Donc <code>this.max</code> n&#8217;est en fait pas le <code>max</code> de l&#8217;objet <code>maxFinder</code>&#8230;&#8203;
On pourrait corriger ça facilement avec un alias&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">var maxFinder = {
  max: 0,
  find: function (numbers) {
    var self = this;
    numbers.forEach(
      function (element) {
        if (element &gt; self.max) {
          self.max = element;
        }
      });
  }
};

maxFinder.find([2, 3, 4]);
// log the result
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou en <em>bindant</em> le <code>this</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">var maxFinder = {
  max: 0,
  find: function (numbers) {
    numbers.forEach(
      function (element) {
        if (element &gt; this.max) {
          this.max = element;
        }
      }.bind(this));
  }
};

maxFinder.find([2, 3, 4]);
// log the result
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou en le passant en second paramètre de la fonction <code>forEach</code> (ce qui est justement sa raison d&#8217;être)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">var maxFinder = {
  max: 0,
  find: function (numbers) {
    numbers.forEach(
      function (element) {
        if (element &gt; this.max) {
          this.max = element;
        }
      }, this);
  }
};

maxFinder.find([2, 3, 4]);
// log the result
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais il y a maintenant une solution bien plus élégante avec les <em>arrow functions</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const maxFinder = {
  max: 0,
  find: function (numbers) {
    numbers.forEach(element =&gt; {
      if (element &gt; this.max) {
        this.max = element;
      }
    });
  }
};

maxFinder.find([2, 3, 4]);
// log the result
console.log(maxFinder.max);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les <em>arrow functions</em> sont donc idéales pour les fonctions anonymes en <em>callback</em>&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_set_et_map">2.11. <em>Set</em> et <em>Map</em></h3>
<div class="paragraph">
<p>On va faire court&#160;: on a maintenant de vraies collections en ES6. Youpi \o/!</p>
</div>
<div class="paragraph">
<p>On utilisait jusque-là de simples objets JavaScript pour jouer le rôle de <em>map</em> ("dictionnaire"), c&#8217;est à dire un objet JS standard, dont les clés étaient nécessairement des chaînes de caractères. Mais nous pouvons maintenant utiliser la nouvelle classe <em>Map</em> &#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const cedric = { id: 1, name: 'Cedric' };
const users = new Map();
users.set(cedric.id, cedric); // adds a user
console.log(users.has(cedric.id)); // true
console.log(users.size); // 1
users.delete(cedric.id); // removes the user</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a aussi une classe <code>Set</code> ("ensemble")&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const cedric = { id: 1, name: 'Cedric' };
const users = new Set();
users.add(cedric); // adds a user
console.log(users.has(cedric)); // true
console.log(users.size); // 1
users.delete(cedric); // removes the user</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi itérer sur une collection, avec la nouvelle syntaxe <code>for &#8230;&#8203; of</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">for (let user of users) {
  console.log(user.name);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu verras que cette syntaxe <code>for &#8230;&#8203; of</code> est celle choisie par l&#8217;équipe Angular pour itérer sur une collection dans un template.</p>
</div>
</div>
<div class="sect2">
<h3 id="_template_de_string">2.12. Template de string</h3>
<div class="paragraph">
<p>Construire des strings a toujours été pénible en JavaScript, où nous devions généralement utiliser des concaténations&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const fullname = 'Miss ' + firstname + ' ' + lastname;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les templates de string sont une nouvelle fonctionnalité mineure mais bien pratique, où on doit utiliser des accents graves (<em>backticks</em> <code>`</code>) au lieu des habituelles apostrophes (<em>quote</em> <code>'</code>) ou apostrophes doubles (<em>double-quotes</em> <code>"</code>), fournissant un moteur de template basique avec support du multi-ligne&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const fullname = `Miss ${firstname} ${lastname}`;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le support du multi-ligne est particulièrement adapté à l&#8217;écriture de morceaux d&#8217;HTML, comme nous le ferons dans nos composants Angular&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const template = `&lt;div&gt;
  &lt;h1&gt;Hello&lt;/h1&gt;
&lt;/div&gt;`;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="modules">2.13. Modules</h3>
<div class="paragraph">
<p>Il a toujours manqué en JavaScript une façon standard de ranger ses fonctions dans un espace de nommage, et de charger dynamiquement du code.
NodeJS a été un leader sur le sujet, avec un écosystème très riche de modules utilisant la convention CommonJS. Côté navigateur, il y a aussi l&#8217;API <a href="https://github.com/amdjs/amdjs-api/blob/master/AMD.md">AMD</a> (Asynchronous Module Definition), utilisé par <a href="http://requirejs.org/">RequireJS</a>. Mais aucun n&#8217;était un vrai standard, ce qui nous conduit à des débats incessants sur la meilleure solution.</p>
</div>
<div class="paragraph">
<p>ES6 a pour objectif de créer une syntaxe avec le meilleur des deux mondes, sans se préoccuper de l&#8217;implémentation utilisée. Le <a href="http://www.ecma-international.org/memento/TC39.htm">comité Ecma TC39</a> (qui est responsable des évolutions d&#8217;ES6 et auteur de la spécification du langage) voulait une syntaxe simple (c&#8217;est indéniablement l&#8217;atout de CommonJS), mais avec le support du chargement asynchrone (comme AMD), et avec quelques bonus comme la possibilité d&#8217;analyser statiquement le code par des outils et une gestion claire des dépendances cycliques. Cette nouvelle syntaxe se charge de déclarer ce que tu exportes depuis tes modules, et ce que tu importes dans d&#8217;autres modules.</p>
</div>
<div class="paragraph">
<p>Cette gestion des modules est fondamentale dans Angular, parce que tout y est défini dans des modules, qu&#8217;il faut importer dès qu&#8217;on veut les utiliser. Supposons qu&#8217;on veuille exposer une fonction pour parier sur un poney donné dans une course, et une fonction pour lancer la course.</p>
</div>
<div class="paragraph">
<p>Dans <code>races_service.js</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export function bet(race, pony) {
  // ...
}
export function start(race) {
  // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, c&#8217;est plutôt simple&#160;: le nouveau mot-clé <code>export</code> fait son travail et exporte les deux fonctions.</p>
</div>
<div class="paragraph">
<p>Maintenant, supposons qu&#8217;un composant de notre application veuille appeler ces deux fonctions.</p>
</div>
<div class="paragraph">
<p>Dans un autre fichier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { bet, start } from './races_service';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// later
bet(race, pony1);
start(race);</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est ce qu&#8217;on appelle un <em>named export</em> ("export nommé"). Ici on importe les deux fonctions, et on doit spécifier le nom du fichier contenant ces deux fonctions, ici 'races_service'.
Evidemment, on peut importer une seule des deux fonctions, si besoin avec un alias&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { start as startRace } from './races_service';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// later
startRace(race);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et si tu veux importer toutes les fonctions du module, tu peux utiliser le caractère joker <code>*</code>.</p>
</div>
<div class="paragraph">
<p>Comme tu le ferais dans d&#8217;autres langages, il faut utiliser le caractère joker <code>*</code> avec modération, seulement si tu as besoin de toutes les fonctions, ou la plupart. Et comme tout ceci sera prochainement géré par ton IDE préféré qui prendra en charge la gestion automatique des imports, on n&#8217;aura plus à se soucier d&#8217;importer les seules bonnes fonctions.</p>
</div>
<div class="paragraph">
<p>Avec un caractère joker, tu dois utiliser un alias, et j&#8217;aime plutôt ça, parce que ça rend le reste du code plus lisible&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import * as racesService from './races_service';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// later
racesService.bet(race, pony1);
racesService.start(race);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si ton module n&#8217;expose qu&#8217;une seule fonction, ou valeur, ou classe, tu n&#8217;as pas besoin d&#8217;utiliser un <em>named export</em>, et tu peux bénéficier de l&#8217;export par défaut, avec le mot-clé <code>default</code>. C&#8217;est pratique pour les classes notamment&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// pony.js
export default class Pony {
}
// races_service.js
import Pony from './pony';</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note l&#8217;absence d&#8217;accolade pour importer un export par défaut. Tu peux l&#8217;importer avec l&#8217;alias que tu veux, mais pour être cohérent, c&#8217;est mieux de l&#8217;importer avec le nom du module (sauf évidemment si tu importes plusieurs modules portant le même nom, auquel cas tu devras donner un alias pour les distinguer). Et bien sûr tu peux mélanger l&#8217;export par défaut et l&#8217;export nommé, mais un module ne pourra avoir qu&#8217;un seul export par défaut.</p>
</div>
<div class="paragraph">
<p>En Angular, tu utiliseras beaucoup de ces imports dans ton application. Chaque composant et service sera une classe, généralement isolée dans son propre fichier et exportée, et ensuite importée à la demande dans chaque autre composant.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion">2.14. Conclusion</h3>
<div class="paragraph">
<p>Voilà qui conclue notre rapide introduction à ES6. On a zappé quelques parties, mais si tu as bien assimilé ce chapitre, tu n&#8217;auras aucun problème à coder ton application en ES6. Si tu veux approfondir, je te recommande chaudement <a href="http://exploringjs.com/">Exploring JS</a> par <a href="https://twitter.com/rauschma">Axel Rauschmayer</a>, ou <a href="https://leanpub.com/understandinges6">Understanding ES6</a> par <a href="https://twitter.com/slicknet">Nicholas C. Zakas</a>. Ces deux ebooks peuvent être lus gratuitement en ligne, mais pense à soutenir ces auteurs qui ont fait un beau travail&#160;! En l&#8217;occurrence, j&#8217;ai relu récemment <a href="http://speakingjs.com">Speaking JS</a>, le précédent livre d&#8217;Axel, et j&#8217;ai encore appris quelques trucs, donc si tu veux rafraîchir tes connaissances en JS, je te le conseille vivement&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="types">3. Un peu plus loin qu&#8217;ES6</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_types_dynamiques_statiques_et_optionnels">3.1. Types dynamiques, statiques et optionnels</h3>
<div class="paragraph">
<p>Tu sais probablement que les applications Angular peuvent être écrites en ES5, ES6, ou TypeScript. Et tu te demandes peut-être qu&#8217;est-ce que TypeScript, et ce qu&#8217;il apporte de plus.</p>
</div>
<div class="paragraph">
<p>JavaScript est dynamiquement typé. Tu peux donc faire des trucs comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">let pony = 'Rainbow Dash';
pony = 2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ça fonctionne. Ça offre pleins de possibilités&#160;: tu peux ainsi passer n&#8217;importe quel objet à une fonction, tant que cet objet a les propriétés requises par la fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const pony = { name: 'Rainbow Dash', color: 'blue' };
const horse = { speed: 40, color: 'black' };
const printColor = animal =&gt; console.log(animal.color);
// works as long as the object has a `color` property</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette nature dynamique est formidable, mais elle est aussi un handicap dans certains cas, comparée à d&#8217;autres langages plus fortement typés. Le cas le plus évident est quand tu dois appeler une fonction inconnue d&#8217;une autre API en JS&#160;: tu dois lire la documentation (ou pire le code de la fonction) pour deviner à quoi doivent ressembler les paramètres. Dans notre exemple précédent, la méthode <code>printColor</code> attend un paramètre avec une propriété <code>color</code>, mais encore faut-il le savoir. Et c&#8217;est encore plus difficile dans notre travail quotidien, où on multiplie les utilisations de bibliothèques et services développés par d&#8217;autres. Un des co-fondateurs de Ninja Squad se plaint souvent du manque de type en JS, et déclare qu&#8217;il n&#8217;est pas aussi productif, et qu&#8217;il ne produit pas du code aussi bon qu&#8217;il le ferait dans un environnement plus statiquement typé. Et il n&#8217;a pas entièrement tort, même s&#8217;il trolle aussi par plaisir&#160;! Sans les informations de type, les IDEs n&#8217;ont aucun indice pour savoir si tu écris quelque chose de faux, et les outils ne peuvent pas t&#8217;aider à trouver des bugs dans ton code. Bien sûr, nos applications sont testées, et Angular a toujours facilité les tests, mais c&#8217;est pratiquement impossible d&#8217;avoir une parfaite couverture de tests.</p>
</div>
<div class="paragraph">
<p>Cela nous amène au sujet de la maintenabilité. Le code JS peut être difficile à maintenir, malgré les tests et la documentation. Refactoriser une grosse application JS n&#8217;est pas chose aisée, comparativement à ce qui peut être fait dans des langages statiquement typés. La maintenabilité est un sujet important, et les types aident les outils, ainsi que les développeurs, à éviter les erreurs lors de l&#8217;écriture et la modification de code. Google a toujours été enclin à proposer des solutions dans cette direction&#160;: c&#8217;est compréhensible, étant donné qu&#8217;ils gèrent des applications parmi les plus grosses du monde, avec GMail, Google apps, Maps&#8230;&#8203; Alors ils ont essayé plusieurs approches pour améliorer la maintenablité des applications <em>front-end</em>&#160;: GWT, Google Closure, Dart&#8230;&#8203; Elles devaient toutes faciliter l&#8217;écriture de grosses applications web.</p>
</div>
<div class="paragraph">
<p>Avec Angular, l&#8217;équipe Google voulait nous aider à écrire du meilleur JS, en ajoutant des informations de type à notre code. Ce n&#8217;est pas un concept nouveau pour JS, c&#8217;était même le sujet de la spécification ECMASCRIPT&#160;4, qui a été abandonnée. Au départ ils annoncèrent AtScript, un sur-ensemble d&#8217;ES6 avec des annotations (des annotations de type et d&#8217;autres, dont je parlerai plus tard). Ils annoncèrent ensuite le support de TypeScript, le langage de Microsoft, avec des annotations de type additionnelles. Et enfin, quelques mois plus tard, l&#8217;équipe TypeScript annonçait, après un travail étroit avec l&#8217;équipe de Google, que la nouvelle version du langage (1.5) aurait toutes les nouvelles fonctionnalités d&#8217;AtScript. L&#8217;équipe Angular déclara alors qu&#8217;AtScript était officiellement abandonné, et que TypeScript était désormais la meilleure façon d&#8217;écrire des applications Angular&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_hello_typescript">3.2. Hello TypeScript</h3>
<div class="paragraph">
<p>Je pense que c&#8217;était la meilleure chose à faire pour plusieurs raisons. D&#8217;abord, personne n&#8217;a vraiment envie d&#8217;apprendre une nouvelle extension de langage. Et TypeScript existait déjà, avec une communauté et un écosystème actifs. Je ne l&#8217;avais jamais vraiment utilisé avant Angular, mais j&#8217;en avais entendu du bien, de personnes différentes. TypeScript est un projet de Microsoft, mais ce n&#8217;est pas le Microsoft de l&#8217;ère Ballmer et Gates. C&#8217;est le Microsoft de Nadella, celui qui s&#8217;ouvre à la communauté, et donc, à l&#8217;open-source. Google en a conscience, et c&#8217;est tout à leur avantage de contribuer à un projet existant, plutôt que de maintenir le leur. Le framework TypeScript gagnera de son côté en visibilité&#160;: <em>win-win</em> comme dirait ton manager.</p>
</div>
<div class="paragraph">
<p>Mais la raison principale de parier sur TypeScript est le système de types qu&#8217;il offre. C&#8217;est un système optionnel qui vient t&#8217;aider sans t&#8217;entraver. De fait, après avoir codé quelque temps avec, il s&#8217;est fait complètement oublier&#160;: tu peux faire des applications Angular en utilisant les trucs de TypeScript les plus utiles (j&#8217;y reviendrai) et en ignorant tout le reste avec du pur JavaScript (ES6 dans mon cas). Mais j&#8217;aime ce qu&#8217;ils ont fait, et on jettera un coup d&#8217;oeil à TypeScript dans le chapitre suivant. Tu pourras ainsi lire et comprendre n&#8217;importe quel code Angular, et tu pourras décider de l&#8217;utiliser, ou pas, ou juste un peu, dans tes applications.</p>
</div>
<div class="paragraph">
<p>Si tu te demandes "mais pourquoi avoir du code fortement typé dans une application Angular&#160;?", prenons un exemple. Angular 1 et 2 ont été construits sur le puissant concept d&#8217;injection de dépendance. Tu le connais déjà peut-être, parce que c&#8217;est un <em>design pattern</em> classique, utilisé dans beaucoup de frameworks et langages, et notamment AngularJS&#160;1.x comme je le disais.</p>
</div>
</div>
<div class="sect2">
<h3 id="_un_exemple_concret_dinjection_de_dépendance">3.3. Un exemple concret d&#8217;injection de dépendance</h3>
<div class="paragraph">
<p>Pour synthétiser ce qu&#8217;est l&#8217;injection de dépendance, prenons un composant d&#8217;une application, disons <code>RaceList</code>, permettant d&#8217;accéder à la liste des courses que le service <code>RaceService</code> peut retourner. Tu peux écrire <code>RaceList</code> comme ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class RaceList {
  constructor() {
    this.raceService = new RaceService();
    // let's say that list() returns a promise
    this.raceService.list()
    // we store the races returned into a member of `RaceList`
      .then(races =&gt; this.races = races);
    // arrow functions, FTW!
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais ce code a plusieurs défauts. L&#8217;un d&#8217;eux est la testabilité&#160;: c&#8217;est compliqué de remplacer <code>raceService</code> par un faux service (un bouchon, un <em>mock</em>), pour tester notre composant.</p>
</div>
<div class="paragraph">
<p>Si nous utilisons le <em>pattern</em> d&#8217;injection de dépendance (<em>Dependency Injection</em>, DI), nous déléguons la création de <code>RaceService</code> à un framework, lui réclamant simplement une instance. Le framework est ainsi en charge de la création de la dépendance, et il peut nous "l&#8217;injecter", par exemple dans le constructeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class RaceList {
  constructor(raceService) {
    this.raceService = raceService;
    this.raceService.list()
      .then(races =&gt; this.races = races);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, quand on teste cette classe, on peut facilement passer un faux service au constructeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// in a test
const fakeService = {
  list: () =&gt; {
    // returns a fake promise
  }
};
const raceList = new RaceList(fakeService);
// now we are sure that the race list
// is the one we want for the test</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais comment le framework sait-il quel composant injecter dans le constructeur&#160;? Bonne question&#160;! AngularJS&#160;1.x se basait sur le nom du paramètre, mais cela a une sérieuse limitation&#160;: la minification du code va changer le nom du paramètre. Pour contourner ce problème, tu pouvais utiliser la notation à base de tableau, ou ajouter des métadonnées à la classe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">RaceList.$inject = ['RaceService'];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il nous fallait donc ajouter des métadonnées pour que le framework comprenne ce qu&#8217;il fallait injecter dans nos classes. Et c&#8217;est exactement ce que proposent les annotations de type&#160;: une métadonnée donnant un indice nécessaire au framework pour réaliser la bonne injection. En Angular, avec TypeScript, voilà à quoi pourrait ressembler notre composant <code>RaceList</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class RaceList {
  raceService: RaceService;
  races: Array&lt;string&gt;;

  constructor(raceService: RaceService) {
    // the interesting part is `: RaceService`
    this.raceService = raceService;
    this.raceService.list()
      .then(races =&gt; this.races = races);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant l&#8217;injection peut se faire sans ambiguité&#160;! Tu n&#8217;es pas obligé d&#8217;utiliser TypeScript en Angular, mais clairement ton code sera plus élégant avec. Tu peux toujours faire la même chose en pur ES6 ou ES5, mais tu devras ajouter manuellement des métadonnées d&#8217;une autre façon (on y reviendra en détail).</p>
</div>
<div class="paragraph">
<p>C&#8217;est pourquoi nous allons passer un peu de temps à apprendre TypeScript (TS). Angular est clairement construit pour tirer parti d&#8217;ES6 et TS 1.5+, et rendre notre vie de développeur plus facile en l&#8217;utilisant. Et l&#8217;équipe Angular a envie de soumettre le système de type au comité de standardisation, donc peut-être qu&#8217;un jour il sera normal d&#8217;avoir de vrais types en JS.</p>
</div>
<div class="paragraph">
<p>Il est temps désormais de se lancer dans TypeScript&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="typescript">4. Découvrir TypeScript</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TypeScript, qui existe depuis 2012, est un sur-ensemble de JavaScript, ajoutant quelques trucs à ES5. Le plus important étant le système de type, lui donnant même son nom. Depuis la version 1.5, sortie en 2015, cette bibliothèque essaie d&#8217;être un sur-ensemble d&#8217;ES6, incluant toutes les fonctionnalités vues précédemment, et quelques nouveautés, comme les décorateurs.
Ecrire du TypeScript ressemble à écrire du JavaScript. Par convention les fichiers sources TypeScript ont l&#8217;extension <code>.ts</code>, et seront compilés en JavaScript standard, en général lors du build, avec le compilateur TypeScript. Le code généré reste très lisible.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">npm install -g typescript
tsc test.ts</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais commençons par le début.</p>
</div>
<div class="sect2">
<h3 id="_les_types_de_typescript">4.1. Les types de TypeScript</h3>
<div class="paragraph">
<p>La syntaxe pour ajouter des informations de type en TypeScript est basique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">let variable: type;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les différents types sont simples à retenir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const poneyNumber: number = 0;
const poneyName: string = 'Rainbow Dash';</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ces cas, les types sont facultatifs, car le compilateur TS peut les deviner depuis leur valeur (c&#8217;est ce qu&#8217;on appelle l&#8217;inférence de type).</p>
</div>
<div class="paragraph">
<p>Le type peut aussi être défini dans ton application, avec par exemple la classe suivante <code>Pony</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const pony: Pony = new Pony();</code></pre>
</div>
</div>
<div class="paragraph">
<p>TypeScript supporte aussi ce que certains langages appellent des types génériques, par exemple avec un <code>Array</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const ponies: Array&lt;Pony&gt; = [new Pony()];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet <code>Array</code> ne peut contenir que des poneys, ce qu&#8217;indique la notation générique <code>&lt;&gt;</code>. On peut se demander quel est l&#8217;intérêt d&#8217;imposer cela. Ajouter de telles informations de type aidera le compilateur à détecter des erreurs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">ponies.push('hello'); // error TS2345
// Argument of type 'string' is not assignable to parameter of type 'Pony'.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et comment faire si tu as besoin d&#8217;une variable pouvant recevoir plusieurs types&#160;? TS a un type spécial pour cela, nommé <code>any</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">let changing: any = 2;
changing = true; // no problem</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est pratique si tu ne connais pas le type d&#8217;une valeur, soit parce qu&#8217;elle vient d&#8217;un bout de code dynamique, ou en sortie d&#8217;une bibliothèque obscure.</p>
</div>
<div class="paragraph">
<p>Si ta variable ne doit recevoir que des valeurs de type <code>number</code> ou <code>boolean</code>, tu peux utiliser l&#8217;union de types&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">let changing: number|boolean = 2;
changing = true; // no problem</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_valeurs_énumérées_enum">4.2. Valeurs énumérées (<em>enum</em>)</h3>
<div class="paragraph">
<p>TypeScript propose aussi des valeurs énumérées&#160;: <code>enum</code>. Par exemple, une course de poneys dans ton application peut être soit <code>ready</code>, <code>started</code> ou <code>done</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">enum RaceStatus {Ready, Started, Done}
    const race = new Race();
    race.status = RaceStatus.Ready;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un <code>enum</code> est en fait une valeur numérique, commençant à 0. Tu peux cependant définir la valeur que tu veux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">enum Medal {Gold = 1, Silver, Bronze}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_return_types">4.3. Return types</h3>
<div class="paragraph">
<p>Tu peux aussi spécifier le type de retour d&#8217;une fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function startRace(race: Race): Race {
  race.status = RaceStatus.Started;
  return race;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la fonction ne retourne rien, tu peux le déclarer avec <code>void</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function startRace(race: Race): void {
  race.status = RaceStatus.Started;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_interfaces">4.4. Interfaces</h3>
<div class="paragraph">
<p>C&#8217;est déjà une bonne première étape. Mais comme je le disais plus tôt, JavaScript est formidable par sa nature dynamique. Une fonction marchera si elle reçoit un objet possédant la bonne propriété&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function addPointsToScore(player, points) {
  player.score += points;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette fonction peut être appliquée à n&#8217;importe quel objet ayant une propriété <code>score</code>. Maintenant comment traduit-on cela en TypeScript&#160;? Facile&#160;!, on définit une interface, un peu comme la "forme" de l&#8217;objet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function addPointsToScore(player: { score: number; }, points: number): void {
  player.score += points;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela signifie que le paramètre doit avoir une propriété nommée <code>score</code> de type <code>number</code>. Tu peux évidement aussi nommer ces interfaces&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">interface HasScore {
  score: number;
}
    function addPointsToScore(player: HasScore, points: number): void {
      player.score += points;
    }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_paramètre_optionnel">4.5. Paramètre optionnel</h3>
<div class="paragraph">
<p>Y&#8217;a un autre truc sympa en JavaScript&#160;: les paramètres optionnels. Si tu ne les passes pas à l&#8217;appel de la fonction, leur valeur sera <code>undefined</code>. Mais en TypeScript, si tu déclares une fonction avec des paramètres typés, le compilateur te gueulera dessus si tu les oublies&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">addPointsToScore(player); // error TS2346
// Supplied parameters do not match any signature of call target.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour montrer qu&#8217;un paramètre est optionnel dans une fonction (ou une propriété dans une interface), tu ajoutes <code>?</code> après le paramètre. Ici, le paramètre <code>points</code> est optionnel&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function addPointsToScore(player: HasScore, points?: number): void {
  points = points || 0;
  player.score += points;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_des_fonctions_en_propriété">4.6. Des fonctions en propriété</h3>
<div class="paragraph">
<p>Tu peux aussi décrire un paramètre comme devant posséder une fonction spécifique plutôt qu&#8217;une propriété&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function startRunning(pony) {
  pony.run(10);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La définition de cette interface serait&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">interface CanRun {
  run(meters: number): void;
}
    function startRunning(pony: CanRun): void {
      pony.run(10);
    }

    const ponyOne = {
      run: (meters) =&gt; logger.log(`pony runs ${meters}m`)
    };
    startRunning(ponyOne);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes_2">4.7. Classes</h3>
<div class="paragraph">
<p>Une classe peut implémenter une interface. Pour nous, un poney peut courir, donc on pourrait écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class Pony implements CanRun {
  run(meters) {
    logger.log(`pony runs ${meters}m`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le compilateur nous obligera à implémenter la méthode <code>run</code> dans la classe. Si nous l&#8217;implémentons mal, par exemple en attendant une <code>string</code> au lieu d&#8217;un <code>number</code>, le compilateur va crier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class IllegalPony implements CanRun {
  run(meters: string) {
    console.log(`pony runs ${meters}m`);
  }
}
// error TS2420: Class 'IllegalPony' incorrectly implements interface 'CanRun'.
// Types of property 'run' are incompatible.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi implémenter plusieurs interfaces si ça te fait plaisir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class HungryPony implements CanRun, CanEat {
  run(meters) {
    logger.log(`pony runs ${meters}m`);
  }

  eat() {
    logger.log(`pony eats`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et une interface peut en étendre une ou plusieurs autres&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">interface Animal extends CanRun, CanEat {}

class Pony implements Animal {
  // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une classe en TypeScript peut avoir des propriétés et des méthodes. Avoir des propriétés dans une classe n&#8217;est pas une fonctionnalité standard d&#8217;ES6, c&#8217;est seulement possible en TypeScript.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class SpeedyPony {
  speed = 10;

  run() {
    logger.log(`pony runs at ${this.speed}m/s`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tout est public par défaut. Mais tu peux utiliser le mot-clé <code>private</code> pour cacher une propriété ou une méthode. Ajouter <code>public</code> ou <code>private</code> à un paramètre de constructeur est un raccourci pour créer et initialiser un membre privé ou public&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class NamedPony {
  constructor(public name: string, private speed: number) {
  }

  run() {
    logger.log(`pony runs at ${this.speed}m/s`);
  }
}
    const pony = new NamedPony('Rainbow Dash', 10);
    // defines a public property name with 'Rainbow Dash'
    // and a private one speed with 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce qui est l&#8217;équivalent du plus verbeux&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class NamedPonyWithoutShortcut {
  public name: string;
  private speed: number;

  constructor(name: string, speed: number) {
    this.name = name;
    this.speed = speed;
  }

  run() {
    logger.log(`pony runs at ${this.speed}m/s`);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces raccourcis sont très pratiques et nous allons beaucoup les utiliser en Angular&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_utiliser_dautres_bibliothèques">4.8. Utiliser d&#8217;autres bibliothèques</h3>
<div class="paragraph">
<p>Mais si on travaille avec des bibliothèques externes écrites en JS, comment savoir les types des paramètres attendus par telle fonction de telle bibliothèque&#160;? La communauté TypeScript est tellement cool que ses membres ont défini des interfaces pour les types et les fonctions exposés par les bibliothèques JavaScript les plus populaires.</p>
</div>
<div class="paragraph">
<p>Les fichiers contenant ces interfaces ont une extension spéciale&#160;: <code>.d.ts</code>. Ils contiennent une liste de toutes les fonctions publiques des bibliothèques. <a href="https://github.com/borisyankov/DefinitelyTyped">DefinitelyTyped</a> est l&#8217;outil de référence pour récupérer ces fichiers. Par exemple, si tu veux utiliser TS dans ton application AngularJS&#160;1.x, tu peux récupérer le fichier dédié depuis le repository directement avec NPM&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">npm install --save-dev @types/angular</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou le télécharger manuellement.
Puis tu inclues ce fichier au début de ton code et hop!, tu profites du bonheur d&#8217;avoir une compilation <em>typesafe</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">/// &lt;reference path="angular.d.ts" /&gt;
angular.module(10, []); // the module name should be a string
// so when I compile, I get:
// Argument of type 'number' is not assignable to parameter of type 'string'.</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>/// &lt;reference path="angular.d.ts" /&gt;</code> est un commentaire spécial reconnu par TS, qui indique au compilateur de vérifier l&#8217;interface <code>angular.d.ts</code>.
Maintenant, si tu te trompes dans l&#8217;appel d&#8217;une méthode AngularJS, le compilateur te le dira, et tu peux corriger sans avoir à lancer manuellement ton application&#160;!</p>
</div>
<div class="paragraph">
<p>Encore plus cool, depuis TypeScript 1.6, le compilateur est capable de trouver par lui-même ces interfaces
si elles sont packagées avec ta dépendance dans ton répertoire <code>node_modules</code>.
De plus en plus de projets adoptent cette approche, et Angular fait de même.
Tu n&#8217;as donc même pas à t&#8217;occuper d&#8217;inclure ces interfaces dans ton projet Angular&#160;:
le compilateur TS va tout comprendre comme un grand si tu utilises NPM pour gérer tes dépendances&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_decorateurs">4.9. Decorateurs</h3>
<div class="paragraph">
<p>C&#8217;est une fonctionnalité toute nouvelle, ajoutée seulement en TypeScript 1.5, juste pour le support d&#8217;Angular.
En effet, comme on le verra bientôt, les composants Angular peuvent être décrits avec des décorateurs.
Tu n&#8217;as peut-être jamais entendu parler de décorateurs, car tous les langages ne les proposent pas.
Un décorateur est une façon de faire de la méta-programmation.
Ils ressemblent beaucoup aux annotations,
qui sont principalement utilisées en Java, C#, et Python, et peut-être d&#8217;autres langages que je ne connais pas.
Suivant le langage, tu peux ajouter une annotation sur une méthode, un attribut, ou une classe.
Généralement, les annotations ne sont pas vraiment utiles au langage lui-même, mais plutôt aux frameworks et aux bibliothèques.</p>
</div>
<div class="paragraph">
<p>Les décorateurs sont vraiment puissants: ils peuvent modifier leur cible (classes, méthodes, etc.)
et par exemple modifier les paramètres ou le résultat retourné,
appeler d&#8217;autres méthodes quand la cible est appelée,
ou ajouter des métadonnées destinées à un framework (c&#8217;est ce que font les décorateurs d&#8217;Angular).
Jusqu&#8217;à présent, cela n&#8217;existait pas en JavaScript.
Mais le langage évolue, et il y a maintenant une proposition officielle pour le support des décorateurs,
qui les rendra peut-être possibles un jour (possiblement avec ES7/ES2016).</p>
</div>
<div class="paragraph">
<p>En Angular, on utilisera les annotations fournies par le framework.
Leur rôle est assez simple: ils ajoutent des métadonnées à nos classes, propriétés ou paramètres pour par exemple indiquer "cette classe est un composant",
"cette dépendance est optionnelle", "ceci est une propriété spéciale du composant", etc.
Ce n&#8217;est pas obligatoire de les utiliser, car tu peux toujours ajouter les métadonnées manuellement si tu ne veux que du pur ES5,
mais le code sera plus élégant avec des décorateurs, comme ceux proposés par TypeScript.</p>
</div>
<div class="paragraph">
<p>En TypeScript, les annotations sont préfixées par <code>@</code>, et peuvent être appliquées sur une classe, une propriété de classe, une fonction, ou un paramètre de fonction.
Pas sur un constructeur en revanche, mais sur ses paramètres oui.</p>
</div>
<div class="paragraph">
<p>Pour mieux comprendre ces décorateurs, essayons d&#8217;en construire un très simple par nous-mêmes,
<code>@Log()</code>, qui va écrire le nom de la méthode à chaque fois qu&#8217;elle sera appelée.</p>
</div>
<div class="paragraph">
<p>Il s&#8217;utilisera comme ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class RaceService {

  @Log()
  getRaces() {
    // call API
  }

  @Log()
  getRace(raceId) {
    // call API
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour le définir, nous devons écrire une méthode renvoyant une fonction comme celle-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const Log = function () {
  return (target: any, name: string, descriptor: any) =&gt; {
    logger.log(`call to ${name}`);
    return descriptor;
  };
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Selon ce sur quoi nous voulons appliquer notre décorateur, la fonction n&#8217;aura pas exactement les mêmes arguments.
Ici nous avons un décorateur de méthode, qui prend 3 paramètres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>target</code>&#160;: la méthode ciblée par notre décorateur</p>
</li>
<li>
<p><code>name</code>&#160;: le nom de la méthode ciblée</p>
</li>
<li>
<p><code>descriptor</code>&#160;: le descripteur de la méthode ciblée, par exemple est-ce que la méthode est énumérable, etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous voulons simplement écrire le nom de la méthode, mais tu pourrais faire pratiquement ce que tu veux&#160;:
modifier les paramètres, le résultat, appeler une autre fonction, etc.</p>
</div>
<div class="paragraph">
<p>Ici, dans notre exemple basique, chaque fois que les méthodes <code>getRace()</code> ou <code>getRaces()</code> sont exécutées,
nous verrons une nouvelle trace dans la console du navigateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">    raceService.getRaces();
    // logs: call to getRaces
    raceService.getRace(1);
    // logs: call to getRace</code></pre>
</div>
</div>
<div class="paragraph">
<p>En tant qu&#8217;utilisateur d&#8217;Angular, jetons un œil à ces annotations&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({ selector: 'ns-home' })
class HomeComponent {

  constructor(@Optional() hello: HelloService) {
    logger.log(hello);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;annotation <code>@Component</code> est ajoutée à la classe <code>Home</code>.
Quand Angular chargera notre application, il va trouver la classe <code>Home</code>,
et va comprendre que c&#8217;est un composant grâce au décorateur.
Cool, hein&#160;?! Comme tu le vois, une annotation peut recevoir des paramètres, ici un objet de configuration.</p>
</div>
<div class="paragraph">
<p>Je voulais juste présenter le concept de décorateur,
nous aurons l&#8217;occasion de revoir tous les décorateurs disponibles en Angular tout au long de ce livre.</p>
</div>
<div class="paragraph">
<p>Je dois aussi indiquer que tu peux utiliser les décorateurs avec Babel comme transpileur à la place de TypeScript.
Il y a même un plugin pour supporter tous les décorateurs Angular&#160;: <a href="https://www.npmjs.com/package/babel-plugin-angular2-annotations">angular2-annotations</a>.
Babel supporte aussi les propriétés de classe, mais pas le système de type apporté par TypeScript.
Tu peux utiliser Babel, et écrire du code "ES6+", mais tu ne pourras pas bénéficier des types, et ils sont sacrément utiles pour l&#8217;injection de dépendances.
C&#8217;est possible, mais tu devras ajouter d&#8217;autres décorateurs pour remplacer les informations de type.</p>
</div>
<div class="paragraph">
<p>Ainsi mon conseil est d&#8217;essayer TypeScript.
Tous mes exemples dans ce livre l&#8217;utiliseront.
Il n&#8217;est pas intrusif, tu peux l&#8217;utiliser quand c&#8217;est utile et l&#8217;oublier le reste du temps.
Si vraiment tu n&#8217;aimes pas, il ne sera pas très compliqué de repasser à ES6 avec Babel ou Traceur,
ou même ES5 si tu es complètement fou (mais pour ma part, je trouve le code ES5 d&#8217;une application Angular vraiment pas terrible&#160;!).</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="web-components">5. Le monde merveilleux des Web Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Avant d&#8217;aller plus loin, j&#8217;aimerais faire une petite pause pour parler des Web Components.
Vous n&#8217;avez pas besoin de connaître les Web Components pour écrire du code Angular.
Mais je pense que c&#8217;est une bonne chose d&#8217;en avoir un aperçu,
car en Angular certaines décisions ont été prises pour faciliter leur intégration,
ou pour rendre les composants que l&#8217;on construit similaires à des Web Components.
Tu es libre de sauter ce chapitre si tu ne t&#8217;intéresses pas du tout au sujet,
mais je pense que tu apprendras deux-trois choses qui pourraient t&#8217;être utiles pour la suite.</p>
</div>
<div class="sect2">
<h3 id="_le_nouveau_monde">5.1. Le nouveau Monde</h3>
<div class="paragraph">
<p>Les composants sont un vieux rêve de développeur.
Un truc que tu prendrais sur étagère et lâcherais dans ton application,
et qui marcherait directement et apporterait la fonctionnalité à tes utilisateurs sans rien faire.</p>
</div>
<div class="paragraph">
<p>Mes amis, cette heure est venue.</p>
</div>
<div class="paragraph">
<p>Oui, bon, peut-être. En tout cas, on a le début d&#8217;un truc.</p>
</div>
<div class="paragraph">
<p>Ce n&#8217;est pas complètement neuf.
On avait déjà la notion de composants dans le développement web depuis quelques temps,
mais ils demandaient en général de lourdes dépendances comme
jQuery, Dojo, Prototype, AngularJS, etc.
Pas vraiment le genre de bibliothèques que tu veux absolument ajouter à ton application.</p>
</div>
<div class="paragraph">
<p>Les Web Components essaient de résoudre ce problème&#160;:
avoir des composants réutilisables et encapsulés.</p>
</div>
<div class="paragraph">
<p>Ils reposent sur un ensemble de standards émergents,
que les navigateurs ne supportent pas encore parfaitement.
Mais quand même, c&#8217;est un sujet intéressant,
même si on ne pourra pas en bénéficier pleinement avant quelques années,
ou même jamais si le concept ne décolle pas.</p>
</div>
<div class="paragraph">
<p>Ce standard émergent est défini dans quatre spécifications&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Custom elements ("éléments personnalisés")</p>
</li>
<li>
<p>Shadow DOM ("DOM de l&#8217;ombre")</p>
</li>
<li>
<p>Template</p>
</li>
<li>
<p>HTML imports</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note que les exemples présentés ont plus de chances de fonctionner dans un Chrome ou un Firefox récent.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_elements">5.2. Custom elements</h3>
<div class="paragraph">
<p>Les éléments customs sont un nouveau standard qui permet au développeur de créer ses propres éléments du DOM,
faisant de <code>&lt;ns-pony&gt;&lt;/ns-pony&gt;</code> un élément HTML parfaitement valide.
La spécification définit comment déclarer de tels éléments,
comment tu peux les faire étendre des éléments existants,
comment tu peux définir ton API, etc.</p>
</div>
<div class="paragraph">
<p>Déclarer un élément custom se fait avec un simple <code>document.registerElement('ns-pony')</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// new element
var PonyComponent = document.registerElement('ns-pony');
// insert in current body
document.body.appendChild(new PonyComponent());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que le nom doit contenir un tiret,
pour indiquer au navigateur que c&#8217;est un élément custom.</p>
</div>
<div class="paragraph">
<p>Évidemment ton élément custom peut avoir des propriétés et des méthodes,
et il aura aussi des callbacks liés au cycle de vie,
pour exécuter du code quand le composant est inséré ou supprimé,
ou quand l&#8217;un de ses attributs est modifié.
Il peut aussi avoir son propre template.
Par exemple, peut-être que ce <code>ns-pony</code> affiche une image du poney, ou seulement son nom&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// let's extend HTMLElement
var PonyComponentProto = Object.create(HTMLElement.prototype);
// and add some template using a lifecycle
PonyComponentProto.createdCallback = function() {
  this.innerHTML = '&lt;h1&gt;General Soda&lt;/h1&gt;';
};

// new element
var PonyComponent = document.registerElement('ns-pony', {prototype: PonyComponentProto});
// insert in current body
document.body.appendChild(new PonyComponent());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu jettes un coup d&#8217;œil au DOM, tu verras <code>&lt;ns-pony&gt;&lt;h1&gt;General Soda&lt;/h1&gt;&lt;/ns-pony&gt;</code>.
Mais cela veut dire que le CSS ou la logique JavaScript de ton application
peut avoir des effets indésirables sur ton composant.
Donc, en général, le template est caché et encaspulé dans un truc appelé le Shadow DOM ("DOM de l&#8217;ombre"),
et tu ne verras dans le DOM que <code>&lt;ns-pony&gt;&lt;/ns-pony&gt;</code>,
bien que le navigateur affiche le nom du poney.</p>
</div>
</div>
<div class="sect2">
<h3 id="_shadow_dom">5.3. Shadow DOM</h3>
<div class="paragraph">
<p>Avec un nom qui claque comme celui-là,
on s&#8217;attend à un truc très puissant.
Et il l&#8217;est.
Le Shadow DOM est une façon d&#8217;encapsuler le DOM de ton composant.
Cette encapsulation signifie que la feuille de style et la logique JavaScript de ton application
ne vont pas s&#8217;appliquer sur le composant et le ruiner accidentellement.
Cela en fait l&#8217;outil idéal pour dissimuler le fonctionnement interne de ton composant,
et s&#8217;assurer que rien n&#8217;en fuit à l&#8217;extérieur.</p>
</div>
<div class="paragraph">
<p>Si on retourne à notre exemple précédent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">var PonyComponentProto = Object.create(HTMLElement.prototype);

// add some template in the Shadow DOM
PonyComponentProto.createdCallback = function() {
  var shadow = this.createShadowRoot();
  shadow.innerHTML = '&lt;h1&gt;General Soda&lt;/h1&gt;';
};

var PonyComponent = document.registerElement('ns-pony', {prototype: PonyComponentProto});
document.body.appendChild(new PonyComponent());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu essaies maintenant de l&#8217;observer, tu devrais voir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony&gt;
  #shadow-root (open)
    &lt;h1&gt;General Soda&lt;/h1&gt;
&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, même si tu ajoutes du style aux éléments <code>h1</code>,
rien ne changera&#160;:
le Shadow DOM agit comme une barrière.</p>
</div>
<div class="paragraph">
<p>Jusqu&#8217;à présent, nous avions utilisé une chaîne de caractères pour notre template.
Mais ce n&#8217;est habituellement pas la façon de procéder.
La bonne pratique est de plutôt utiliser l&#8217;élément <code>&lt;template&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_template">5.4. Template</h3>
<div class="paragraph">
<p>Un template spécifié dans un élément <code>&lt;template&gt;</code> n&#8217;est pas affiché par le navigateur.
Son but est d&#8217;être à terme cloné dans un autre élément.
Ce que tu déclareras à l&#8217;intérieur sera inerte&#160;: les scripts ne s&#8217;exécuteront pas, les images ne se chargeront pas, etc.
Son contenu peut être requêté par le reste de la page avec la méthode classique <code>getElementById()</code>,
et il peut être placé sans risque n&#8217;importe où dans la page.</p>
</div>
<div class="paragraph">
<p>Pour utiliser un template, il doit être cloné&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">&lt;template id="pony-tpl"&gt;
  &lt;style&gt;
    h1 { color: orange; }
  &lt;/style&gt;
  &lt;h1&gt;General Soda&lt;/h1&gt;
&lt;/template&gt;

var PonyComponentProto = Object.create(HTMLElement.prototype);

// add some template using the template tag
PonyComponentProto.createdCallback = function() {
  var template = document.querySelector('#pony-tpl');
  var clone = document.importNode(template.content, true);
  this.createShadowRoot().appendChild(clone);
};

var PonyComponent = document.registerElement('ns-pony', {prototype: PonyComponentProto});
document.body.appendChild(new PonyComponent());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et si on pouvait déclarer cela dans un seul fichier,
cela nous ferait un composant parfaitement encapsulé&#8230;&#8203;
C&#8217;est ce que nous allons faire avec les imports HTML&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_html_imports">5.5. HTML imports</h3>
<div class="paragraph">
<p>C&#8217;est la dernière spécification.
Les imports HTML permettent d&#8217;importer du HTML dans du HTML.
Quelque chose comme <code>&lt;link rel="import" href="ns-pony.html"&gt;</code>.
Ce fichier, <code>ns-pony.html</code>, contiendrait tout ce qui est requis&#160;:
le template, les scripts, les styles, etc.</p>
</div>
<div class="paragraph">
<p>Si quelqu&#8217;un voulait ensuite utiliser notre merveilleux composant,
il lui suffirait simplement d&#8217;utiliser un import HTML.</p>
</div>
</div>
<div class="sect2">
<h3 id="_polymer_et_x_tag">5.6. Polymer et X-tag</h3>
<div class="paragraph">
<p>Toutes ces spécifications constituent les Web Components.
Je suis loin d&#8217;en être expert,
et ils présentent toute sorte de pièges.</p>
</div>
<div class="paragraph">
<p>Comme les Web Components ne sont pas complètement supportés par tous les navigateurs,
il y a un <em>polyfill</em> à inclure dans ton application pour être sûr que ça fonctionne.
Ce <em>polyfill</em> est appelé <a href="https://github.com/WebComponents/webcomponentsjs">web-component.js</a>,
et il est bon de noter qu&#8217;il est le fruit d&#8217;un effort commun entre Google, Mozilla et Microsoft, entre autres.</p>
</div>
<div class="paragraph">
<p>Au dessus de ce <em>polyfill</em>, quelques bibliothèques ont vu le jour.
Elles proposent toutes de faciliter le travail avec les Web Components,
et viennent souvent avec un lot de composants tout prêts.</p>
</div>
<div class="paragraph">
<p>Parmi les initiatives notables, on peut citer&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.polymer-project.org/">Polymer</a> de Google&#160;;</p>
</li>
<li>
<p><a href="http://x-tag.github.io/">X-tag</a> de Mozilla et Microsoft.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Je ne vais pas rentrer dans les détails, mais tu peux facilement utiliser un composant Polymer existant.
Supposons que tu veuilles embarquer une carte Google dans ton application&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;!-- Polyfill Web Components support for older browsers --&gt;
&lt;script src="webcomponents.js"&gt;&lt;/script&gt;

&lt;!-- Import element --&gt;
&lt;link rel="import" href="google-map.html"&gt;

&lt;!-- Use element --&gt;
&lt;body&gt;
  &lt;google-map latitude="45.780" longitude="4.842"&gt;&lt;/google-map&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y a une tonne de composants disponibles.
Tu peux en avoir un aperçu sur <a href="https://www.webcomponents.org/" class="bare">https://www.webcomponents.org/</a>.</p>
</div>
<div class="paragraph">
<p>Polymer permet aussi de créer tes propres composants&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;dom-module id="ns-pony"&gt;
  &lt;template&gt;
    &lt;h1&gt;[[name]]&lt;/h1&gt;
  &lt;/template&gt;
  &lt;script&gt;
    Polymer({
      is: 'ns-pony',
      properties: {
        name: String
      }
    });
  &lt;/script&gt;
&lt;/dom-module&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>et de les utiliser&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;!-- Polyfill Web Components support for older browsers --&gt;
&lt;script src="webcomponents.js"&gt;&lt;/script&gt;

&lt;!-- Polymer --&gt;
&lt;link rel="import" href="polymer.html"&gt;

&lt;!-- Import element --&gt;
&lt;link rel="import" href="ns-pony.html"&gt;

&lt;!-- Use element --&gt;
&lt;body&gt;
  &lt;ns-pony name="General Soda"&gt;&lt;/ns-pony&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux faire plein de trucs cools avec Polymer, comme du binding bi-directionnel,
donner des valeurs par défaut aux attributs, émettre des événements custom,
réagir aux modifications d&#8217;attribut, répéter des éléments si tu fournis une collection à un composant, etc.</p>
</div>
<div class="paragraph">
<p>C&#8217;est un chapitre trop court pour te montrer sérieusement tout ce que l&#8217;on peut faire avec les Web Components,
mais tu verras que certains de leurs concepts vont émerger dans la lecture à venir.
Et tu verras sans aucun doute que l&#8217;équipe Google a conçu Angular
pour rendre facile l&#8217;utilisation des Web Components aux côtés de nos composants Angular.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="philosophy">6. La philosophie d&#8217;Angular</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pour construire une application Angular, il te faut saisir quelques trucs sur la philosophie du framework.</p>
</div>
<div class="paragraph">
<p>Avant tout, Angular est un framework orienté composant. Tu vas écrire de petits composants, et assemblés, ils vont constituer une application complète. Un composant est un groupe d&#8217;éléments HTML, dans un template, dédiés à une tâche particulière. Pour cela, tu auras probablement besoin d&#8217;un peu de logique métier derrière ce template, pour peupler les données, et réagir aux événements par exemple. Pour les vétérans d&#8217;AngularJS&#160;1.x, c&#8217;est un peu comme le fameux duo "template&#160;/ controlleur", ou une directive.</p>
</div>
<div class="paragraph">
<p>Il faut aussi dire qu&#8217;un standard a été défini autour de ces composants&#160;: le standard <em>Web Component</em> ("composant web"). Même s&#8217;il n&#8217;est pas encore complètement supporté dans les navigateurs, tu peux déjà construire des petits composants isolés, réutilisables dans différentes applications (ce vieux rêve de programmeur). Cette orientation composant est largement partagée par de nombreux frameworks front-end&#160;: c&#8217;est le cas depuis le début de <a href="https://facebook.github.io/react/">ReactJS</a>, le framework tendance de Facebook&#160;; <a href="http://emberjs.com/">EmberJS</a> et <a href="http://angularjs.org">AngularJS</a> ont leur propre façon de faire quelque chose de similaire&#160;; et les petits nouveaux <a href="http://aurelia.io/">Aurelia</a> ou <a href="http://vuejs.org/">Vue.js</a> parient aussi sur la construction de petits composants.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="emberjs logo" width="25%">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="reactjs logo" width="25%">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAYAAACAvzbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY1NkExMjc5NzY5MjExRTM5MTg5OEQ5MEJGOENFNDc2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY1NkExMjdBNzY5MjExRTM5MTg5OEQ5MEJGOENFNDc2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjU2QTEyNzc3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjU2QTEyNzg3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6FxXliAAApN0lEQVR42uyde4xd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" alt="vuejs logo" width="25%">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="aureliajs logo" width="25%">
</div>
</div>
<div class="paragraph">
<p>Angular n&#8217;est donc pas le seul sur le sujet, mais il est parmi les premiers (ou le premier&#160;?) à considérer sérieusement l&#8217;intégration des Web Components (ceux du standard officiel). Mais écartons ce sujet, trop avancé pour le moment.</p>
</div>
<div class="paragraph">
<p>Tes composants seront organisés de façon hiérarchique, comme le DOM&#160;: un composant racine aura des composants enfants, qui auront chacun des composants enfants, etc. Si tu veux afficher une course de poneys (qui ne voudrait pas&#160;?), tu auras probablement une application (Poneyracer), avec une vue enfant (Race), affichant un menu (Menu), l&#8217;utilisateur connecté (User), et, évidemment, les poneys (Pony) en course&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag a1b940ff4bb8f7a0fd5a0f6ec564f54e" width="510" height="266">
</div>
</div>
<div class="paragraph">
<p>Comme tu vas écrire des composants tous les jours (de la semaine au moins), regardons de plus près à quoi ça ressemble. L&#8217;équipe Angular voulait aussi bénéficier d&#8217;une autre pépite du développement web moderne&#160;: ES6 (ou ES2015, si tu préfères). Ainsi tu peux écrire tes composants en ES5 (pas cool&#160;!) ou en ES6 (super cool&#160;!). Mais cela ne leur suffisait pas, ils voulaient utiliser une fonctionnalité qui n&#8217;est pas encore standard&#160;: les décorateurs. Alors ils ont travaillé étroitement avec les équipes de transpileurs (Traceur et Babel) et l&#8217;équipe Microsoft du projet TypeScript, pour nous permettre d&#8217;utiliser des décorateurs dans nos applications Angular. Quelques décorateurs sont disponibles, permettant de déclarer facilement un composant et sa vue. J&#8217;espère que tu es au courant, parce que je viens de consacrer deux chapitres à ces sujets&#160;!</p>
</div>
<div class="paragraph">
<p>Par exemple, en simplifiant, le composant Race pourrait ressembler à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { RacesService } from './services';

@Component({
  selector: 'ns-race',
  templateUrl: 'race/race.html'
})
export class RaceComponent {

  race: any;

  constructor(racesService: RacesService) {
    racesService.get()
      .then(race =&gt; this.race = race);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le template pourrait ressembler à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div&gt;
  &lt;h2&gt;{{ race.name }}&lt;/h2&gt;
  &lt;div&gt;{{ race.status }}&lt;/div&gt;
  &lt;div *ngFor="let pony of race.ponies"&gt;
    &lt;ns-pony [pony]="pony"&gt;&lt;/ns-pony&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu connais déjà AngularJS&#160;1.x, le template doit t&#8217;être familier, avec les même expressions entre accolades <code>{{ }}</code>, qui seront évaluées et remplacées par les valeurs correspondantes. Certains trucs ont cependant changé&#160;: plus de <code>ng-repeat</code> par exemple. Je ne veux pas aller trop loin pour le moment, juste te donner un aperçu du code.</p>
</div>
<div class="paragraph">
<p>Un composant est une partie complètement isolée de ton application. Ton application <em>est</em> un composant comme les autres.</p>
</div>
<div class="paragraph">
<p>Tu regrouperas tes composants au sein d&#8217;une ou plusieurs entités cohérentes, appelées des modules (des modules Angular, pas des modules ES6).</p>
</div>
<div class="paragraph">
<p>Dans un monde idéal, tu prendrais aussi des modules sur étagère fournis par la communauté,
et les ajouterais simplement dans ton application pour bénéficier de leurs fonctionnalités.</p>
</div>
<div class="paragraph">
<p>De tels modules pourraient fournir des composants d&#8217;IHM, ou la gestion du glisser-déposer, ou des validations spécifiques pour tes formulaires, et tout ce que tu peux imaginer d&#8217;autre.</p>
</div>
<div class="paragraph">
<p>Dans les chapitres suivants, on explorera quoi mettre en place, comment construire un petit composant, ton premier module, et la syntaxe des templates.</p>
</div>
<div class="paragraph">
<p>Il y a un autre concept au cœur d&#8217;Angular&#160;: l&#8217;injection de dépendance (<em>Dependency Injection</em>, DI). C&#8217;est un pattern très puissant, et tu seras très rapidement séduit après la lecture du chapitre qui lui sera consacré. C&#8217;est particulièrement utile pour tester ton application, et j&#8217;adore faire des tests, et voir la barre de progression devenir entièrement verte dans mon IDE. Ça me donne l&#8217;impression de faire du bon boulot. Il y aura ainsi un chapitre entier consacré à tout tester&#160;: tes composants, tes services, ton interface&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Angular a toujours cette sensation magique de la v1, où les modifications sont automatiquement détectées par le framework et appliquées au modèle et à la vue. Mais c&#8217;est fait d&#8217;une façon très différente&#160;: la détection de changement utilise désormais un concept nommé <code>zones</code>. On étudiera évidemment tout ça.</p>
</div>
<div class="paragraph">
<p>Angular est aussi un framework complet, avec plein d&#8217;outils pour faciliter les tâches classiques du développement web. Construire des formulaires, appeler un serveur HTTP, du routage d&#8217;URL, interagir avec d&#8217;autres bibliothèques, des animations, tout ce que tu veux&#160;: c&#8217;est possible&#160;!</p>
</div>
<div class="paragraph">
<p>Voilà, ça fait pas mal de trucs à apprendre&#160;! Alors commençons par le commencement&#160;: initialiser une application et construire notre premier composant.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="zero-to-something">7. Commencer de zéro</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Commençons par créer notre première application Angular et notre premier composant, avec un minimum d&#8217;outillage.</p>
</div>
<div class="sect2">
<h3 id="_nodejs_et_npm">7.1. NodeJS et NPM</h3>
<div class="paragraph">
<p>Aujourd&#8217;hui, pratiquement tous les outils JavaScript moderne sont faits pour Node.js et NPM.
Tu devras installer Node.js et NPM sur ton système.
Comme la meilleure façon de le faire dépend de ton système d&#8217;exploitation,
le mieux est d&#8217;aller voir le <a href="https://nodejs.org/">site officiel</a>.
Assure-toi d&#8217;avoir une version suffisamment récente de Node.js
(en exécutant <code>node --version</code>), quelque-chose comme 8.9+.</p>
</div>
</div>
<div class="sect2">
<h3 id="_angular_cli">7.2. Angular CLI</h3>
<div class="paragraph">
<p>Nous <em>pourrions</em> tout installer à la main par nous-même, en commençant avec un projet TypeScript,
puis installer toutes les dépendances nécessaires, etc.</p>
</div>
<div class="paragraph">
<p>Dans un vrai projet, il te faudra probablement mettre en place d&#8217;autres choses comme&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>des tests pour vérifier que tu n&#8217;as pas introduit de régressions&#160;;</p>
</li>
<li>
<p>peut-être un <em>linter</em> pour vérifier la qualité du code&#160;;</p>
</li>
<li>
<p>peut-être un pré-processeur CSS&#160;;</p>
</li>
<li>
<p>un outil de construction, pour orchestrer différentes tâches (compiler, tester, packager, etc.).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mais c&#8217;est un peu pénible à faire soi-même,
surtout quand il y a teeeeeeellement d&#8217;outils à apprendre auparavant.</p>
</div>
<div class="paragraph">
<p>Ces dernières années, plusieurs petits projets ont vu le jour,
tous basés sur le formidable <a href="http://yeoman.io/">Yeoman</a>.
C&#8217;était déjà le cas avec AngularJS&#160;1.x,
et il y a déjà eu plusieurs tentatives avec Angular.</p>
</div>
<div class="paragraph">
<p>Mais cette fois-ci, l&#8217;équipe Google a travaillé sur le sujet,
et ils en ont sorti ceci&#160;: <a href="https://github.com/angular/angular-cli"><code>Angular CLI</code></a>.</p>
</div>
<div class="paragraph">
<p><code>Angular CLI</code> est un outil en ligne de commande pour démarrer rapidement un projet,
déjà configuré avec Webpack comme un outil de construction, des tests, du packaging, etc.</p>
</div>
<div class="paragraph">
<p>Cette idée n&#8217;est pas nouvelle, et est d&#8217;ailleurs piquée d&#8217;un autre framework populaire&#160;:
EmberJS et son <a href="http://ember-cli.com/"><code>ember-cli</code></a> largement plébiscité.</p>
</div>
<div class="paragraph">
<p>L&#8217;outil est en évolution continue,
avec une équipe Google dédiée travaillant dessus, et l&#8217;améliorant chaque jour.
C&#8217;est maintenant la façon recommandée et le standard <em>de facto</em> pour créer et construire des applications Angular.
Alors essayons cette CLI, et découvrons la tonne de fonctionnalités qu&#8217;elle embarque&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Si tu veux, tu peux suivre notre exercice en ligne
<a href="https://angular-exercises.ninja-squad.com/exercises/0/getting-started">Getting Started</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18px" title="Free"></span>!
Il est gratuit et fait partie de notre Pack pro,
où tu apprends à construire une application complète étape par étape.
Le premier exercice est consacré à démarrer une application avec Angular CLI,
et va plus loin que ce que nous voyons dans ce chapitre.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Commençons par installer Angular CLI,
et générons une nouvelle application avec la commande <code>ng new</code>.
Si tu veux utiliser exactement la même version de la CLI que nous (<code>6.0.0</code>),
tu peux utiliser <code>npm install -g @angular/cli@6.0.0</code> à la place.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">npm install -g @angular/cli
ng new ponyracer --prefix ns</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va créer un squelette de projet dans un nouveau dossier nommé <code>ponyracer</code>.
Depuis ce répertoire, tu peux démarrer l&#8217;application avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">ng serve</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va démarrer un petit serveur HTTP localement, avec rechargement à chaud.
Ainsi, à chaque modification de fichier,
l&#8217;application sera reconstruite
et le navigateur se rechargera automatiquement.</p>
</div>
<div class="paragraph">
<p>Tada&#160;! Tu as ta première application qui tourne&#160;! 🎉</p>
</div>
</div>
<div class="sect2">
<h3 id="_structure_de_lapplication">7.3. Structure de l&#8217;application</h3>
<div class="paragraph">
<p>Plongeons-nous dans le code généré.</p>
</div>
<div class="paragraph">
<p>Tu peux ouvrir le projet dans ton IDE préféré. Tu peux utiliser à peu près ce que tu veux,
mais tu devrais y activer le support de TypeScript pour plus de confort.
Choisis ton favori&#160;: Webstorm, Atom, VisualStudio Code&#8230;&#8203;
Ils ont tous un bon support de TypeScript.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Si ton IDE le supporte,
la complétion de code devrait fonctionner car la dépendance Angular a ses propres fichiers <code>d.ts</code> dans le répertoire <code>node_modules</code>,
et TypeScript est capable de le détecter.
Tu peux même naviguer vers les définitions de type si tu le souhaites.
TypeScript apporte sa vérification de types,
donc tu verras les erreurs dès que tu les tapes.
Comme nous utilisons des <em>source maps</em>,
tu peux voir le code TypeScript directement dans ton navigateur,
et même débugger ton application en positionnant des points d&#8217;arrêt directement dedans.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tu devrais voir tout un tas de fichiers de configuration dans le répertoire racine&#160;:
bienvenue dans le JavaScript Moderne&#160;!</p>
</div>
<div class="paragraph">
<p>Le premier que tu reconnais peut-être est le fichier <code>package.json</code>&#160;:
C&#8217;est là que sont définies les dépendances de l&#8217;application.
Tu peux regarder à l&#8217;intérieur,
il devrait contenir les dépendances suivantes (entre autres)&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>les différents packages <code>@angular</code>.</p>
</li>
<li>
<p><code>rxjs</code>, une bibliothèque vraiment cool pour la programmation réactive. On consacrera un chapitre entier à ce sujet,
et à <a href="https://github.com/ReactiveX/RxJS">RxJS</a> en particulier.</p>
</li>
<li>
<p><code>zone.js</code>, qui assure la plomberie pour détecter les changements (on y reviendra aussi plus tard).</p>
</li>
<li>
<p>quelques dépendances pour développer l&#8217;application, comme la CLI, TypeScript, des bibliothèques de tests, des <em>typings</em>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>TypeScript lui-même a un fichier de configuration <code>tsconfig.json</code>
(et un autre dans <code>src</code> appelé <code>tsconfig.app.json</code>),
qui stocke les options de compilation.
Comme on l&#8217;a vu dans les chapitres précédents,
on va utiliser TypeScript avec des décorateurs (d&#8217;où les deux options dont le nom contient <em>decorator</em>),
et on veut que notre code soit transpilé en ECMAScript&#160;5, lui permettant d&#8217;être exécuté par tout navigateur.
L&#8217;option <code>sourceMap</code> permet de générer les <em>source maps</em> ("dictionnaires de code source"),
c&#8217;est-à-dire des fichiers assurant le lien entre le code ES5 généré et le code TypeScript originel.
Ces <em>source maps</em> sont utilisés par le navigateur pour te permettre de débugger le code ES5 qu&#8217;il exécute
en parcourant le code TypeScript originel que tu as écrit.</p>
</div>
<div class="paragraph">
<p>Les projets TypeScript sont fréquemment utilisés avec TSLint,
un <em>linter</em>, pratique pour vérifier si ton code suit un ensemble de bonnes pratiques.
TSLint a ses propres options, stockées dans <code>tslint.json</code>,
où tu peux ajouter/supprimer certaines règles.</p>
</div>
<div class="paragraph">
<p>Angular CLI a lui-même son fichier de configuration <code>angular.json</code> si tu veux changer quelques-unes des options par défaut.</p>
</div>
<div class="paragraph">
<p>Le dernier, <code>karma.conf.js</code>, est utilisé pour configurer les tests
(on en reparlera dans un chapitre consacré aux tests).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
L&#8217;ebook utilise Angular version <code>6.0.0</code> pour les exemples.
Angular CLI va probablement installer la version la plus récente, qui peut ne pas être exactement la même.
Pour utiliser la même version que nous,
tu peux remplacer la version dans le <code>package.json</code> par <code>6.0.0</code> pour chacun des packages Angular.
Cela peut t&#8217;épargner quelques maux de tête&#160;!
Ou, encore mieux, suis notre exercice en ligne gratuit
<a href="https://angular-exercises.ninja-squad.com/exercises/0/getting-started">Getting Started</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18px" title="Free"></span>!
qui est toujours à jour et à l&#8217;épreuve du feu&#160;!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Maintenant que nous avons parcouru la configuration, regardons le code applicatif.</p>
</div>
</div>
<div class="sect2">
<h3 id="_notre_premier_composant">7.4. Notre premier composant</h3>
<div class="paragraph">
<p>Comme on l&#8217;a vu dans le chapitre précédent, un composant est la combinaison d&#8217;une vue
(le template) et de logique (notre classe TS).
La CLI a d&#8217;ores et déjà créé un composant pour nous <code>src/app/app.component.ts</code>.
Jetons-y un œil&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  title = 'ns';
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre application elle-même est un simple composant.
Pour l&#8217;indiquer à Angular,
on utilise le décorateur <code>@Component</code>.
Et pour pouvoir l&#8217;utiliser, il nous faut l&#8217;importer comme tu peux le voir en haut du fichier.</p>
</div>
<div class="paragraph">
<p>Quand tu écris de nouveaux composants,
n&#8217;oublie pas d&#8217;importer ce décorateur <code>Component</code>.
Tu l&#8217;oublieras peut-être au début,
mais tu t&#8217;y feras vite, parce que le compilateur ne va cesser de t&#8217;insulter&#160;! ;)</p>
</div>
<div class="paragraph">
<p>Tu verras que l&#8217;essentiel de nos besoins se situe dans le module <code>@angular/core</code>,
mais ce n&#8217;est pas toujours le cas.
Par exemple, quand on fera du HTTP, on utilisera des imports de <code>@angular/http</code>,
ou quand on utilisera le routeur, on importera depuis <code>@angular/router</code>, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
})
export class AppComponent {
  title = 'ns';
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le décorateur <code>@Component</code> attend un objet de configuration.
On verra plus tard en détails ce qu&#8217;on peut y configurer,
mais pour le moment une seule propriété est requise&#160;: <code>selector</code>.
Elle indiquera à Angular ce qu&#8217;il faudra chercher dans nos pages HTML.
A chaque fois que Angular trouve un élément dans notre HTML
qui correspond au sélecteur défini dans notre composant,
Angular crée une instance de ce composant,
et remplace le contenu de l&#8217;élément par le template de notre composant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
})
export class AppComponent {
  title = 'ns';
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Donc ici, chaque fois que notre HTML contiendra un élément <code>&lt;ns-root&gt;&lt;/ns-root&gt;</code>,
Angular créera une nouvelle instance de notre classe <code>AppComponent</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Il y a une convention de nommage clairement établie,
et appliquée par Angular CLI.
Les classes de composant se terminent par <code>Component</code>,
et sont définies dans des fichiers dont le nom se terminent en <code>.component.ts</code>.
Angular recommande aussi d&#8217;utiliser un préfixe dans les sélecteurs des composants,
pour éviter un conflit de nom avec des composants externes.
Par exemple, comme notre société se nomme <strong>N</strong>inja <strong>S</strong>quad,
on a choisi comme préfixe <code>ns</code>.
Notre composant poney aura donc comme sélecteur <code>ns-pony</code>.
Tu peux configurer Angular CLI pour qu&#8217;il ajoute un préfixe automatiquement à chaque composant généré.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Un composant doit aussi avoir un template.
On peut avoir un template <em>inline</em> (directement dans le décorateur)
ou dans un autre fichier comme le fait la CLI&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  title = 'ns';
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le HTML correspondant est défini dans <code>app.component.html</code>,
avec tout un tas d&#8217;éléments statiques,
à l&#8217;exception du premier <code>h1</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;!--The content below is only a placeholder and can be replaced.--&gt;
&lt;div style="text-align:center"&gt;
  &lt;h1&gt;
    Welcome to {{ title }}!
  &lt;/h1&gt;
  &lt;img width="300" alt="Angular Logo" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="&gt;
&lt;/div&gt;
&lt;h2&gt;Here are some links to help you start: &lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;h2&gt;&lt;a target="_blank" rel="noopener" href="https://angular.io/tutorial"&gt;Tour of Heroes&lt;/a&gt;&lt;/h2&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h2&gt;&lt;a target="_blank" rel="noopener" href="https://github.com/angular/angular-cli/wiki"&gt;CLI Documentation&lt;/a&gt;&lt;/h2&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h2&gt;&lt;a target="_blank" rel="noopener" href="https://blog.angular.io/"&gt;Angular blog&lt;/a&gt;&lt;/h2&gt;
  &lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_notre_premier_module_angular">7.5. Notre premier module Angular</h3>
<div class="paragraph">
<p>Comme nous l&#8217;avons brièvement évoqué dans le chapitre précédent,
nous allons regrouper nos composants et les autres parties que nous verrons plus tard dans des entités cohérentes&#160;:
des modules Angular.</p>
</div>
<div class="paragraph">
<p>Un module Angular est différent des modules ES6 que nous avons croisés plus tôt&#160;:
nous parlons ici de modules <strong>applicatifs</strong>.</p>
</div>
<div class="paragraph">
<p>Notre application aura toujours au moins un module, le <strong>module racine</strong>.
Plus tard, peut-être, lorsque notre application grossira,
nous ajouterons d&#8217;autres modules, par fonctionnalité.
Par exemple, nous pourrions ajouter un module dédié à la partie Administration
de notre application, contenant tous les composants et la logique métier
de cette partie. Mais nous reviendrons là-dessus plus tard.
Nous verrons aussi que les librairies tierces et Angular lui-même exposent des modules,
que nous pouvons utiliser dans notre application.</p>
</div>
<div class="paragraph">
<p>Bien sûr, la CLI a généré un module également, appelé <code>app.module.ts</code>.</p>
</div>
<div class="paragraph">
<p>Cette classe est décorée avec <code>@NgModule</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { NgModule } from '@angular/core';

@NgModule({
})
export class AppModule { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme le décorateur <code>@Component</code>, il reçoit un objet de configuration.</p>
</div>
<div class="paragraph">
<p>Puisque nous construisons une application pour le navigateur,
le module racine devra importer <code>BrowserModule</code>.
Ce n&#8217;est la seule cible possible pour Angular,
nous pouvons choisir de rendre l&#8217;application sur le serveur par exemple,
et devrions ainsi importer un autre module.
<code>BrowserModule</code> contient beaucoup de choses très utiles pour la suite.
Un module peut choisir d'<em>exporter</em> des composants, directives et <em>pipes</em>.
Quand tu importes un module, tu rends toutes les directives,
composants et <em>pipes</em> exportés par ce module utilisables dans ton module.
Notre module racine ne sera pas importé dans d&#8217;autres modules,
donc nous n&#8217;avons pas d'`exports`,
mais nous aurons plusieurs <code>imports</code> à la fin.</p>
</div>
<div class="paragraph">
<p>La terminologie n&#8217;est pas simple quand on débute.
On parle de modules ES6 et TS dans les premiers chapitres, qui définissent des imports et des exports.
Et maintenant nous parlons de modules Angular, qui ont aussi des imports et des exports&#8230;&#8203;
Que les mêmes termes désignent des concepts différents ne me semble pas une riche idée,
alors laisse-moi expliquer tout ça un peu plus.</p>
</div>
<div class="paragraph">
<p>Tu peux voir un import ES6 ou TS purement comme une fonctionnalité du langage, comme un import en Java&#160;:
il permet d&#8217;utiliser la classe/fonction importée dans notre code source.
Cela déclare aussi une dépendance pour le <em>bundler</em> ou le <em>module loader</em> (Webpack ou SystemJS, par exemple),
qui savent que si <code>a.ts</code> est chargé, alors <code>b.ts</code> doit être chargé également si <code>a</code> importe <code>b</code>.
Tu as besoin des imports et exports avec ES6 et TypeScript,
que tu utilises ou pas Angular ou un autre framework.</p>
</div>
<div class="paragraph">
<p>D&#8217;un autre côté,
importer un module Angular (par exemple <code>BrowserModule</code>) dans ton propre module Angular (<code>AppModule</code>),
a une signification fonctionnelle.
Cela indique à Angular&#160;: tous les composants, directives et <em>pipes</em> qui sont exportés par <code>BrowserModule</code>
doivent être rendus disponibles pour mes composants/templates Angular.
Cela n&#8217;a aucune signification particulière pour le compilateur TypeScript.</p>
</div>
<div class="paragraph">
<p>Revenons à <code>NgModule</code>&#160;:
nous devons déclarer les composants qui appartiennent à notre module racine
dans l&#8217;attribut <code>declarations</code> de son objet de configuration.
Ajoutons le composant que nous avons développé&#160;: <code>AppComponent</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';

import { AppComponent } from './app.component';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule
  ],
})
export class AppModule { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme ce module est notre module racine,
nous devons également indiquer à Angular quel composant est le composant racine,
c&#8217;est à dire le composant que nous devons instancier quand l&#8217;application démarre.
C&#8217;est l&#8217;objectif du champ <code>bootstrap</code> de l&#8217;objet de configuration&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';

import { AppComponent } from './app.component';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre module est prêt, démarrons l&#8217;application&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_démarrer_lapplication">7.6. Démarrer l&#8217;application</h3>
<div class="paragraph">
<p>Enfin, on doit démarrer l&#8217;application, avec la méthode <code>bootstrapModule</code>.
Cette méthode est présente sur un objet retourné par une méthode appelée <code>platformBrowserDynamic</code>.
Il nous faut aussi l&#8217;importer, depuis <code>@angular/platform-browser-dynamic</code>.
C&#8217;est quoi ce module bizarre&#160;?! Pourquoi n&#8217;est-ce pas <code>@angular/core</code>&#160;?
Bonne question&#160;: c&#8217;est parce que tu pourrais avoir envie de faire tourner ton application ailleurs que dans un navigateur,
parce qu&#8217;Angular permet le rendu côté serveur, ou peut tourner dans un Web Worker par exemple.
Et dans ces cas, la logique de démarrage sera un peu différente.
Mais on verra cela plus tard, on va se contenter d&#8217;un navigateur pour le moment.</p>
</div>
<div class="paragraph">
<p>Angular CLI génère par défaut un fichier séparé contenant cette logique de démarrage&#160;: <code>main.ts</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { enableProdMode } from '@angular/core';
import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';

import { AppModule } from './app/app.module';
import { environment } from './environments/environment';

if (environment.production) {
  enableProdMode();
}

platformBrowserDynamic().bootstrapModule(AppModule)
  .catch(err =&gt; console.log(err));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Youpi&#160;! Mais attends voir. On doit bien servir un fichier HTML à nos utilisateurs, non&#160;?</p>
</div>
<div class="paragraph">
<p>La CLI a créé un fichier <code>index.html</code> pour nous,
qui est la seule page de notre application (d&#8217;où le nom <em>SPA</em>, <em>single page application</em>).
Tu te demandes peut-être comment cela peut fonctionner,
car il ne contient aucun élément <code>script</code>.</p>
</div>
<div class="paragraph">
<p>Quand on lance <code>ng serve</code>, la CLI appelle le compilateur TypeScript.
Le compilateur génère des fichiers JavaScript.
La CLI va alors les assembler (<em>bundle</em>) et ajouter les éléments <code>script</code> nécessaires au fichier <code>index.html</code>
(en utilisant pour cela <a href="https://webpack.github.io/">Webpack</a>).</p>
</div>
<div class="paragraph">
<p>Tu devrais maintenant avoir une meilleure compréhension
des différentes parties de cette première application Angular.
Elle n&#8217;est encore réellement dynamique,
et on aurait pu faire la même chose en une seconde dans une page HTML statique,
je te l&#8217;accorde.
Alors jetons-nous sur les chapitres suivants, et apprenons tout
de l&#8217;injection de dépendances et du système de templates.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="templates">8. La syntaxe des templates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On a vu qu&#8217;un composant a besoin de sa vue. Pour définir une vue, tu peux
définir un template <em>inline</em> (dans le code du composant), ou dans un fichier
séparé. Tu es probablement familier avec une syntaxe de template, peut-être
même avec celle d&#8217;AngularJS&#160;1.x. Pour simplifier, un template nous permet de
rendre du HTML avec quelques parties dynamiques dépendant de tes données.</p>
</div>
<div class="paragraph">
<p>Angular a sa propre syntaxe de template que nous devons donc apprendre avant
d&#8217;aller plus loin.</p>
</div>
<div class="paragraph">
<p>Prenons un exemple en simplifiant notre premier composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
  template: '&lt;h1&gt;PonyRacer&lt;/h1&gt;'
})
export class AppComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Supposons qu&#8217;on veuille afficher des données dynamiques dans notre première
page, par exemple le nombre d&#8217;utilisateurs enregistrés dans notre application.
Plus tard nous verrons comment récupérer des données depuis un serveur, mais
pour le moment ce nombre d&#8217;utilisateurs sera directement hardcodé
dans notre classe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-root',
  template: '&lt;h1&gt;PonyRacer&lt;/h1&gt;'
})
export class AppComponent {

  numberOfUsers = 146;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, comment doit-on modifier notre template pour afficher cette
variable&#160;? Grâce à l&#8217;interpolation&#160;!</p>
</div>
<div class="sect2">
<h3 id="_interpolation">8.1. Interpolation</h3>
<div class="paragraph">
<p>L&#8217;interpolation est un bien grand mot pour un concept simple.</p>
</div>
<div class="paragraph">
<p>Un exemple rapide&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-root',
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;h2&gt;{{ numberOfUsers }} users&lt;/h2&gt;
  `
})
export class AppComponent {

  numberOfUsers = 146;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nous avons un composant <code>PonyRacer</code>, qui sera activé dès qu&#8217;Angular tombera sur
une balise <code>&lt;ns-root&gt;</code>. La classe <code>AppComponent</code> a une propriété,
<code>numberOfUsers</code>. Et le template a été enrichi avec une balise <code>&lt;h2&gt;</code>, utilisant
la fameuse notation avec double-accolades (les "moustaches") pour indiquer que
cette expression doit être évaluée. Ce type de templating est de
l&#8217;interpolation.</p>
</div>
<div class="paragraph">
<p>On devrait maintenant voir dans le navigateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-root&gt;
  &lt;h1&gt;PonyRacer&lt;/h1&gt;
  &lt;h2&gt;146 users&lt;/h2&gt;
&lt;/ns-root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>car <code>{{ numberOfUsers }}</code> a été remplacé par sa valeur.</p>
</div>
<div class="paragraph">
<p>Quand Angular détecte un élément <code>&lt;ns-root&gt;</code> dans une page, il crée une
instance de la classe <code>AppComponent</code>, et cette instance sera le contexte
d&#8217;évaluation des expressions dans le template. Ici la classe <code>AppComponent</code>
affecte <code>146</code> à la propriété <code>numberOfUsers</code>, donc nous voyons '146' affiché à
l&#8217;écran.</p>
</div>
<div class="paragraph">
<p>La magie surviendra quand la valeur de <code>numberOfUsers</code> sera modifiée dans notre
objet, et que le template sera alors automatiquement mis à jour&#160;! Cela s&#8217;appelle
<em>change detection</em> ("la détection de changement"), et c&#8217;est une des grandes
fonctionnalités d&#8217;Angular.</p>
</div>
<div class="paragraph">
<p>Il faut cependant se rappeler une chose importante&#160;: si on essaye
d&#8217;afficher une variable qui n&#8217;existe pas, au lieu d&#8217;afficher <code>undefined</code>,
Angular affichera une chaîne vide.
Et de même pour une variable <code>null</code>.</p>
</div>
<div class="paragraph">
<p>Maintenant, au lieu d&#8217;une valeur simple, disons que notre composant a un objet
<code>user</code> plus complexe, décrivant l&#8217;utilisateur courant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-root',
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;h2&gt;Welcome {{ user.name }}&lt;/h2&gt;
  `
})
export class AppComponent {

  user: any = { name: 'Cédric' };

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on peut interpoler des expressions plus complexes, y
compris accéder à des propriétés dans un objet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-root&gt;
  &lt;h1&gt;PonyRacer&lt;/h1&gt;
  &lt;h2&gt;Welcome Cédric&lt;/h2&gt;
&lt;/ns-root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Que se passe-t-il si on a une faute de frappe dans notre template, avec une
propriété qui n&#8217;existe pas dans la classe&#160;?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-root',
  // typo: users is not user!
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;h2&gt;Welcome {{ users.name }}&lt;/h2&gt;
  `
})
export class AppComponent {

  user: any = { name: 'Cédric' };

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En chargeant l&#8217;application, tu auras une erreur, indiquant que cette propriété
n&#8217;existe pas&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">Cannot read property 'name' of undefined in [{{ users.name }} in AppComponent]</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est plutôt cool, parce que tu peux être sûr que tes templates sont
corrects. Un des problèmes les plus fréquents en AngularJS&#160;1.x était que ce
genre d&#8217;erreurs n&#8217;était pas détecté, et tu pouvais ainsi perdre pas mal de
temps à comprendre ce qu&#8217;il se passait (traditionnellement, une faute de frappe
genre <code>{{ users.name }}</code> au lieu de <code>{{ user.name }}</code>). Pour avoir donné souvent
des formations AngularJS&#160;1.x, je peux te garantir qu&#8217;au moins 30% des
débutants rencontraient ce problème le premier jour. Ça m&#8217;agaçait un peu, alors
j&#8217;ai même soumis une
<a href="https://github.com/angular/angular.js/pull/6414">pull-request</a> pour afficher un
<em>warning</em> quand le parseur rencontrait une variable inconnue, mais elle a été
refusée pour de bonnes raisons, avec un commentaire de l&#8217;équipe précisant qu&#8217;ils
avaient une idée de comment corriger cela en Angular. La voilà finalement
concrétisée&#160;!</p>
</div>
<div class="paragraph">
<p>Dernière petite fonctionnalité&#160;: que se passe-t-il si mon objet <code>user</code> est en fait récupéré depuis le serveur,
et donc indéfini dans mon composant au début&#160;?
Que pouvons-nous faire pour éviter les erreurs quand le template est compilé&#160;?</p>
</div>
<div class="paragraph">
<p>Facile&#160;: plutôt que d&#8217;écrire <code>user.name</code>, nous écrirons <code>user?.name</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-root',
  // user is undefined
  // but the ?. will avoid the error
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;h2&gt;Welcome {{ user?.name }}&lt;/h2&gt;
  `
})
export class AppComponent {

  user: any;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et nous n&#8217;avons plus d&#8217;erreur&#160;!
Le <code>?.</code> est parfois appelé "<strong>Safe Navigation Operator</strong>" (opérateur de navigation sûre).</p>
</div>
<div class="paragraph">
<p>Ainsi on peut écrire nos templates plus sereinement, et être assurés qu&#8217;ils vont
se comporter correctement.</p>
</div>
<div class="paragraph">
<p>Retournons à notre exemple. On affiche désormais un message de bienvenue. Allons
un peu plus loin, et essayons d&#8217;afficher une liste des courses de poneys à
venir.</p>
</div>
<div class="paragraph">
<p>Cela nous amène à écrire notre deuxième composant. Pour le moment, faisons
simple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// in another file, races.component.ts
import { Component } from '@angular/core';

@Component({
  selector: 'ns-races',
  template: `&lt;h2&gt;Races&lt;/h2&gt;`
})
class RacesComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rien d&#8217;extraordinaire&#160;: une simple classe, décorée avec <code>@Component</code> pour
indiquer un <code>selector</code> d&#8217;ancrage et un template
<em>inline</em>.</p>
</div>
<div class="paragraph">
<p>Si on veut maintenant inclure ce composant dans le template de <code>AppComponent</code>,
comment faire&#160;?</p>
</div>
</div>
<div class="sect2">
<h3 id="_utiliser_dautres_composants_dans_nos_templates">8.2. Utiliser d&#8217;autres composants dans nos templates</h3>
<div class="paragraph">
<p>On a notre composant application, <code>AppComponent</code>, où on veut afficher le
composant listant les courses de poneys, <code>RacesComponent</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// in app.component.ts
import { Component } from '@angular/core';

@Component({
  selector: 'ns-root',
  // added the RacesComponent component
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;ns-races&gt;&lt;/ns-races&gt;
  `
})
export class AppComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a donc ajouté le composant <code>RacesComponent</code> dans le template, en incluant une
balise dont le nom correspond au <code>selector</code> défini dans le composant.</p>
</div>
<div class="paragraph">
<p>Maaaaais, ça ne fonctionnera pas&#160;: le navigateur n&#8217;affichera pas ce
composant listant les courses.</p>
</div>
<div class="paragraph">
<p>Pourquoi cela? La raison est simple: Angular ne connaît pas encore ce composant <code>RacesComponent</code>.</p>
</div>
<div class="paragraph">
<p>Mais la solution est simple. Tu te souviens qu&#8217;on a dû ajouter <code>AppComponent</code> dans les <code>declarations</code> du décorateur <code>@NgModule</code>&#160;?
A présent, comme on a un deuxième composant, il doit être déclaré également.</p>
</div>
<div class="paragraph">
<p><code>RacesComponent</code> n&#8217;est pas le composant racine de notre application, donc il doit être dans les déclarations, mais pas dans le tableau <code>bootstrap</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';

import { AppComponent } from './app.component';
// do not forget to import the component
import { RacesComponent } from './races.component';

@NgModule({
  imports: [BrowserModule],
  declarations: [AppComponent, RacesComponent],
  bootstrap: [AppComponent]
})
export class AppModule {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note aussi que comme tu passes directement la classe, il te
faudra l&#8217;importer préalablement.</p>
</div>
<div class="paragraph">
<p>Pour importer <code>RacesComponent</code> dans la classe <code>AppComponent</code>, tu dois exporter la
classe <code>RacesComponent</code> dans son fichier source <code>races.component.ts</code> (relis le chapitre
<a href="#modules">modules ES6</a>
si ce n&#8217;est pas clair). Ainsi <code>RacesComponent</code> va ressembler
à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// in another file, races.component.ts
import { Component } from '@angular/core';

@Component({
  selector: 'ns-races',
  template: `&lt;h2&gt;Races&lt;/h2&gt;`
})
export class RacesComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, notre composant listant les courses sera fièrement affiché dans le navigateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-root&gt;
  &lt;h1&gt;PonyRacer&lt;/h1&gt;
  &lt;ns-races&gt;
    &lt;h2&gt;Races&lt;/h2&gt;
  &lt;/ns-races&gt;
&lt;/ns-root&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_binding_de_propriété">8.3. <em>Binding</em> de propriété</h3>
<div class="paragraph">
<p>L&#8217;interpolation n&#8217;est qu&#8217;une des façons d&#8217;avoir des morceaux dynamiques dans nos
templates.</p>
</div>
<div class="paragraph">
<p>En fait, l&#8217;interpolation n&#8217;est qu&#8217;une simplification du concept au cœur du
moteur de template d&#8217;Angular&#160;: le <em>binding</em> de propriété.</p>
</div>
<div class="paragraph">
<p>En Angular, on peut écrire dans toutes les propriétés du DOM via des attributs
spéciaux sur les éléments HTML, entourés de crochets <code>[]</code>. Ça fait bizarre au
premier abord, mais en fait c&#8217;est du HTML valide (et ça m&#8217;a aussi surpris). Un
nom d&#8217;attribut HTML peut commencer par n&#8217;importe quoi, à l&#8217;exception de quelques
caractères comme un guillemet <code>"</code>, une apostrophe <code>'</code>, un slash <code>/</code>, un égal <code>=</code>, un espace&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Je mentionne les propriétés du DOM, mais peut-être n&#8217;est-ce pas clair pour toi.
On écrit en général dans des attributs HTML, n&#8217;est-ce pas&#160;? Tout à fait, en
général c&#8217;est ce qu&#8217;on fait. Prenons ce simple morceau d&#8217;HTML&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;input type="text" value="hello"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La balise <code>input</code> ci-dessus a deux <em>attributs</em>&#160;: un attribut <code>type</code> et un
attribut <code>value</code>. Quand le navigateur rencontre cette balise, il crée un nœud
correspondant dans le DOM (un HTMLInputElement si on veut être précis), qui a
les <em>propriétés</em> correspondantes <code>type</code> et <code>value</code>. Chaque attribut HTML
standard a une propriété correspondante dans un nœud du DOM. Mais un nœud du DOM
a aussi d&#8217;autres propriétés, qui ne correspondent à aucun attribut HTML. Par
exemple&#160;: <code>childElementCount</code>, <code>innerHTML</code> ou <code>textContent</code>.</p>
</div>
<div class="paragraph">
<p>L&#8217;interpolation que nous utilisions plus haut pour afficher le nom de
l&#8217;utilisateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ user.name }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>est juste du sucre syntaxique pour l&#8217;écriture suivante&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p [textContent]="user.name"&gt;&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La syntaxe à base de crochets permet de modifier la propriété <code>textContent</code> du
DOM, et nous lui donnons la valeur <code>user.name</code> qui sera évaluée dans le
contexte du composant courant, comme pour l&#8217;interpolation.</p>
</div>
<div class="paragraph">
<p>Note que l&#8217;analyseur est sensible à la casse, ce qui veut dire que la propriété doit être écrite avec la bonne casse.
<code>textcontent</code> ou <code>TEXTCONTENT</code> ne fonctionneront pas, il faut écrire <code>textContent</code>.</p>
</div>
<div class="paragraph">
<p>Les propriétés du DOM ont un avantage sur les attributs HTML&#160;: leurs valeurs
sont forcément à jour. Dans mon exemple, l'<em>attribut</em> <code>value</code> contiendra
toujours "hello", alors que la <em>propriété</em> <code>value</code> du DOM sera modifiée
dynamiquement par le navigateur, et contiendra ainsi la valeur entrée par
l&#8217;utilisateur dans le champ de saisie.</p>
</div>
<div class="paragraph">
<p>Enfin, les propriétés peuvent avoir des valeurs booléennes, alors que certains
attributs n&#8217;agissent que par leur simple présence ou absence sur la balise HTML.
Par exemple, il existe l&#8217;attribut <code>selected</code> sur la balise <code>&lt;option&gt;</code>&#160;:
quelle que soit la valeur que tu lui donnes, il sélectionnera l&#8217;option, dès qu&#8217;il
y est présent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;option selected&gt;Rainbow Dash&lt;/option&gt;
&lt;option selected="false"&gt;Rainbow Dash&lt;/option&gt; &lt;!-- still selected --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec l&#8217;accès aux propriétés que nous offre Angular, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;option [selected]="isPonySelected" value="Rainbow Dash"&gt;Rainbow Dash&lt;/option&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le poney sera sélectionné si <code>isPonySelected</code> vaut <code>true</code>, et ne sera pas
sélectionné si elle vaut <code>false</code>. Et à chaque fois que la valeur de
<code>isPoneySelected</code> changera, la propriété <code>selected</code> sera mise à jour.</p>
</div>
<div class="paragraph">
<p>Tu peux faire plein de trucs cools avec ça, notamment des trucs qui étaient
pénibles en AngularJS&#160;1.x. Par exemple, avoir une URL source dynamique pour une
image&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;img src="{{ pony.avatar.url }}"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette syntaxe a un problème majeur&#160;: le navigateur va essayer de récupérer
l&#8217;image dès qu&#8217;il lira l&#8217;attribut <code>src</code>. Tu peux constater l&#8217;échec&#160;: il
réalisera une requête HTTP sur l&#8217;URL <code>{{ pony.avatar.url }}</code>, qui n&#8217;est pas une
URL valide&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>En AngularJS&#160;1.x, il y avait une directive dédiée à ce problème&#160;: <code>ng-src</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;img ng-src="{{ pony.avatar.url }}"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Utiliser <code>ng-src</code> au lieu de <code>src</code> solutionnait le problème, parce que le
navigateur ignorerait cet attribut non standard. Une fois qu&#8217;AngularJS avait
compilé l&#8217;application, il ajoutait l&#8217;attribut <code>src</code> avec une URL correcte après
interpolation, déclenchant ainsi le téléchargement de la bonne image.
Cool&#160;! Mais ça avait deux inconvénients&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>D&#8217;abord, en tant que développeur, il te fallait deviner quelle valeur
donner à <code>ng-src</code>. Était-ce 'https://gravatar.com'&#160;?
'"https://gravatar.com"'&#160;? 'pony.avatar.url'&#160;?
'{{ pony.avatar.url }}'&#160;? Aucun moyen de savoir, sauf à lire la
documentation.</p>
</li>
<li>
<p>Ensuite, l&#8217;équipe Angular devait créer une directive pour chaque attribut
standard. Ils l&#8217;ont fait, et nous devions tous les connaître&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mais nous sommes désormais dans un monde où ton HTML peut contenir des
<em>Web Components</em> externes, genre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony name="Rainbow Dash"&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si c&#8217;est un <em>Web Component</em> que tu veux utiliser, tu n&#8217;as aucun moyen
simple de lui passer une valeur dynamique avec la plupart des frameworks JS.
Sauf à ce que le développeur du <em>Web Component</em> ait pris un soin particulier
pour le rendre possible. Lis le chapitre sur les
<a href="#web-components"><em>Web Components</em></a>
pour plus d&#8217;informations.</p>
</div>
<div class="paragraph">
<p>Un <em>Web Component</em> doit agir comme un élément du navigateur, sans aucune
différence avec un élément natif. Ils ont une API DOM basée sur des propriétés,
événements, et méthodes. Avec Angular, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony [name]="pony.name"&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cela fonctionnera&#160;!</p>
</div>
<div class="paragraph">
<p>Angular synchronisera les valeurs des propriétés et des attributs.</p>
</div>
<div class="paragraph">
<p>Plus aucune directive spécifique à apprendre&#160;! Si tu veux cacher un
élément, tu peux utiliser la propriété standard <code>hidden</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div [hidden]="isHidden"&gt;Hidden or not&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et la <code>&lt;div&gt;</code> ne sera cachée que si <code>isHidden</code> vaut <code>true</code>, car Angular
travaillera directement avec la propriété <code>hidden</code> du DOM. Plus besoin de
<code>ng-hide</code>, ni des dizaines d&#8217;autres directives qui étaient nécessaires en
AngularJS&#160;1.x.</p>
</div>
<div class="paragraph">
<p>Tu peux aussi accéder à des propriétés comme l&#8217;attribut <code>color</code> de la
propriété <code>style</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p [style.color]="foreground"&gt;Friendship is Magic&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la valeur de l&#8217;attribut <code>foreground</code> est modifiée à <code>green</code>, le texte
deviendra vert aussi&#160;!</p>
</div>
<div class="paragraph">
<p>Ainsi Angular utilise les propriétés. Quelles valeurs pouvons-nous leur
donner&#160;? Nous avions déjà vu que l&#8217;interpolation
<code>property="{{ expression }}"</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony name="{{ pony.name }}"&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>est la même chose que <code>[property]="expression"</code> (que l&#8217;on préfère généralement)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony [name]="pony.name"&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux plutôt afficher 'Pony ' suivi du nom du poney, tu as deux
options&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony name="Pony {{ pony.name }}"&gt;&lt;/ns-pony&gt;
&lt;ns-pony [name]="'Pony ' + pony.name"&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si ta valeur n&#8217;est pas dynamique, tu peux simplement écrire
<code>property="value"</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony name="Rainbow Dash"&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Toutes ces notations sont équivalentes, et la syntaxe ne dépend pas de la façon
dont le développeur a choisi d&#8217;écrire son composant, comme c&#8217;était le cas en
AngularJS&#160;1.x où il fallait savoir si le composant attendait une valeur ou une
référence par exemple.</p>
</div>
<div class="paragraph">
<p>Bien sûr, une expression peut aussi contenir un appel de fonction&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony name="{{ pony.fullName() }}"&gt;&lt;/ns-pony&gt;
&lt;ns-pony [name]="pony.fullName()"&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_événements">8.4. Événements</h3>
<div class="paragraph">
<p>Si tu développes une application web, tu sais qu&#8217;afficher des données n&#8217;est
qu&#8217;une partie du travail&#160;: il te faut aussi réagir aux interactions de
l&#8217;utilisateur.</p>
</div>
<div class="paragraph">
<p>Pour cela, le navigateur déclenche des événements, que tu peux
écouter&#160;: <code>click</code>, <code>keyup</code>, <code>mousemove</code>, etc. AngularJS&#160;1.x avait une
directive par événement&#160;: <code>ng-click</code>, <code>ng-keyup</code>, <code>ng-mousemove</code>, etc. En
Angular, c&#8217;est plus simple, il n&#8217;y a plus de directives spécifiques à se
remémorer.</p>
</div>
<div class="paragraph">
<p>Si on retourne à notre composant <code>RacesComponent</code>, nous aimerions maintenant un bouton
qui affichera les courses de poneys quand il est cliqué.</p>
</div>
<div class="paragraph">
<p>Réagir à un événement peut être fait comme suit&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;button (click)="onButtonClick()"&gt;Click me!&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un clic sur le bouton de l&#8217;exemple ci-dessus déclenchera un appel à la méthode
<code>onButtonClick()</code> du composant.</p>
</div>
<div class="paragraph">
<p>Ajoutons ceci à notre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-races',
  template: `
    &lt;h2&gt;Races&lt;/h2&gt;
    &lt;button (click)="refreshRaces()"&gt;Refresh the races list&lt;/button&gt;
    &lt;p&gt;{{ races.length }} races&lt;/p&gt;
  `
})
export class RacesComponent {
  races: any = [];

  refreshRaces() {
    this.races = [{ name: 'London' }, { name: 'Lyon' }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu testes ça dans notre navigateur, au départ tu devrais voir&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-root&gt;
  &lt;h1&gt;PonyRacer&lt;/h1&gt;
  &lt;ns-races&gt;
    &lt;h2&gt;Races&lt;/h2&gt;
    &lt;button (click)="refreshRaces()"&gt;Refresh the races list&lt;/button&gt;
    &lt;p&gt;0 races&lt;/p&gt;
  &lt;/ns-races&gt;
&lt;/ns-root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et après le clic, '0 races' doit devenir '2 races'. Hourra \o/</p>
</div>
<div class="paragraph">
<p>L&#8217;instruction peut être un appel de fonction, mais ça peut être aussi n&#8217;importe
quelle instruction exécutable, ou même une séquence d&#8217;instructions, comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;button (click)="firstName = 'Cédric'; lastName = 'Exbrayat'"&gt;
  Click to change name to Cédric Exbrayat
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais bon je ne te conseille pas de faire ça. Utiliser des méthodes est une
bien meilleure façon d&#8217;encapsuler le comportement. Elles rendront ton code plus
facile à tester et à maintenir, et rendront la vue plus simple.</p>
</div>
<div class="paragraph">
<p>Le truc cool c&#8217;est que ça fonctionne avec les événements standards du DOM, mais
aussi avec tous les événements spécifiques déclenchés par tes composants
Angular, ou par des <em>Web Components</em>. On verra plus tard comment déclencher des
événements spécifiques.</p>
</div>
<div class="paragraph">
<p>Pour le moment, disons que le composant <code>RacesComponent</code> déclenche un événement
spécifique pour indiquer la disponibilité d&#8217;une nouvelle course de poneys.</p>
</div>
<div class="paragraph">
<p>Notre template dans le composant <code>AppComponent</code> ressemblera alors à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-root',
  template: `
    &lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;ns-races (newRaceAvailable)="onNewRace()"&gt;&lt;/ns-races&gt;
  `
})
export class AppComponent {
  onNewRace() {
    // add a flashy message for the user.
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sans trop d&#8217;effort, on peut imaginer que le composant <code>&lt;ns-races&gt;</code> peut
déclencher un événement spécifique <code>newRaceAvailable</code>, et que quand cet
événement est déclenché, la méthode <code>onNewRace()</code> de notre <code>AppComponent</code> sera
appelée.</p>
</div>
<div class="paragraph">
<p>Angular écoute les événements de l&#8217;élément et ceux de ses enfants,
il va donc aussi réagir sur les événements "bouillonnants" ("bubbling up",
i.e. les événements qui se propagent vers le haut depuis le fond des composants enfants).
Considérons le template suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div (click)="onButtonClick()"&gt;
  &lt;button&gt;Click me!&lt;/button&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Même si l&#8217;utilisateur clique sur le bouton dans la div,
la méthode <code>onButtonClick()</code> sera appelée, car l&#8217;événement se propage vers le haut.</p>
</div>
<div class="paragraph">
<p>Et tu peux accéder à l&#8217;événement en question depuis la méthode
appelée&#160;! Pour cela, tu dois simplement passer <code>$event</code> à ta
méthode&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div (click)="onButtonClick($event)"&gt;
  &lt;button&gt;Click me!&lt;/button&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ensuite tu peux gérer cet événement dans la classe du composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">onButtonClick(event) {
  console.log(event);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Par défaut, l&#8217;événement va continuer à "bouillonner", déclenchant
potentiellement d&#8217;autres <em>handlers</em> plus haut dans la hiérarchie de composants.</p>
</div>
<div class="paragraph">
<p>Tu peux agir sur l&#8217;événement pour empêcher ce comportement par défaut, et/ou
annuler la propagation si tu le souhaites&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">onButtonClick(event) {
  event.preventDefault();
  event.stopPropagation();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une autre fonctionnalité sympa réside dans la gestion des événements du clavier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">&lt;textarea (keydown.space)="onSpacePress()"&gt;Press space!&lt;/textarea&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Chaque fois que tu appuies sur la touche <kbd>space</kbd>, la méthode <code>onSpacePress()</code> sera appelée.
Et on peut faire des combos, comme <code>(keydown.alt.space)</code>, etc.</p>
</div>
<div class="paragraph">
<p>Pour conclure cette partie, je voudrais t&#8217;indiquer une différence
fondamentale entre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;component [property]="doSomething()"&gt;&lt;/component&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>et</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;component (event)="doSomething()"&gt;&lt;/component&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans le premier cas de <em>binding</em> de propriété, la valeur <code>doSomething()</code> est une
expression, et sera évaluée à chaque cycle de détection de changement pour
déterminer si la propriété doit être modifiée.</p>
</div>
<div class="paragraph">
<p>Dans le second cas de <em>binding</em> d&#8217;événement, la valeur <code>doSomething()</code> est une
instruction (<em>statement</em>), et ne sera évaluée <strong>que lorsque l&#8217;événement est
déclenché</strong>.</p>
</div>
<div class="paragraph">
<p>Par définition, ces deux <em>bindings</em> ont des objectifs complètement différents,
et comme tu t&#8217;en doutes, des restrictions d&#8217;usage différentes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_expressions_vs_instructions">8.5. Expressions vs instructions</h3>
<div class="paragraph">
<p>Les expressions et les instructions (<em>statements</em>) présentent des différences.</p>
</div>
<div class="paragraph">
<p>Une expression sera évaluée plusieurs fois, par le mécanisme de détection de
changement. Elle doit ainsi être la plus performante possible. Pour faire
simple, une expression Angular est une version simplifiée d&#8217;une expression
JavaScript.</p>
</div>
<div class="paragraph">
<p>Si tu utilises <code>user.name</code> comme expression, <code>user</code> doit être défini, sinon
Angular va lever une erreur.</p>
</div>
<div class="paragraph">
<p>Une expression doit être unique&#160;: tu ne peux pas en enchaîner plusieurs
séparées par des points-virgules.</p>
</div>
<div class="paragraph">
<p>Une expression ne doit pas avoir d&#8217;effets de bord. Par exemple, une affectation est interdite.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;!-- forbidden, as the expression is an assignment --&gt;
&lt;!-- this will throw an error --&gt;
&lt;component [property]="user = 'Cédric'"&gt;&lt;/component&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Elle ne doit pas contenir de mot-clés comme <code>if</code>, <code>var</code>, etc.</p>
</div>
<div class="paragraph">
<p>De son côté, une instruction est déclenchée par l&#8217;événement correspondant. Si
tu essayes d&#8217;utiliser une instruction comme <code>race.show()</code> où <code>race</code> serait
<code>undefined</code>, tu auras une erreur. Tu peux enchaîner plusieurs
instructions, séparées par un point-virgule. Une instruction peut avoir des
effets de bord, et doit généralement en avoir&#160;: c&#8217;est l&#8217;effet voulu quand
on réagit à un événement, on veut que des choses se produisent. Une instruction
peut contenir des affectations de variables, et peut contenir des mot-clés.</p>
</div>
</div>
<div class="sect2">
<h3 id="local-variables">8.6. Variables locales</h3>
<div class="paragraph">
<p>Quand j&#8217;explique qu&#8217;Angular va regarder dans l&#8217;instance du composant pour
trouver une variable, ce n&#8217;est pas tout à fait exact. En fait, il va regarder
dans l&#8217;instance du composant et dans les variables locales. Les variables
locales sont des variables que tu peux déclarer dynamiquement dans ton
template avec la notation <code>#</code>.</p>
</div>
<div class="paragraph">
<p>Supposons que tu veuilles afficher la valeur d&#8217;un input&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;input type="text" #name&gt;
{{ name.value }}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec la notation <code>#</code>, on crée une variable locale <code>name</code> qui référence l&#8217;objet
<code>HTMLInputElement</code> du DOM. Cette variable locale peut être utilisée n&#8217;importe où
dans le template. Comme <code>HTMLInputElement</code> a une propriété <code>value</code>, on peut l&#8217;afficher
dans une expression interpolée. Je reviendrai sur cet exemple plus tard.</p>
</div>
<div class="paragraph">
<p>Un autre cas d&#8217;usage des variables locales est l&#8217;exécution d&#8217;une
action sur un autre élément.</p>
</div>
<div class="paragraph">
<p>Par exemple, tu peux vouloir donner le focus à un élément quand on clique
sur un bouton. C&#8217;était un peu pénible à réaliser en AngularJS&#160;1.x, il te
fallait créer une directive et tout le tralala.</p>
</div>
<div class="paragraph">
<p>La méthode <code>focus()</code> est standard dans l&#8217;API DOM, et on peut maintenant en
bénéficier. Avec une variable locale en Angular, c&#8217;est super simple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;input type="text" #name&gt;
&lt;button (click)="name.focus()"&gt;Focus the input&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ça peut aussi être utilisé avec un composant spécifique, créé dans notre
application, ou importé d&#8217;un autre projet, ou même un véritable <em>Web
Component</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;google-youtube #player&gt;&lt;/google-youtube&gt;

&lt;button (click)="player.play()"&gt;Play!&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici le bouton peut lancer la lecture de la vidéo sur le composant
<code>&lt;google-youtube&gt;</code>. C&#8217;est bien un
<a href="http://googlewebcomponents.github.io/google-youtube/components/google-youtube/">véritable Web Component</a>
écrit en <a href="https://www.polymer-project.org/1.0/">Polymer</a>&#160;! Ce composant a
une méthode <code>play()</code> qu&#8217;Angular peut appeler quand on clique sur le
bouton&#160;: la classe&#160;!</p>
</div>
<div class="paragraph">
<p>Les variables locales ont quelques cas d&#8217;utilisations spécifiques, et on va
progressivement les découvrir. L&#8217;un d&#8217;entre eux est expliqué dans la section
juste ci-dessous.</p>
</div>
</div>
<div class="sect2">
<h3 id="_directives_de_structure">8.7. Directives de structure</h3>
<div class="paragraph">
<p>Pour le moment, notre <code>RacesComponent</code> n&#8217;affiche toujours aucune course de poneys :)
La façon "canonique" en Angular serait de créer un autre composant <code>RaceComponent</code>
pour afficher chaque course. On va faire quelque chose de plus simple, et
utiliser une pauvre liste <code>&lt;ul&gt;&lt;li&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Le <em>binding</em> de propriété et d&#8217;événement est formidable,
mais il ne nous permet pas de modifier la structure du DOM,
comme pour itérer sur une collection et ajouter un nœud par élément.
Pour cela, nous avons besoin de <strong>directives structurelles</strong>.
Dans Angular, une directive est assez proche d&#8217;un composant, mais n&#8217;a pas de template.
On les utilise pour ajouter un comportement à un élément.</p>
</div>
<div class="paragraph">
<p>Les directives structurelles fournies par Angular s&#8217;appuient sur l&#8217;élément <code>&lt;ng-template&gt;</code>,
inspirée de la balise standard <code>template</code>
de la <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template">specification</a> HTML.
Cet élément s&#8217;appelait même <code>template</code> avant la version 4.0,
mais est maintenant déprécié au profit de <code>ng-template</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ng-template&gt;
  &lt;div&gt;Races list&lt;/div&gt;
&lt;/ng-template&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici nous avons défini un template, affichant une simple <code>&lt;div&gt;</code>.
Seul, il n&#8217;est pas très utile, car le navigateur ne va pas l&#8217;afficher.
Mais si nous ajoutons un élément <code>template</code> dans l&#8217;une de nos vues,
alors Angular pourra utiliser son contenu.
Les directives structurelles ont justement la capacité d&#8217;utiliser ce contenu,
pour l&#8217;afficher ou non, le répéter, etc.</p>
</div>
<div class="paragraph">
<p>Examinons ces fameuses directives&#160;!</p>
</div>
<div class="sect3">
<h4 id="_ngif">8.7.1. NgIf</h4>
<div class="paragraph">
<p>Si nous voulons instancier le template seulement lorsqu&#8217;une condition est réalisée,
alors nous utiliserons la directive <code>ngIf</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ng-template [ngIf]="races.length &gt; 0"&gt;
  &lt;div&gt;&lt;h2&gt;Races&lt;/h2&gt;&lt;/div&gt;
&lt;/ng-template&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le framework propose quelques directives, comme <code>ngIf</code>.
Elles viennent du module que nous avons importé un peu plus tôt&#160;: <code>BrowserModule</code>.
Si besoin, tu peux aussi définir tes propres directives&#160;; on y reviendra.</p>
</div>
<div class="paragraph">
<p>Ici, le template ne sera instancié que si <code>races</code> a au moins un élément, donc
s&#8217;il existe des courses de poneys. Comme cette syntaxe est un peu longue, il y a
une version raccourcie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div *ngIf="races.length &gt; 0"&gt;&lt;h2&gt;Races&lt;/h2&gt;&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu utiliseras toujours cette version courte.</p>
</div>
<div class="paragraph">
<p>La notation utilise <code>*</code> pour montrer que c&#8217;est une instantiation de template. La
directive <code>ngIf</code> va maintenant prendre en charge l&#8217;affichage ou non de la <code>div</code>
à chaque fois que la valeur de <code>races</code> va changer&#160;: s&#8217;il n&#8217;y a plus de
course, la <code>div</code> va disparaître.</p>
</div>
<div class="paragraph">
<p>Les directives fournies par le framework sont déjà pré-chargées pour nous,
nous n&#8217;avons donc pas besoin d&#8217;importer et de déclarer <code>NgIf</code>
dans l&#8217;attribut <code>directives</code> du décorateur <code>@Component</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-races',
  template: `&lt;div *ngIf="races.length &gt; 0"&gt;&lt;h2&gt;Races&lt;/h2&gt;&lt;/div&gt;`
})
export class RacesComponent {
  races: Array&lt;any&gt; = [];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe aussi une possibilité d&#8217;utiliser <code>else</code> depuis la version 4.0&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-races',
  template: `
    &lt;div *ngIf="races.length &gt; 0; else empty"&gt;&lt;h2&gt;Races&lt;/h2&gt;&lt;/div&gt;
    &lt;ng-template #empty&gt;&lt;h2&gt;No races.&lt;/h2&gt;&lt;/ng-template&gt;
  `
})
export class RacesComponent {
  races: Array&lt;any&gt; = [];
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ngfor">8.7.2. NgFor</h4>
<div class="paragraph">
<p>Travailler avec de vraies données te conduira indubitablement à afficher une
liste d&#8217;éléments. <code>ngFor</code> est alors très utile&#160;: elle permet d&#8217;instancier un
template par élément d&#8217;une collection. Notre composant <code>RacesComponent</code> possède un
attribut <code>races</code>, qui est, comme tu peux le deviner, un tableau des courses
de poneys disponibles.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-races',
  template: `&lt;div *ngIf="races.length &gt; 0"&gt;
  &lt;h2&gt;Races&lt;/h2&gt;
  &lt;ul&gt;
    &lt;li *ngFor="let race of races"&gt;{{ race.name }}&lt;/li&gt;
  &lt;/ul&gt;
  &lt;/div&gt;`
})
export class RacesComponent {
  races: Array&lt;any&gt; = [{ name: 'London' }, { name: 'Lyon' }];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ainsi nous avons une magnifique liste, avec une balise <code>li</code> par élément de
notre collection&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ul&gt;
  &lt;li&gt;London&lt;/li&gt;
  &lt;li&gt;Lyon&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que <code>NgFor</code> utilise une syntaxe particulière, dite "microsyntaxe"
(<em>microsyntax</em>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ul&gt;
  &lt;li *ngFor="let race of races"&gt;{{ race.name }}&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est l&#8217;équivalent du plus verbeux (et que l&#8217;on n&#8217;utilisera jamais)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ul&gt;
  &lt;ng-template ngFor let-race [ngForOf]="races"&gt;
    &lt;li&gt;{{ race.name }}&lt;/li&gt;
  &lt;/ng-template&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux reconnaître ici&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;élément <code>template</code> pour déclarer un template <em>inline</em>,</p>
</li>
<li>
<p>La directive <code>NgFor</code> qui lui est appliquée,</p>
</li>
<li>
<p>La propriété <code>NgForOf</code> où nous fournissons la collection à parcourir,</p>
</li>
<li>
<p>La variable <code>race</code> à utiliser dans les expressions interpolées,
reflétant l&#8217;élément courant.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Au lieu de se rappeler de tout ça, c&#8217;est plus simple d&#8217;utiliser la notation
raccourcie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ul&gt;
  &lt;li *ngFor="let race of races"&gt;{{ race.name }}&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est aussi possible de déclarer une autre variable locale, associée à l&#8217;indice
de l&#8217;élément courant dans la collection&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ul&gt;
  &lt;li *ngFor="let race of races; index as i"&gt;{{ i }} - {{ race.name }}&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La variable locale <code>i</code> recevra l&#8217;indice de l&#8217;élément courant,
commençant à zéro.</p>
</div>
<div class="paragraph">
<p><code>index</code> est une <strong>variable exportée</strong>.
Certaines directives exportent des variables que l&#8217;on peut affecter à une variable locale
afin de pouvoir les utiliser dans notre template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ul&gt;
  &lt;li&gt;0 - London&lt;/li&gt;
  &lt;li&gt;1 - Lyon&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y aussi quelques autres variables exportées qui peuvent être utiles&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>even</code>, un booléen qui sera vrai si l&#8217;élément a un index pair</p>
</li>
<li>
<p><code>odd</code>, un booléen qui sera vrai si l&#8217;élément a un index impair</p>
</li>
<li>
<p><code>first</code>, un booléen qui sera vrai si l&#8217;élément est le premier de la collection</p>
</li>
<li>
<p><code>last</code>, un booléen qui sera vrai si l&#8217;élément est le dernier de la collection</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ngswitch">8.7.3. NgSwitch</h4>
<div class="paragraph">
<p>Comme tu peux le deviner par son nom, celle-ci permet de switcher entre
plusieurs templates selon une condition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div [ngSwitch]="messageCount"&gt;
  &lt;p *ngSwitchCase="0"&gt;You have no message&lt;/p&gt;
  &lt;p *ngSwitchCase="1"&gt;You have a message&lt;/p&gt;
  &lt;p *ngSwitchDefault&gt;You have some messages&lt;/p&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, <code>ngSwitch</code> prend une condition et les <code>*ngSwitchCase</code> attendent les différents cas possibles.
Tu as aussi <code>*ngSwitchDefault</code>, qui sera affiché si aucune des autres possibilités n&#8217;est remplie.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_autres_directives_de_templating">8.8. Autres directives de templating</h3>
<div class="paragraph">
<p>Deux autres directives peuvent être utiles pour écrire un template,
mais ce ne sont pas des directives structurelles comme celles que nous venons de voir.
Ces directives sont des directives standards.</p>
</div>
<div class="sect3">
<h4 id="_ngstyle">8.8.1. NgStyle</h4>
<div class="paragraph">
<p>La première est <code>ngStyle</code>.
Nous avons déjà vu que nous pouvions agir sur le style d&#8217;un élément en utilisant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p [style.color]="foreground"&gt;Friendship is Magic&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux changer plusieurs styles en même temps,
tu peux utiliser la directive <code>ngStyle</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div [ngStyle]="{fontWeight: fontWeight, color: color}"&gt;I've got style&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que la directive attend un objet dont les clés sont les styles à définir.
La clé peut être en <strong>camelCase</strong> (<code>fontWeight</code>) ou en <strong>dash-case</strong> (<code>'font-weight'</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_ngclass">8.8.2. NgClass</h4>
<div class="paragraph">
<p>Dans le même esprit, la directive <code>ngClass</code> permet
d&#8217;ajouter ou d&#8217;enlever dynamiquement des classes sur un élément.</p>
</div>
<div class="paragraph">
<p>Comme pour le style, on peut soit définir une seule classe avec le binding de propriété&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div [class.awesome-div]="isAnAwesomeDiv()"&gt;I've got style&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou, si on veut en définir plusieurs en même temps,
utiliser <code>ngClass</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div [ngClass]="{'awesome-div': isAnAwesomeDiv(), 'colored-div': isAColoredDiv()}"&gt;I've got style&lt;/div&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxe_canonique">8.9. Syntaxe canonique</h3>
<div class="paragraph">
<p>Chacune des syntaxes indiquées a une version plus verbeuse appelée la syntaxe
canonique (<em>canonical syntax</em>). C&#8217;est essentiellement intéressant si ton
moteur de template côté serveur a du mal avec les notations <code>[]</code> ou <code>()</code>.
Ou si tu ne supportes vraiment pas d&#8217;utiliser <code>[]</code>, <code>()</code>,  <code>*</code>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Si tu veux déclarer un <em>binding</em> de propriété, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony [name]="pony.name"&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou utiliser la notation canonique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony bind-name="pony.name"&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour le <em>binding</em> d&#8217;événement, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;button (click)="onButtonClick()"&gt;Click me!&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou utiliser la syntaxe canonique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;button on-click="onButtonClick()"&gt;Click me!&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et pour les variables locales, tu utiliseras <code>ref-</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;input type="text" ref-name&gt;
&lt;button on-click="name.focus()"&gt;Focus the input&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>au lieu de la forme raccourcie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;input type="text" #name&gt;
&lt;button (click)="name.focus()"&gt;Focus the input&lt;/button&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_résumé">8.10. Résumé</h3>
<div class="paragraph">
<p>Le système de template d&#8217;Angular nous propose une syntaxe puissante pour
exprimer les parties dynamiques de notre HTML. Elle nous permet d&#8217;exprimer du
<em>binding</em> de données, de propriétés, d&#8217;événements, et des considérations de
templating, d&#8217;une façon claire, avec des symboles propres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{{}}</code> pour l&#8217;interpolation,</p>
</li>
<li>
<p><code>[]</code> pour le <em>binding</em> de propriété,</p>
</li>
<li>
<p><code>()</code> pour le <em>binding</em> d&#8217;événement,</p>
</li>
<li>
<p><code>#</code> pour la déclaration de variable,</p>
</li>
<li>
<p><code>*</code> pour les directives structurelles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Elle permet d&#8217;interagir avec le standard des <em>Web Components</em> comme
aucun autre framework. Et comme il n&#8217;y a pas d&#8217;ambiguité sémantique
entre les symboles, on verra nos outils et IDEs s&#8217;améliorer progressivement pour
nous aider et nous alerter dans nos écritures de templates.</p>
</div>
<div class="paragraph">
<p>Tous ces symboles sont les versions raccourcies de leur pendant canonique, que
tu peux utiliser si tu le souhaites.</p>
</div>
<div class="paragraph">
<p>Tu auras certainement besoin de temps pour utiliser intuitivement cette syntaxe,
mais tu gagneras rapidement en dextérité, et elle deviendra ensuite facile à
lire et à écrire.</p>
</div>
<div class="paragraph">
<p>Avant de passer à la suite, essayons de voir un exemple complet.</p>
</div>
<div class="paragraph">
<p>Je veux écrire un composant <code>PoniesComponent</code>, affichant une liste de poneys.
Chacun de ces poneys devrait être représenté par son propre composant <code>PonyComponent</code>,
mais nous n&#8217;avons pas encore vu comment passer des paramètres à un composant.
Donc, pour l&#8217;instant, nous allons nous contenter d&#8217;afficher une simple liste.
La liste devra s&#8217;afficher seulement si elle n&#8217;est pas vide,
et j&#8217;aimerais avoir un peu de couleur sur les lignes paires.
Et nous voulons pouvoir rafraîchir cette liste d&#8217;un simple clic sur un bouton.</p>
</div>
<div class="paragraph">
<p>Prêt&#160;?</p>
</div>
<div class="paragraph">
<p>On commence par écrire notre composant, dans son propre fichier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-ponies',
  template: ``
})
export class PoniesComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux l&#8217;ajouter au composant <code>AppComponent</code> écrit au chapitre précédent
pour le tester. Tu devras l&#8217;importer, l&#8217;ajouter aux directives, et insérer la
balise <code>&lt;ns-ponies&gt;&lt;/ns-ponies&gt;</code> dans le template.</p>
</div>
<div class="paragraph">
<p>Notre nouveau composant a une liste de poneys&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-ponies',
  template: ``
})
export class PoniesComponent {
  ponies: Array&lt;any&gt; = [{ name: 'Rainbow Dash' }, { name: 'Pinkie Pie' }];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On va afficher cette liste, en utilisant <code>ngFor</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-ponies',
  template: `&lt;ul&gt;
    &lt;li *ngFor="let pony of ponies"&gt;{{ pony.name }}&lt;/li&gt;
  &lt;/ul&gt;`
})
export class PoniesComponent {
  ponies: Array&lt;any&gt; = [{ name: 'Rainbow Dash' }, { name: 'Pinkie Pie' }];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il manque un dernier truc, le bouton qui rafraîchit la liste&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-ponies',
  template: `&lt;button (click)="refreshPonies()"&gt;Refresh&lt;/button&gt;
  &lt;ul&gt;
    &lt;li *ngFor="let pony of ponies"&gt;{{ pony.name }}&lt;/li&gt;
  &lt;/ul&gt;`
})
export class PoniesComponent {
  ponies: Array&lt;any&gt; = [{ name: 'Rainbow Dash' }, { name: 'Pinkie Pie' }];

  refreshPonies() {
    this.ponies = [{ name: 'Fluttershy' }, { name: 'Rarity' }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et bien sûr, une touche de couleur pour finir,
avec l&#8217;utilisation de <code>[style.color]</code> et de la variable locale <code>isEven</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-ponies',
  template: `&lt;button (click)="refreshPonies()"&gt;Refresh&lt;/button&gt;
  &lt;ul&gt;
    &lt;li *ngFor="let pony of ponies; even as isEven"
      [style.color]="isEven ? 'green' : 'black'"&gt;
      {{ pony.name }}
    &lt;/li&gt;
  &lt;/ul&gt;`
})
export class PoniesComponent {
  ponies: Array&lt;any&gt; = [{ name: 'Rainbow Dash' }, { name: 'Pinkie Pie' }];

  refreshPonies() {
    this.ponies = [{ name: 'Fluttershy' }, { name: 'Rarity' }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et voilà, on a mis en œuvre toute la syntaxe de templating, et on a un composant
parfaitement fonctionnel. Nos données sont pour le moment hardcodées, mais on
apprendra vite comment utiliser un service pour les charger&#160;!
Cela implique auparavant d&#8217;en apprendre un peu plus sur l&#8217;injection de dépendances,
pour que nous puissions utiliser le service HTTP&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye nos deux exercices
<a href="https://angular-exercises.ninja-squad.com/exercises/1/templates">Templates</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18px" title="Free"></span>
et
<a href="https://angular-exercises.ninja-squad.com/exercises/2/races-list">Liste de courses</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18px" title="Free"></span>&#160;!
Ils sont gratuits et font partie de notre Pack pro,
où tu apprends à construire une application complète étape par étape.
Le premier consiste à construire un petit composant,
un menu "responsive", et jouer avec son template.
Le second te guide pour construire un autre composant&#160;:
la liste des courses.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dependency-injection">9. Injection de dépendances</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_cuisine_et_dépendances">9.1. Cuisine et Dépendances</h3>
<div class="paragraph">
<p>L&#8217;injection de dépendances est un <em>design pattern</em> bien connu.
Prenons un composant de notre application.
Il peut avoir besoin de faire appel à des fonctionnalités qui sont définies dans d&#8217;autres parties de l&#8217;application (un service, par exemple).
C&#8217;est ce que l&#8217;on appelle une dépendance&#160;: le composant dépend du service.
Au lieu de laisser au composant la charge de créer une instance du service,
l&#8217;idée est que le framework crée l&#8217;instance du service lui-même, et la fournisse au composant qui en a besoin.
Cette façon de procéder se nomme l&#8217;inversion de contrôle.</p>
</div>
<div class="paragraph">
<p>Cela apporte plusieurs bénéfices&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le développement est simplifié, on exprime juste ce que l&#8217;on veut, où on le veut.</p>
</li>
<li>
<p>le test est simplifié, en permettant de remplacer les dépendances par des versions bouchonnées.</p>
</li>
<li>
<p>la configuration est simplifiée, en permutant facilement différentes implémentations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>C&#8217;est un concept largement utilisé côté serveur, mais AngularJS&#160;1.x était un des premiers à l&#8217;apporter côté client.</p>
</div>
</div>
<div class="sect2">
<h3 id="_développement_facile">9.2. Développement facile</h3>
<div class="paragraph">
<p>Pour faire de l&#8217;injection de dépendances, on a besoin&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>d&#8217;une façon d&#8217;enregistrer une dépendance, pour la rendre disponible à l&#8217;injection dans d&#8217;autres composants/services.</p>
</li>
<li>
<p>d&#8217;une façon de déclarer quelles dépendances sont requises dans chaque composant/service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le framework se chargera ensuite du reste.
Quand on déclarera une dépendance dans un composant, il regardera dans le registre s&#8217;il la trouve, récupérera l&#8217;instance existante ou en créera une, et réalisera enfin l&#8217;injection dans notre composant.</p>
</div>
<div class="paragraph">
<p>Une dépendance peut être aussi bien un service fourni par Angular, ou un des services que nous avons écrits.</p>
</div>
<div class="paragraph">
<p>Prenons un exemple avec un service <code>ApiService</code>, déjà écrit par l&#8217;un de nos collègues.
Comme c&#8217;est le feignant de l&#8217;équipe, il a seulement écrit une classe vide avec une méthode <code>get</code> qui renvoie un tableau vide,
mais tu peux déjà deviner qu&#8217;à terme ce service sera utilisé pour communiquer avec l&#8217;API exposée par le backend.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export class ApiService {
  get(path) {
    // todo: call the backend API
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec TypeScript, c&#8217;est ultra-simple de déclarer une dépendance dans un de nos composants ou services,
il suffit d&#8217;utiliser le système de type.</p>
</div>
<div class="paragraph">
<p>Disons que l&#8217;on veut écrire un <code>RaceService</code> qui utilise <code>ApiService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { ApiService } from './api.service';

export class RaceService {

  constructor(private apiService: ApiService) {
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Angular récupérera le service <code>ApiService</code> pour nous,
et l&#8217;injectera dans notre constructeur. Quand le service <code>RaceService</code> est utilisé,
le constructeur sera appelé, et le champ <code>apiService</code> référencera le service <code>ApiService</code>.</p>
</div>
<div class="paragraph">
<p>Maintenant, on peut ajouter une méthode <code>list()</code> à notre service, qui appellera notre serveur via le service <code>ApiService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { ApiService } from './api.service';

export class RaceService {

  constructor(private apiService: ApiService) {
  }

  list() {
    return this.apiService.get('/races');
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour indiquer à Angular que ce service a lui-même des dépendances, on doit lui ajouter un décorateur <code>@Injectable()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Injectable } from '@angular/core';
import { ApiService } from './api.service';

@Injectable()
export class RaceService {

  constructor(private apiService: ApiService) {
  }

  list() {
    return this.apiService.get('/races');
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme nous utilisons <code>ApiService</code>,
nous avons besoin de "l&#8217;enregistrer",
pour le rendre disponible à l&#8217;injection.</p>
</div>
<div class="paragraph">
<p>Depuis Angular&#160;6.0,
la façon la plus simple (et recommandée) est d&#8217;ajouter le décorateur <code>@Injectable</code> sur <code>ApiService</code>
et d&#8217;ajouter <code>providedIn</code> directement à l&#8217;intérieur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class ApiService {
  get(path) {
    // todo: call the backend API
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une autre façon est d&#8217;utiliser l&#8217;attribut <code>providers</code> du décorateur <code>@NgModule</code>
vu précédemment (c&#8217;est ce que l&#8217;on utilisait avant Angular&#160;6.0).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { AppComponent } from './app.component';
import { ApiService } from './services/api.service';

@NgModule({
  imports: [BrowserModule],
  declarations: [AppComponent],
  providers: [
    ApiService
  ],
  bootstrap: [AppComponent]
})
export class AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, si on veut rendre notre <code>RaceService</code> disponible à l&#8217;injection dans d&#8217;autres services et composants, il nous faut aussi l&#8217;enregistrer&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Injectable } from '@angular/core';
import { ApiService } from './api.service';

@Injectable({
  providedIn: 'root'
})
export class RaceService {

  constructor(private apiService: ApiService) {
  }

  list() {
    return this.apiService.get('/races');
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et c&#8217;est fini&#160;!</p>
</div>
<div class="paragraph">
<p>On peut désormais utiliser notre nouveau service où on le souhaite.
Testons-le dans notre composant <code>AppComponent</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { RaceService } from './services/race.service';

@Component({
  selector: 'ns-root',
  template: `&lt;h1&gt;PonyRacer&lt;/h1&gt;
    &lt;p&gt;{{ list() }}&lt;/p&gt;`
})
export class AppComponent {

  // add a constructor with RaceService
  constructor(private raceService: RaceService) {
  }

  list() {
    return this.raceService.list();
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme notre collègue a simplement renvoyé un tableau vide dans la méthode <code>get</code> de <code>ApiService</code>
tu ne vas rien recevoir si tu appelles la méthode <code>list()</code>.</p>
</div>
<div class="paragraph">
<p>Mais on peut peut-être y faire quelque chose&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_facile">9.3. Configuration facile</h3>
<div class="paragraph">
<p>Je reviendrai sur les bénéfices de testabilité apportés par l&#8217;injection de dépendances dans un chapitre ultérieur,
on va se concentrer sur les questions de configuration pour le moment.
Ici, on appelait un serveur qui n&#8217;existe pas.
Soit l&#8217;équipe backend n&#8217;est pas prête, soit tu veux le faire plus tard.
Dans tous les cas, on voudrait bouchonner tout ça.</p>
</div>
<div class="paragraph">
<p>L&#8217;injection de dépendances permet de le faire facilement.
Retournons à l&#8217;enregistrement de nos dépendances,
si tu as choisi de les déclarer dans le module&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { AppComponent } from './app.component';
import { RaceService } from './services/race.service';
import { ApiService } from './services/api.service';

@NgModule({
  imports: [BrowserModule],
  declarations: [AppComponent],
  providers: [
    RaceService,
    ApiService
  ],
  bootstrap: [AppComponent]
})
export class AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut représenter les relations entre composants et services comme ceci, si une flèche signifie "dépend de"&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag 6d7eadbdb994887753003d70b9d05d12" width="260" height="238">
</div>
</div>
<div class="paragraph">
<p>En fait, ce que l&#8217;on a écrit est la version courte de&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { AppComponent } from './app.component';
import { RaceService } from './services/race.service';
import { ApiService } from './services/api.service';

@NgModule({
  imports: [BrowserModule],
  declarations: [AppComponent],
  bootstrap: [AppComponent],
  providers: [
    { provide: RaceService, useClass: RaceService },
    { provide: ApiService, useClass: ApiService }
  ]
})
export class AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On explique à l&#8217;injecteur qu&#8217;on veut un binding entre un token (le type <code>RaceService</code>)
et la classe <code>RaceService</code>.
L&#8217;injecteur (<code>Injector</code>) est un service qui maintient un registre des composants injectables,
et qui les injecte quand ils sont réclamés.
Le registre est un dictionnaire associant des clés, appelés tokens, à des classes.
Les tokens ne sont pas, contrairement à de nombreux frameworks d&#8217;injection de dépendances, limités à des seules chaînes de caractères.
Ils peuvent être de n&#8217;importe quel type, comme par exemple une référence à une classe.
Et ce sera en général le cas.</p>
</div>
<div class="paragraph">
<p>Comme dans notre exemple, si le token et la classe de l&#8217;objet à injecter sont les mêmes,
tu peux écrire la même chose en version raccourcie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { AppComponent } from './app.component';
import { RaceService } from './services/race.service';
import { ApiService } from './services/api.service';

@NgModule({
  imports: [BrowserModule],
  declarations: [AppComponent],
  providers: [
    RaceService,
    ApiService
  ],
  bootstrap: [AppComponent]
})
export class AppModule {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le token doit identifier de manière unique la dépendance.</p>
</div>
<div class="paragraph">
<p>L&#8217;injecteur est retourné par la promesse <code>bootstrapModule</code>, alors on peut jouer un peu avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">  // in our module
  providers: [
    ApiService,
    { provide: RaceService, useClass: RaceService },
    // let's add another provider to the same class
    // with another token
    { provide: 'RaceServiceToken', useClass: RaceService }
  ]

// let's bootstrap the module
platformBrowserDynamic().bootstrapModule(AppModule)
  .then(
    // and play with the returned injector
    appRef =&gt; playWithInjector(appRef.injector)
  );</code></pre>
</div>
</div>
<div class="paragraph">
<p>La partie intéressante est la fonction <code>playWithInjector</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function playWithInjector(inj) {
  console.log(inj.get(RaceService));
  // logs "RaceService {apiService: ApiService}"
  console.log(inj.get('RaceServiceToken'));
  // logs "RaceService {apiService: ApiService}" again
  console.log(inj.get(RaceService) === inj.get(RaceService));
  // logs "true", as the same instance is returned every time for a token
  console.log(inj.get(RaceService) === inj.get('RaceServiceToken'));
  // logs "false", as the providers are different,
  // so there are two distinct instances
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On demande ici une dépendance à l&#8217;injecteur via la méthode <code>get</code> et un token.
Comme j&#8217;ai déclaré le <code>RaceService</code> deux fois, avec deux tokens différents, on a deux providers.
L&#8217;injecteur va créer une instance de <code>RaceService</code> à la première demande d&#8217;un token donné, et retournera la même instance lors de chaque demande ultérieure.
Il fera de même pour chaque provider, alors nous aurons en fait dans ce cas deux instances de <code>RaceService</code> dans notre application, une pour chaque token.</p>
</div>
<div class="paragraph">
<p>Cependant, tu ne manipuleras pas souvent le token, voire pas du tout.
En TypeScript, tu compteras sur les types pour faire le boulot, où le token sera une référence de type, en général associé à la classe correspondante.
Si tu veux spécifiquement définir un autre token, tu devras utiliser le décorateur <code>@Inject()</code>&#160;: on y reviendra à la fin de ce chapitre.</p>
</div>
<div class="paragraph">
<p>Cet exemple ne servait qu&#8217;à pointer du doigt quelques détails&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un provider associe un token à un service.</p>
</li>
<li>
<p>l&#8217;injecteur retourne la même instance chaque fois que le même token est demandé.</p>
</li>
<li>
<p>on peut définir un token différent de la classe de l&#8217;objet à injecter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le fait de créer une instance lors du premier appel, et de retourner ensuite toujours la même, est un <em>design pattern</em> bien connu&#160;: un <em>singleton</em>.
C&#8217;est très utile, parce que tu peux y stocker des informations, et les partager entre composants via un service, parce qu&#8217;ils utiliseront la même instance de ce service.</p>
</div>
<div class="paragraph">
<p>Maintenant, retournons à notre problème de <code>RaceService</code> bouchonné.
Je peux écrire une nouvelle classe, faisant le même boulot que <code>RaceService</code>, mais qui retourne des données codées en dur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class FakeRaceService {
  list() {
    return [{ name: 'London' }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut manipuler la déclaration du provider pour remplacer <code>RaceService</code> par notre <code>FakeRaceService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// in our module
providers: [
  // we provide a fake service
  { provide: RaceService, useClass: FakeRaceService }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu redémarres ton application, tu constateras que nous avons bien cette fois-ci une course disponible,
car notre application utilise le service bouchonné au lieu du premier&#160;!</p>
</div>
<div class="paragraph">
<p>Maintenant nos relations de dépendances sont devenues&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag 1e187121938bef3c931d8e98220a77fb" width="430" height="238">
</div>
</div>
<div class="paragraph">
<p>Cela peut être très utile quand tu testes manuellement ton application, et aussi, comme nous le verrons prochainement, quand tu écris des tests automatisés.</p>
</div>
</div>
<div class="sect2">
<h3 id="_autres_types_de_provider">9.4. Autres types de provider</h3>
<div class="paragraph">
<p>Toujours dans le cadre de cet exemple, nous aurions probablement envie d&#8217;utiliser <code>FakeRaceService</code> pendant le développement, et <code>RaceService</code> en production. Tu peux évidemment changer le provider manuellement, mais tu peux aussi utiliser un autre type de provider&#160;: <code>useFactory</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// we just have to change this constant when going to prod
const IS_PROD = false;

  // in our module
  providers: [
    // we provide a factory
    {
      provide: RaceService,
      useFactory: () =&gt; IS_PROD ? new RaceService(null) : new FakeRaceService()
    }
  ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, on utilise <code>useFactory</code> au lieu de <code>useClass</code>.
Une <em>factory</em> est une fonction avec un seul job, créer une instance.
Notre exemple teste une constante, et retourne le service bouchonné ou le véritable en fonction.</p>
</div>
<div class="paragraph">
<p>Mais attends, si nous basculons sur l&#8217;utilisation du véritable service,
comme nous utilisons un simple <code>new</code> pour créer l&#8217;instance de <code>RaceService</code>,
il n&#8217;aura pas sa dépendance <code>ApiService</code> instanciée&#160;!
Et oui, si on veut que cet exemple fonctionne, on doit passer au constructeur une instance de <code>ApiService</code>.
Bonne nouvelle: <code>useFactory</code> prend un paramètre supplémentaire, un tableau, où tu peux spécifier ses dépendances&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// we just have to change this constant when going to prod
const IS_PROD = true;

  // in our module
  providers: [
    ApiService,
    // we provide a factory
    {
      provide: RaceService,
      // the apiService instance will be injected in the factory
      // so we can pass it to RaceService
      useFactory: apiService =&gt; IS_PROD ? new RaceService(apiService) : new FakeRaceService(),
      deps: [ApiService]
    }
  ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hourra&#160;!</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Sois prudent&#160;: l&#8217;ordre des paramètres doit correspondre à l&#8217;ordre dans le tableau, si tu as plusieurs dépendances&#160;!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Mais bon, cet exemple permettait juste de démontrer l&#8217;utilisation de <code>useFactory</code>. En vrai, tu peux, tu DOIS même, écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// in our module
providers: [
  ApiService,
  { provide: RaceService, useClass: IS_PROD ? RaceService : FakeRaceService }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Déclarer une constante <code>IS_PROD</code> est un peu pénible&#160;: et si nous utilisions aussi ici l&#8217;injection de dépendances&#160;?! Oui, je pousse le bouchon un peu loin&#160;! :)
Tu n&#8217;as certes pas besoin de tout faire rentrer dans le moule de l&#8217;injection, mais cela permet de te montrer un autre type de provider&#160;: <code>useValue</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// in our module
providers: [
  ApiService,
  // we provide a factory
  { provide: 'IS_PROD', useValue: true },
  {
    provide: RaceService,
    useFactory: (IS_PROD, apiService) =&gt; IS_PROD ? new RaceService(apiService) : new FakeRaceService(),
    deps: ['IS_PROD', ApiService]
  }
]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_injecteurs_hiérarchiques">9.5. Injecteurs hiérarchiques</h3>
<div class="paragraph">
<p>Un dernier point crucial à comprendre en Angular&#160;: il y a plusieurs injecteurs dans ton application.
En fait, il y a un injecteur par composant, et chaque injecteur hérite de l&#8217;injecteur de son parent.</p>
</div>
<div class="paragraph">
<p>Disons qu&#8217;on a une application qui ressemble à&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag 8e5826730a0b393858f1283485f26e78" width="270" height="238">
</div>
</div>
<div class="paragraph">
<p>On a un module racine <code>AppModule</code> avec un composant racine <code>AppComponent</code>,
avec un composant enfant <code>RacesComponent</code>.</p>
</div>
<div class="paragraph">
<p>Quand on bootstrappe l&#8217;application, on crée un injecteur racine pour le module.
Ensuite, chaque composant va créer son propre injecteur, héritant de celui de son parent.</p>
</div>
<div class="paragraph">
<p>Quand tu enregistres un service en utilisant la façon recommandée <code>providedIn: 'root'</code>,
ou en utilisant les providers du module,
tu ajoutes ces services à l&#8217;injecteur racine.
Note que <code>'root'</code> n&#8217;est pas la seule valeur permise pour <code>providedIn</code>&#160;:
en fait, si tu as plusieurs modules dans ton application,
tu peux choisir de n&#8217;enregistrer ton service que dans un seul module,
par exemple <code>providedIn: RacesModule</code>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag 5574005322baaa65adeb04ee2b9c6afb" width="470" height="238">
</div>
</div>
<div class="paragraph">
<p>Cela signifie que si tu déclares une dépendance dans un composant, Angular va commencer sa recherche dans l&#8217;injecteur courant.
S&#8217;il y trouve la dépendance, parfait, il la retourne. Sinon, il va chercher dans l&#8217;injecteur parent, puis son parent, et tous ses ancêtres, jusqu&#8217;à ce qu&#8217;il trouve cette dépendance.
S&#8217;il ne trouve pas, il lève une exception.</p>
</div>
<div class="paragraph">
<p>De cela, on peut déduire deux affirmations&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>les providers déclarés dans l&#8217;injecteur racine sont disponibles pour tous les composants de l&#8217;application.
Par exemple, <code>ApiService</code> et <code>RaceService</code> peuvent être utilisés partout.</p>
</li>
<li>
<p>on peut déclarer des dépendances à d&#8217;autres niveaux que le module racine.
Comment fait-on cela&#160;?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le décorateur <code>@Component</code> peut recevoir une autre option de configuration, appelée <code>providers</code>.
Cet attribut <code>providers</code> peut recevoir un tableau avec une liste de dépendances, comme nous l&#8217;avons fait avec l&#8217;attribut <code>providers</code> de <code>@NgModule</code>.</p>
</div>
<div class="paragraph">
<p>On peut donc imaginer un <code>RacesComponent</code> qui déclarerait son propre provider de <code>RaceService</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-races',
  providers: [{ provide: RaceService, useClass: FakeRaceService }],
  template: `&lt;strong&gt;Races list: {{ list() }}&lt;/strong&gt;`
})
export class RacesComponent {

  constructor(private raceService: RaceService) {
  }

  list() {
    return this.raceService.list();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ce composant, le provider avec le token <code>RaceService</code> retournera toujours une instance de <code>FakeRaceService</code>, quelque soit le provider défini dans l&#8217;injecteur racine.
C&#8217;est vraiment pratique si tu veux utiliser une instance différente d&#8217;un service dans un composant donné, ou si tu tiens à avoir des composants parfaitement encapsulés qui déclarent tout ce dont ils dépendent.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Attention</div>
</td>
<td class="content">
Si tu déclares une dépendance à la fois dans le module de ton application
et dans l&#8217;attribut <code>providers</code> de ton composant,
ce seront bien deux instances différentes qui seront créées et utilisées&#160;!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ici nous avons&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag d73111aa94ccd97c837b62ec7f2ea367" width="510" height="238">
</div>
</div>
<div class="paragraph">
<p>L&#8217;injection sera alors résolue en&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag d7fd8bac05167300f5bcbc00e00c5557" width="490" height="238">
</div>
</div>
<div class="paragraph">
<p>En règle générale, on peut dire que si un seul composant a besoin d&#8217;un service donné, c&#8217;est une bonne idée de définir ce service dans l&#8217;injecteur du composant, via l&#8217;attribut <code>providers</code>.
Si une dépendance peut être utilisée ailleurs dans l&#8217;application, on la déclare dans le module racine.</p>
</div>
</div>
<div class="sect2">
<h3 id="_injection_sans_types">9.6. Injection sans types</h3>
<div class="paragraph">
<p>Il est aussi possible de ne pas utiliser un type pour l&#8217;injection de dépendances,
en passant par le décorateur <code>@Inject()</code>.
On peut ainsi injecter des services ou de simples valeurs comme dans l&#8217;exemple suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Inject, Injectable } from '@angular/core';

import { BACKEND_URL } from './tokens';

@Injectable({
  providedIn: 'root'
})
export class RaceService {

  constructor(@Inject(BACKEND_URL) private url: string) {
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour utiliser <code>@Inject()</code>,
il est nécessaire de lui passer un <em>token</em>.
Ce token est défini comme ceci par exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { InjectionToken } from '@angular/core';

export const BACKEND_URL = new InjectionToken&lt;string&gt;('API URL');</code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise ensuite ce token dans les providers du module pour définir sa valeur,
par exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{ provide: BACKEND_URL, useValue: 'http://localhost:8080' },</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou tu peux l&#8217;enregistrer directement avec <code>providedIn</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export const BACKEND_URL_PROVIDED = new InjectionToken&lt;string&gt;('API URL', {
  providedIn: 'root',
  factory: () =&gt; 'http://localhost:8080'
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que tu pourrais utiliser la fonctionnalités des variables d&#8217;environnement
de Angular CLI pour ce cas.</p>
</div>
<div class="paragraph">
<p>Angular utilise ce mécanisme de token également,
et nous permet par exemple de définir la locale de l&#8217;application
grâce au token <code>LOCALE_ID</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@NgModule({
  imports: [BrowserModule],
  declarations: [CustomLocaleComponent], // and other components
  providers: [
    { provide: LOCALE_ID, useValue: 'fr-FR' }
  ]
  // ...
})
export class AppModule { }

@Component({
  selector: 'ns-locale',
  template: `
    &lt;p&gt;The locale is {{ locale }}&lt;/p&gt;
    &lt;!-- will display 'fr-FR' --&gt;

    &lt;p&gt;{{ 1234.56 | number }}&lt;/p&gt;
    &lt;!-- will display '1 234,56' --&gt;
  `
})
class CustomLocaleComponent {
  constructor(@Inject(LOCALE_ID) public locale: string) { }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais on en reparlera plus loin lorsque l&#8217;on abordera l&#8217;internationalisation&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="services">10. Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Angular propose le concept de services&#160;: des classes que tu peux injecter dans une autre.</p>
</div>
<div class="paragraph">
<p>Quelques services sont fournis par le framework, certains par les modules communs,
et tu peux en construire d&#8217;autres.
On verra ceux fournis par les modules communs dans un chapitre dédié,
alors jetons d&#8217;abord un œil à ceux fournis par le framework,
et découvrons comment on peut créer les nôtres.</p>
</div>
<div class="sect2">
<h3 id="_service_title">10.1. Service Title</h3>
<div class="paragraph">
<p>Le cœur du framework fournit vraiment peu de services, et encore moins que tu utiliseras
réellement dans tes applications.
Je dis peu, mais en fait, ils ne sont même que deux :).</p>
</div>
<div class="paragraph">
<p>Une question qui revient souvent est comment modifier le titre de ma page&#160;?
Facile&#160;! Il y a un service <code>Title</code> que tu peux t&#8217;injecter,
et il propose un getter et un setter&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { Title } from '@angular/platform-browser';

@Component({
  selector: 'ns-root',
  template: `&lt;h1&gt;PonyRacer&lt;/h1&gt;`
})
export class AppComponent {

  constructor(title: Title) {
    title.setTitle('PonyRacer - Bet on ponies');
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le service créera automatiquement l&#8217;élément <code>title</code> dans la section <code>head</code> si besoin
et positionnera correctement la valeur&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_service_meta">10.2. Service Meta</h3>
<div class="paragraph">
<p>L&#8217;autre service est sensiblement équivalent&#160;:
il permet de récupérer et mettre à jour les valeurs "meta" de la page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { Meta } from '@angular/platform-browser';

@Component({
  selector: 'ns-root',
  template: `&lt;h1&gt;PonyRacer&lt;/h1&gt;`
})
export class AppComponent {

  constructor(meta: Meta) {
    meta.addTag({ name: 'author', content: 'Ninja Squad' });
  }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_créer_son_propre_service">10.3. Créer son propre service</h3>
<div class="paragraph">
<p>C&#8217;est vraiment simple.
Il suffit d&#8217;écrire une classe, et voilà&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export class RacesService {

  list() {
    return [{ name: 'London' }];
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme en AngularJS&#160;1.x, un service est un singleton, donc la même instance unique sera injectée partout.
Cela en fait le candidat idéal pour partager un état parmi plusieurs composants séparés&#160;!</p>
</div>
<div class="paragraph">
<p>Si le service a lui aussi des dépendances, alors il faut lui ajouter le décorateur <code>@Injectable()</code>.</p>
</div>
<div class="paragraph">
<p>Sans ce décorateur, le framework ne pourra pas faire l&#8217;injection de dépendances.</p>
</div>
<div class="paragraph">
<p>Plutôt que renvoyer la même liste à chaque fois,
notre <code>RacesService</code> va probablement interroger une API REST.
Pour faire une requête HTTP, le framework nous donne le service <code>HttpClient</code>.
Ne t&#8217;inquiète pas, on verra très bientôt comment il fonctionne.</p>
</div>
<div class="paragraph">
<p>Notre service a une dépendance vers <code>HttpClient</code> pour récupérer les courses,
nous allons donc devoir ajouter un constructeur avec le service <code>HttpClient</code> en argument,
et ajouter le décorateur <code>@Injectable()</code> sur la classe.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';

@Injectable({
  providedIn: 'root'
})
export class RacesServiceWithHttp {

  constructor(private http: HttpClient) {
  }

  list() {
    return this.http.get('/api/races');
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite il faut enregistrer ce service,
soit en l&#8217;ajoutant aux <code>providers</code> d&#8217;un composant,
ou aux <code>providers</code> du module,
ou, à partir d&#8217;Angular&#160;6.0, en utilisant <code>providedIn</code> dans <code>@Injectable()</code> comme ci-dessus.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercise
<a href="https://angular-exercises.ninja-squad.com/exercises/3/race-service">Race service</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18px" title="Free"></span>&#160;!
Il est gratuit et fait partie de notre Pack pro,
où tu apprends à construire une application complète étape par étape.
Cet exercice te fait construire ton premier service&#160;!</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pipes">11. <em>Pipes</em></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ceci_nest_pas_une_pipe">11.1. Ceci n&#8217;est pas une pipe</h3>
<div class="paragraph">
<p>Souvent, les données brutes n&#8217;ont pas la forme exacte que l&#8217;on voudrait afficher dans la vue.
On a envie de les transformer, les filtrer, les tronquer, etc.
AngularJS&#160;1.x avait une fonctionnalité bien pratique pour ça, mais mal-nommée&#160;: les filters ("filtres").
Ils en ont tiré une leçon, et ces transformateurs de données ont désormais un nom pertinent&#160;!
Non, c&#8217;est une blague&#160;: ils se nomment désormais <em>pipes</em> ("tuyaux") :).</p>
</div>
<div class="paragraph">
<p>Un <em>pipe</em> peut être utilisé dans le HTML, ou dans le code applicatif.
Étudions quelques cas d&#8217;exemple.</p>
</div>
</div>
<div class="sect2">
<h3 id="_json">11.2. json</h3>
<div class="paragraph">
<p><code>json</code> est un <em>pipe</em> pas tellement utile en production, mais bien pratique pour le débug.
Ce <em>pipe</em> applique simplement <code>JSON.stringify()</code> sur tes données.
Si tu as dans tes données un tableau de poneys nommé <code>ponies</code>, et que tu veux rapidement voir ce qu&#8217;il contient, tu aurais pu écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ ponies }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pas de chance, cela affichera <code>[object Object]</code>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Mais <code>JsonPipe</code> arrive à la rescousse.
Tu peux l&#8217;utiliser dans n&#8217;importe quelle expression, au sein de ton HTML&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ ponies | json }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cela affichera la représentation JSON de ton objet&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;[ { "name": "Rainbow Dash" }, { "name": "Pinkie Pie" } ]&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut aussi comprendre avec cet exemple d&#8217;où vient le nom 'pipe'. Pour utiliser un <em>pipe</em>, il faut ajouter le caractère <em>pipe</em> (<code>|</code>) après tes données, puis le nom du <em>pipe</em> à utiliser. L&#8217;expression est évaluée, et le résultat traverse le <em>pipe</em>. Et il est possible de chaîner plusieurs <em>pipes</em>, genre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ ponies | slice:0:2 | json }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On reviendra sur le <em>pipe</em> <code>slice</code>, mais tu constates qu&#8217;on enchaîne le <em>pipe</em> <code>slice</code> et le <em>pipe</em> <code>json</code>.</p>
</div>
<div class="paragraph">
<p>Tu peux en utiliser dans une expression interpolée, ou une expression de propriété, mais <strong>pas</strong> dans une instruction d&#8217;événement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p [textContent]="ponies | json"&gt;&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut aussi l&#8217;utiliser dans le code&#160;, via l&#8217;injection de dépendance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
// you need to import the pipe you want to use
import { JsonPipe } from '@angular/common';

@Component({
  selector: 'ns-ponies',
  template: `&lt;p&gt;{{ poniesAsJson }}&lt;/p&gt;`
})
export class PoniesComponent {
  ponies: Array&lt;any&gt; = [{ name: 'Rainbow Dash' }, { name: 'Pinkie Pie' }];

  poniesAsJson: string;

  // inject the Pipe you want
  constructor(jsonPipe: JsonPipe) {
    // and then call the transform method on it
    this.poniesAsJson = jsonPipe.transform(this.ponies);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais prends garde&#160;: le <em>pipe</em> doit être ajouté aux <code>providers</code> de ton <code>@NgModule</code> (ou de ton <code>@Component</code>) pour pouvoir l&#8217;injecter et l&#8217;utiliser dans ton composant.</p>
</div>
<div class="paragraph">
<p>Comme l&#8217;utilisation programmatique est identique pour tous les <em>pipes</em>, je ne te montrerai désormais que des exemples HTML d&#8217;utilisation dans une interpolation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_slice">11.3. slice</h3>
<div class="paragraph">
<p>Si tu as envie de n&#8217;afficher qu&#8217;un sous-ensemble d&#8217;une collection, <code>slice</code> est ton ami.
Il fonctionne comme la méthode du même nom en JavaScript, et prend deux paramètres&#160;:
un indice de départ et, éventuellement, un indice de fin.
Pour passer un paramètre à un <em>pipe</em>, il faut lui ajouter un caractère <code>:</code> et le premier paramètre, puis éventuellement un autre <code>:</code> et le second argument, etc.</p>
</div>
<div class="paragraph">
<p>Cet exemple va afficher les deux premiers éléments de ma liste de poneys.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ ponies | slice:0:2 | json }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>slice</code> fonctionne non seulement avec des tableaux, mais aussi avec des chaînes de caractères, pour n&#8217;en afficher qu&#8217;une partie&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 'Ninja Squad' | slice:0:5 }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>et cela affichera seulement 'Ninja'.</p>
</div>
<div class="paragraph">
<p>Si tu passes à <code>slice</code> seulement un entier positif N, il prendra les éléments de N à la fin.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 'Ninja Squad' | slice:3 }}&lt;/p&gt;
&lt;!-- will display 'ja Squad' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu lui passes un entier négatif, il prendra les N <strong>derniers</strong> éléments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 'Ninja Squad' | slice:-5 }}&lt;/p&gt;
&lt;!-- will display 'Squad' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme nous l&#8217;avons vu, tu peux aussi passer à <code>slice</code> un indice de fin&#160;:
il prendra alors les éléments de l&#8217;indice de départ jusqu&#8217;à l&#8217;indice de fin.</p>
</div>
<div class="paragraph">
<p>Si cet indice est négatif, il prendra les éléments jusqu&#8217;à cet indice, mais en partant cette fois de la fin.</p>
</div>
<div class="paragraph">
<p>Comme tu peux utiliser <code>slice</code> dans n&#8217;importe quelle expression, tu peux aussi l&#8217;utiliser avec <code>NgFor</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-ponies',
  template: `&lt;div *ngFor="let pony of ponies | slice:0:2"&gt;{{ pony.name }}&lt;/div&gt;`
})
export class PoniesComponent {
  ponies: Array&lt;any&gt; = [
    { name: 'Rainbow Dash' },
    { name: 'Pinkie Pie' },
    { name: 'Fluttershy' }
  ];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le composant ne créera ici que deux <code>div</code>, pour les deux premiers poneys, parce qu&#8217;on a appliqué <code>slice</code> à la collection.</p>
</div>
<div class="paragraph">
<p>Le paramètre d&#8217;un <em>pipe</em> peut bien évidemment avoir une valeur dynamique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-ponies',
  template: `&lt;div *ngFor="let pony of ponies | slice:0:size"&gt;{{ pony.name }}&lt;/div&gt;`
})
export class PoniesComponent {
  size = 2;
  ponies = [
    { name: 'Rainbow Dash' },
    { name: 'Pinkie Pie' },
    { name: 'Fluttershy' }
  ];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici l&#8217;exemple parfait d&#8217;affichage dynamique où l&#8217;utilisateur décide combien d&#8217;éléments il veut voir affichés.</p>
</div>
<div class="paragraph">
<p>Note qu&#8217;il est aussi possible de stocker le résultat du <code>slice</code> dans une variable,
grâce à la syntaxe <code>as</code> introduite avec la version 4.0&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-ponies',
  template: `&lt;div *ngFor="let pony of ponies | slice:0:2 as total; index as i"&gt;
    {{ i+1 }}/{{ total.length }}: {{ pony.name }}
  &lt;/div&gt;`
})
export class PoniesComponent {
  ponies: Array&lt;any&gt; = [
    { name: 'Rainbow Dash' },
    { name: 'Pinkie Pie' },
    { name: 'Fluttershy' }
  ];
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_uppercase_majuscule">11.4. uppercase ("majuscule")</h3>
<div class="paragraph">
<p>Comme son nom le révèle merveilleusement aux bilingues, ce <em>pipe</em> transforme une chaîne de caractères dans sa version MAJUSCULE&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 'Ninja Squad' | uppercase }}&lt;/p&gt;
&lt;!-- will display 'NINJA SQUAD' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lowercase_minuscule">11.5. lowercase ("minuscule")</h3>
<div class="paragraph">
<p>Pendant du précédent, ce <em>pipe</em> transforme une chaîne de caractères dans sa version minuscule&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 'Ninja Squad' | lowercase }}&lt;/p&gt;
&lt;!-- will display 'ninja squad' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_titlecase_titre">11.6. titlecase ("titre")</h3>
<div class="paragraph">
<p>Angular&#160;4 ajoute un nouveau pipe <code>titlecase</code>.
Celui-ci change la première lettre de chaque mot en majuscule&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 'ninja squad' | titlecase }}&lt;/p&gt;
&lt;!-- will display 'Ninja Squad' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_number_nombre">11.7. number ("nombre")</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Attention</div>
</td>
<td class="content">
Les <em>pipes</em> suivants (<code>number</code>, <code>percent</code>, <code>currency</code>, <code>date</code>) sont des aides à l&#8217;internationalisation.
Ils ont été complètement revus avec la version 5.0 d&#8217;Angular,
et n&#8217;utilisent plus l&#8217;API Intl des navigateurs (source de nombreux problèmes).
L&#8217;équipe Angular a donc implémenté elle-même la logique d&#8217;internationalisation.
Les exemples suivants utilisent la nouvelle implémentation des <em>pipes</em> introduite avec Angular&#160;5,
sans s&#8217;attarder sur l&#8217;aspect internationalisation,
qui est couvert dans un
<a href="#internationalisation">chapitre</a>
dédié en fin d&#8217;ouvrage.
Les exemples utilisent ici la locale par défaut d&#8217;Angular,
à savoir <code>en-US</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce <em>pipe</em> permet de formater un nombre.</p>
</div>
<div class="paragraph">
<p>Il prend un seul paramètre, une chaîne de caractères, sous la forme <code>{integerDigits}.{minFractionDigits}-{maxFractionDigits}</code>, où chaque partie est facultative.
Ces parties indiquent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>combien de chiffres veut-on dans la partie entière;</p>
</li>
<li>
<p>combien de chiffres de précision minimale veut-on dans la partie décimale;</p>
</li>
<li>
<p>combien de chiffres de précision maximale veut-on dans la partie décimale.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quelques exemples, à commencer sans <em>pipe</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 12345 }}&lt;/p&gt;
&lt;!-- will display '12345' --&gt;
&lt;p&gt;{{ 12345 }}&lt;/p&gt;
&lt;!-- will display '12345' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Utiliser le <em>pipe</em> <code>number</code> va grouper la partie entière, même sans aucun paramètre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 12345 | number }}&lt;/p&gt;
&lt;!-- will display '12,345' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>integerDigits</code> va compléter à gauche avec des zéros si besoin&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">  &lt;p&gt;{{ 12345 | number:'6.' }}&lt;/p&gt;
  &lt;!-- will display '012,345' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>minFractionDigits</code> est la précision minimale de la partie décimale, donc il complétera avec des zéros à droite&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 12345 | number:'.2' }}&lt;/p&gt;
&lt;!-- will display '12,345.00' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>maxFractionDigits</code> est la précision maximale de la partie décimale. Il est obligatoire de donner une valeur à <code>minFractionDigits</code>, fut-elle 0, si tu veux l&#8217;utiliser. Si le nombre a plus de décimale que cette valeur, alors il sera arrondi&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 12345.13 | number:'.1-1' }}&lt;/p&gt;
&lt;!-- will display '12,345.1' --&gt;

&lt;p&gt;{{ 12345.16 | number:'.1-1' }}&lt;/p&gt;
&lt;!-- will display '12,345.2' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_percent_pourcent">11.8. percent ("pourcent")</h3>
<div class="paragraph">
<p>Sur le même principe, <code>percent</code> permet d&#8217;afficher&#8230;&#8203; un pourcentage&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 0.8 | percent }}&lt;/p&gt;
&lt;!-- will display '80%' --&gt;

&lt;p&gt;{{ 0.8 | percent:'.3' }}&lt;/p&gt;
&lt;!-- will display '80.000%' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_currency_devise_monétaire">11.9. currency ("devise monétaire")</h3>
<div class="paragraph">
<p>Comme on l&#8217;imagine, ce <em>pipe</em> permet de formater une somme d&#8217;argent dans la devise que tu veux.
Il faut lui fournir au moins un paramètre&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le code ISO de la devise ('EUR', 'USD'&#8230;&#8203;)</p>
</li>
<li>
<p>Optionnellement, une option indiquant si l&#8217;on souhaite afficher le symbole ('€', '$', 'CA$') avec <code>'symbol'</code> ou le code ISO avec <code>'code'</code>,
voire le symbole raccourci avec <code>'symbol-narrow'</code>.
Le symbole raccourci est par exemple <code>$</code>, alors que le symbole est <code>CA$</code> pour les dollars canadiens.
Par défaut, l&#8217;option est <code>'symbol'</code>.</p>
</li>
<li>
<p>Optionnellement, une chaîne de formatage du montant, avec la même syntaxe que <code>number</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ 10.6 | currency:'CAD' }}&lt;/p&gt;
&lt;!-- will display 'CA$10.60' --&gt;

&lt;p&gt;{{ 10.6 | currency:'CAD':'symbol-narrow' }}&lt;/p&gt;
&lt;!-- will display '$10.60' --&gt;

&lt;p&gt;{{ 10.6 | currency:'EUR':'code':'.3' }}&lt;/p&gt;
&lt;!-- will display 'EUR10.600' --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_date">11.10. date</h3>
<div class="paragraph">
<p>Le <em>pipe</em> <code>date</code> transforme une date en chaîne de caractères au format désiré.
Cette date peut être un objet <code>Date</code>, ou un nombre de millisecondes.
Le format spécifié peut être soit un <em>pattern</em> comme 'dd/MM/yyyy' ou 'MM-yy', soit un des formats prédéfinis comme 'short', 'longDate', etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ birthday | date:'dd/MM/yyyy' }}&lt;/p&gt;
&lt;!-- will display '16/07/1986' --&gt;

&lt;p&gt;{{ birthday | date:'longDate' }}&lt;/p&gt;
&lt;!-- will display 'July 16, 1986' --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Évidemment, tu peux aussi afficher la seule partie horaire d&#8217;une date&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;{{ birthday | date:'HH:mm' }}&lt;/p&gt;
&lt;!-- will display '15:30' --&gt;

&lt;p&gt;{{ birthday | date:'shortTime' }}&lt;/p&gt;
&lt;!-- will display '3:30 PM' --&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Pour plus d&#8217;informations sur l&#8217;internationalisation en général, et en particulier sur la manière
d&#8217;indiquer la langue à utiliser pour le formatage des nombres et des dates en particulier, tu peux te référer au chapitre
sur
<a href="#internationalisation">l&#8217;internationalisation</a>
.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_async">11.11. async</h3>
<div class="paragraph">
<p>Le <em>pipe</em> <code>async</code> permet d&#8217;afficher des données obtenues de manière asynchrone.
Sous le capot, il utilise <code>PromisePipe</code> ou <code>ObservablePipe</code> selon que tes données viennent d&#8217;une Promise ou d&#8217;un Observable.
Si tu ne te rappelles pas ce qu&#8217;est une Promise, c&#8217;est le moment de retourner au chapitre ES6. Et concernant l&#8217;Observable, nous y viendrons rapidement.</p>
</div>
<div class="paragraph">
<p>Un <em>pipe</em> <code>async</code> retourne une chaîne de caractères vide jusqu&#8217;à ce que les données deviennent disponibles (i.e. jusqu&#8217;à ce que la promise soit résolue, dans le cas d&#8217;une promise).
Une fois résolue, la valeur obtenue est retournée.
Et plus important, cela déclenche un cycle de détection de changement une fois la donnée obtenue.</p>
</div>
<div class="paragraph">
<p>L&#8217;exemple suivant utilise une Promise&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-greeting',
  template: `&lt;div&gt;{{ asyncGreeting | async }}&lt;/div&gt;`
})
export class GreetingComponent {
  asyncGreeting = new Promise(resolve =&gt; {
    // after 1 second, the promise will resolve
    window.setTimeout(() =&gt; resolve('hello'), 1000);
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux voir que le <em>pipe</em> <code>async</code> est appliqué à la variable <code>asyncGreeting</code>. Celle-ci est une promise, résolue après une seconde. Une fois la promise résolue, le navigateur affichera&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div&gt;hello&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Encore plus intéressant, si la source de données est un Observable,
alors le <em>pipe</em> se chargera de se désabonner de la source de données
à la destruction du composant (quand l&#8217;utilisateur naviguera vers une autre page, par exemple).</p>
</div>
<div class="paragraph">
<p>Et pour éviter de créer de multiples souscriptions à ton Observable
ou de multiples appels à ta promesse,
tu peux stocker le résultat de l&#8217;appel avec <code>as</code> (depuis la 4.0)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-user',
  template: `&lt;div *ngIf="asyncUser | async as user"&gt;{{ user.name }}&lt;/div&gt;`
})
export class UserComponent {
  asyncUser = new Promise(resolve =&gt; {
    // after 1 second, the promise will resolve
    window.setTimeout(() =&gt; resolve({ name: 'Cédric' }), 1000);
  });
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_créer_tes_propres_pipes">11.12. Créer tes propres <em>pipes</em></h3>
<div class="paragraph">
<p>On peut bien évidemment créer ses propres <em>pipes</em>.
C&#8217;est parfois très utile. En AngularJS&#160;1.x, on utilisait souvent des filtres customs. Par exemple, nous avions créé et utilisé dans plusieurs de nos applications un filtre permettant d&#8217;afficher le temps écoulé depuis une action utilisateur (genre "il y a 12 secondes", ou "il y a 3 jours").
Voyons comment faire la même chose en Angular&#160;!</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, nous devons créer une nouvelle classe.
Elle doit implémenter l&#8217;interface <code>PipeTransform</code>,
ce qui nous amène à écrire une méthode <code>tranform()</code>, celle qui fait tout le travail.</p>
</div>
<div class="paragraph">
<p>Ça n&#8217;a pas l&#8217;air très compliqué, alors essayons&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { PipeTransform, Pipe } from '@angular/core';

export class FromNowPipe implements PipeTransform {
  transform(value, args) {
    // do something here
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nous utiliserons la function <code>fromNow</code> de <a href="http://momentjs.com/docs/#/displaying/fromnow/">Moment.js</a> pour afficher combien de temps s&#8217;est écoulé depuis une date.</p>
</div>
<div class="paragraph">
<p>Tu peux installer Moment.js avec <code>NPM</code> si tu le souhaites&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">npm install moment</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les types nécessaires pour TypeScript sont déjà inclus dans la dépendance NPM,
le compilateur devrait donc être content sans action particulière de notre part.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { PipeTransform, Pipe } from '@angular/core';
import * as moment from 'moment';

export class FromNowPipe implements PipeTransform {
  transform(value, args) {
    return moment(value).fromNow();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, nous devons rendre disponible notre <em>pipe</em> dans l&#8217;application.
Pour cela, il y a un décorateur particulier à utiliser: <code>@Pipe</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { PipeTransform, Pipe } from '@angular/core';
import * as moment from 'moment';

@Pipe({ name: 'fromNow' })
export class FromNowPipe implements PipeTransform {
  transform(value, args) {
    return moment(value).fromNow();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le nom choisi sera celui qui nous permettra d&#8217;utiliser le <em>pipe</em> dans le template.
Pour pouvoir utiliser le <em>pipe</em> dans le template, la dernière chose à faire est d&#8217;ajouter le <em>pipe</em> dans les
<code>declarations</code> de ton <code>@NgModule</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@NgModule({
  imports: [BrowserModule],
  declarations: [AppComponent, RacesComponent, FromNowPipe],
  bootstrap: [AppComponent]
})
export class AppModule {
}</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">N.B.</div>
<div class="paragraph">
<p>A sa grande déception, mais à notre soulagement, le traducteur n&#8217;a pas réussi à placer le calembour "casser ta pipe" dans le chapitre.
N&#8217;hésite toutefois pas à te manifester en cas de faute de goût qui nous aurait échappée.</p>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/4/pipes">Pipes</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18px" title="Free"></span>&#160;!
Il est gratuit et fait partie de notre Pack pro,
où tu apprends à construire une application complète étape par étape.
Cet exercice te fait utiliser ton premier <em>pipe</em>.
Plus tard, l&#8217;exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/9/custom-pipe">Custom <em>pipe</em> avec Moment.js</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>
te fait construire ton premier <em>pipe</em> custom&#160;!</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reactive-programming">12. Programmation réactive</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ok_on_vous_rappellera">12.1. OK, on vous rappellera</h3>
<div class="paragraph">
<p>Tu as probablement entendu parler récemment de programmation réactive ou programmation fonctionnelle réactive (<em>reactive programming</em>).
C&#8217;est devenu assez populaire dans la plupart des plateformes, comme en .Net avec la bibliothèque <em>Reactive Extensions</em>,
qui est désormais disponible dans la plupart des langages (RxJava, RxJS, etc.).</p>
</div>
<div class="paragraph">
<p>La programmation réactive n&#8217;est pas quelque chose de fondamentalement nouveau.
C&#8217;est une façon de construire une application avec des événements, et d&#8217;y réagir (d&#8217;où le nom).
Les événements peuvent être combinés, filtrés, groupés, etc. en utilisant des fonctions comme <code>map</code>, <code>filter</code>, etc.
C&#8217;est pourquoi tu croiseras parfois le terme de "programmation fonctionnelle réactive" (<em>functional reactive programming</em>).
Mais pour être tout à fait précis, la programmation réactive n&#8217;est pas foncièrement fonctionnelle,
parce qu&#8217;elle n&#8217;inclue pas forcément les concepts d&#8217;immuabilité, l&#8217;absence d&#8217;effets de bord, etc.
Tu as probablement déjà réagi à des événements&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>dans le navigateur, en enregistrant des listeners sur des actions utilisateurs&#160;;</p>
</li>
<li>
<p>côté serveur, en traitement des événements d&#8217;un bus de messages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dans la programmation réactive, toute donnée entrante sera dans un flux.
Ces flux peuvent être écoutés, évidemment modifiés (filtrés, fusionnés, &#8230;&#8203;),
et même devenir un nouveau flux que l&#8217;on pourra aussi écouter.
Cette technique permet d&#8217;obtenir des programmes faiblement couplés&#160;:
tu n&#8217;as pas à te soucier des conséquences de ton appel de méthode,
tu te contentes de déclencher un événement, et toutes les parties de l&#8217;application intéressées réagiront en conséquence.
Et peut-être même qu&#8217;une de ces parties va aussi déclencher un événement, etc.</p>
</div>
<div class="paragraph">
<p>Maintenant, pourquoi est-ce que je parle de tout cela&#160;? Quel est le rapport avec Angular&#160;?</p>
</div>
<div class="paragraph">
<p>Et bien Angular est construit sur de la programmation réactive,
et nous utiliserons aussi cette technique pour certaines parties.
Répondre à une requête HTTP&#160;? Programmation réactive.
Lever un événement spécifique dans un de nos composants&#160;? Programmation réactive.
Gérer un changement de valeurs dans un de nos formulaires&#160;? Programmation réactive.</p>
</div>
<div class="paragraph">
<p>Alors arrêtons-nous quelques minutes sur ce sujet.
Rien de bien compliqué, mais c&#8217;est mieux d&#8217;avoir les idées claires.</p>
</div>
</div>
<div class="sect2">
<h3 id="_principes_généraux">12.2. Principes généraux</h3>
<div class="paragraph">
<p>Dans la programmation réactive, tout est un flux.
Un flux est une séquence ordonnée d&#8217;événements.
Ces événements représentent des valeurs (hé, regarde, une nouvelle valeur&#160;!), des erreurs (oups, ça a merdé), ou des terminaisons (voilà, j&#8217;ai fini).
Tous ces événements sont poussés par un producteur de données, vers un consommateur.
En tant que développeur, ton job sera de t&#8217;abonner (<em>subscribe</em>) à ces flux, i.e. définir un listener capable de gérer ces trois possibilités.
Un tel listener sera appelé un <em>observer</em>, et le flux, un <em>observable</em>.
Ces termes ont été définis il y longtemps, car ils constituent un <em>design pattern</em> bien connu&#160;: l'<em>observer</em>.</p>
</div>
<div class="paragraph">
<p>Ils sont différents des <em>promises</em>, même s&#8217;ils y ressemblent, car ils gèrent tous deux des valeurs asynchrones.
Mais un <em>observer</em> n&#8217;est pas une chose à usage unique&#160;: il continuera d&#8217;écouter jusqu&#8217;à ce qu&#8217;il reçoive un événement de terminaison.</p>
</div>
<div class="paragraph">
<p>Pour le moment, les <em>observables</em> ne font pas partie de la spécification ECMAScript officielle,
mais ils feront peut-être partie d&#8217;une version future, un effort en cours va dans ce sens.</p>
</div>
<div class="paragraph">
<p>Les <em>observables</em> sont très similaires à des tableaux.
Un tableau est une collection de valeurs, comme un <em>observable</em>.
Un <em>observable</em> ajoute juste la notion de valeur reportée dans le temps&#160;:
dans un tableau, toutes les valeurs sont disponibles immédiatement,
dans un <em>observable</em>, les valeurs viendront plus tard, par exemple dans plusieurs minutes.</p>
</div>
<div class="paragraph">
<p>La bibliothèque la plus populaire de programmation réactive dans l&#8217;écosystème JavaScript est <a href="https://github.com/Reactive-Extensions/RxJS">RxJS</a>.
Et c&#8217;est celle choisie par Angular.</p>
</div>
<div class="paragraph">
<p>Jetons-y un œil.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rxjs">12.3. RxJS</h3>
<div class="paragraph">
<p>Tout <em>observable</em>, comme un tableau, peut être transformé avec des fonctions classiques&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>take(n)</code> va piocher les n premiers éléments.</p>
</li>
<li>
<p><code>map(fn)</code> va appliquer la fonction <code>fn</code> sur chaque événement et retourner le résultat.</p>
</li>
<li>
<p><code>filter(predicate)</code> laissera passer les seuls événements qui répondent positivement au prédicat.</p>
</li>
<li>
<p><code>reduce(fn)</code> appliquera la fonction <code>fn</code> à chaque événement pour réduire le flux à une seule valeur unique.</p>
</li>
<li>
<p><code>merge(s1, s2)</code> fusionnera les deux flux.</p>
</li>
<li>
<p><code>subscribe(fn)</code> appliquera la fonction <code>fn</code> à chaque événement qu&#8217;elle reçoit.</p>
</li>
<li>
<p>et bien d&#8217;autres&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Si tu as un tableau de nombres que tu veux tous multiplier par 2,
filtrer ceux inférieurs à 5, et les afficher enfin, tu peux écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">[1, 2, 3, 4, 5]
  .map(x =&gt; x * 2)
  .filter(x =&gt; x &gt; 5)
  .forEach(x =&gt; console.log(x)); // 6, 8, 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>RxJS nous permet de construire un <em>observable</em> à partir d&#8217;un tableau.
Et nous pouvons ainsi faire exactement la même chose&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { from } from 'rxjs';
import { filter, map } from 'rxjs/operators';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">from([1, 2, 3, 4, 5]).pipe(
  map(x =&gt; x * 2),
  filter(x =&gt; x &gt; 5)
).subscribe(x =&gt; console.log(x)); // 6, 8, 10</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">RxJS 5.5+</div>
<div class="paragraph">
<p>Tu as peut-être vu du code RxJS ressemblant à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">Observable.of([1, 2, 3, 4, 5])
 .map(i =&gt; i * 2)
 .filter(i =&gt; i &gt;5)
 .subscribe(i=&gt; console.log(i));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depuis la version 5.5, RxJS recommande d&#8217;utiliser les opérateurs "pipeables",
passés en arguments à la méthode <code>pipe()</code>,
et des fonctions plutôt que des méthodes statiques pour créer les observables.
Cela veut dire que l&#8217;on a plus à importer les opérateurs avec <code>import 'rxjs/add/operators/map'</code>,
et l&#8217;on peut donc utiliser les imports "classiques".
Tu peux en apprendre plus sur le sujet dans la <a href="https://github.com/ReactiveX/rxjs/blob/master/doc/pipeable-operators.md">documentation officielle</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Mais un <em>observable</em> est bien plus qu&#8217;une simple collection.
C&#8217;est une collection asynchrone, dont les événements arrivent au cours du temps.
Les événements dans le navigateur sont un bon exemple&#160;: ils arriveront au cours du temps,
donc ils sont de bons candidats pour l&#8217;utilisation d&#8217;un <em>observable</em>.
Voici un exemple avec jQuery&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { fromEvent } from 'rxjs';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const input = $('input');

fromEvent(input, 'keyup')
  .subscribe(() =&gt; console.log('keyup!'));

input.trigger('keyup'); // logs "keyup!"
input.trigger('keyup'); // logs "keyup!"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux construire des <em>observables</em> depuis une requête AJAX,
un événement navigateur, une réponse de Websocket, une <em>promise</em>,
et tout ce que tu peux imaginer.
Et depuis une fonction évidemment&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const observable = Observable.create((observer) =&gt; observer.next('hello'));

observable.subscribe((value) =&gt; console.log(value));
// logs "hello"</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Observable.create</code> reçoit une fonction qui émet des événements sur son paramètre <code>observer</code>.
 Ici, elle n&#8217;émet qu&#8217;un seul événement pour la démonstration.</p>
</div>
<div class="paragraph">
<p>Tu peux aussi traiter les erreurs, parce qu&#8217;un <em>observable</em> peut partir en sucette.
La méthode <code>subscribe</code> accepte un deuxième callback, consacré à la gestion des erreurs.</p>
</div>
<div class="paragraph">
<p>Ici, la méthode <code>map</code> lève une exception, donc le deuxième callback de la méthode <code>subscribe</code> va le tracer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">range(1, 5).pipe(
  map(x =&gt; {
    if (x % 2 === 1) {
      throw new Error('something went wrong');
    } else {
      return x;
    }
  }),
  filter(x =&gt; x &gt; 5)
).subscribe(x =&gt; console.log(x), error =&gt; console.log(error)); // something went wrong</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une fois que l'<em>observable</em> sera terminé, il enverra un événement de terminaison, que tu peux détecter avec un troisième callback.
Ici, la méthode <code>range</code> utilisée pour générer des événements va boucler de 1 à 5, puis émettre un signal de terminaison&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">range(1, 5).pipe(
  map(x =&gt; x * 2),
  filter(x =&gt; x &gt; 5)
).subscribe(x =&gt; console.log(x), error =&gt; console.log(error), () =&gt; console.log('done'));
// 6, 8, 10, done</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu peux faire plein plein de trucs avec un <em>observable</em>&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>transformation (delaying, debouncing&#8230;&#8203;)</p>
</li>
<li>
<p>combinaison (merge, zip, combineLatest&#8230;&#8203;)</p>
</li>
<li>
<p>filtrage (distinct, filter, last&#8230;&#8203;)</p>
</li>
<li>
<p>mathématique (min, max, average, reduce&#8230;&#8203;)</p>
</li>
<li>
<p>conditions (amb, includes&#8230;&#8203;)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il nous faudrait un livre entier pour en venir à bout&#160;!
Si tu veux en savoir plus, jette un œil au livre <a href="https://xgrommx.github.io/rx-book/index.html">Rx Book</a>.
Il contient la meilleure introduction que j&#8217;ai vue sur le sujet.
Et si tu veux avoir une chouette représentation visuelle de chaque fonction, va sur <a href="http://rxmarbles.com/">rxmarbles.com</a>.</p>
</div>
<div class="paragraph">
<p>Maintenant, regardons comment les <em>observables</em> seront utilisés dans Angular.</p>
</div>
</div>
<div class="sect2">
<h3 id="_programmation_réactive_en_angular">12.4. Programmation réactive en Angular</h3>
<div class="paragraph">
<p>Angular utilise RxJS, et nous permet aussi de l&#8217;utiliser.
Le framework propose un adaptateur autour de l&#8217;objet <code>Observable</code>&#160;: <code>EventEmitter</code>.
<code>EventEmitter</code> a une méthode <code>subscribe()</code> pour réagir aux événements,
et cette méthode reçoit trois paramètres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une méthode pour réagir aux événements.</p>
</li>
<li>
<p>une méthode pour réagir aux erreurs.</p>
</li>
<li>
<p>une méthode pour réagir à la terminaison.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Un <code>EventEmitter</code> peut émettre un événement
avec la méthode <code>emit()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const emitter = new EventEmitter();

emitter.subscribe(
  value =&gt; console.log(value),
  error =&gt; console.log(error),
  () =&gt; console.log('done')
);

emitter.emit('hello');
emitter.emit('there');
emitter.complete();

// logs "hello", then "there", then "done"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que la méthode <code>subscribe</code> retourne un objet <em>subscription</em>,
avec une méthode <code>unsubscribe</code> pour se désabonner.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const emitter = new EventEmitter();

const subscription = emitter.subscribe(
  value =&gt; console.log(value),
  error =&gt; console.log(error),
  () =&gt; console.log('done')
);

emitter.emit('hello');
subscription.unsubscribe(); // unsubscribe
emitter.emit('there');

// logs "hello" only</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant qu&#8217;on en sait un peu plus sur la programmation réactive, voyons l&#8217;usage qu&#8217;en fait Angular.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/5/observables">Observables</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACN1BMVEVMaXF1aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF51aF6CcGNyZVxFQz9FQz9FQz9FQz+OeGi4kni0j3ZjWlJIRUFFQz9FQz+ghHC6lHqxj3eYfmx5a2BFQz9FQz9FQz9gWFGXfWtnXVROSkVsYVitjHV1aF5FQz9oW1GbfmqqiHFMSENRTEeKeGv0zK/wyKvPqI1TTUZbUkpdVk+finr81LbTrJFFQz9mXFS5nor40LLCnIJ+bmJyZlzSspvsxKdFQz9LSEPauaDLpIm2kXhFQz9XUUvnwKOPeWlgWFCGdmm+mH6khnFFQz9FQz+Xg3TfuJzJrJWGc2VaU01PSUNmWU51YlRdU0qwl4VKRkFrXFCRdWGUd2OmhW63knhiV05qXFGdgGvjvKDbtJhFQz9YUEiIb12OdmRxYVWLdmejg2xTTEWDbFuZe2ayjnWkhW94ZllvY1qWeWRUTUarinN+aVmef2mVe2iTe2pwX1Kohm+piXNaUkqMcl+tinKAbF1eVEpiVkyRdWG1kHeRdWGRdWGHcWCRdWGzj3aRdWGRdWGggWyXe2ePdGNAPDhCQ0NWV1c5OTmRdWF1YlUvLy+/w8PJzc22ubmGbl6RdWGph3FMTU2RdWFsW1CGiIiriHFSSEJaT0aRdWGggWp9aFmRdWE4NTSxjnWRdWGRdWGRdWGRdWGwjHSbfWd/aFhIQTxaTkU7ODVsW055ZFVORT9BPDhyX1GLcV5USUI1MzK6wa3dAAAAr3RSTlMAYIBAj/+/EJ/PcO8wUP/fYIBwMP///////9///////yBQv3D//////9/P////////////////////7///////////EP////+f/////////0Cv////////////////////////////j////////////////////////////////////2D/YP8w7/8g/xDP/////////5////////9w//9Q//////+v//+A//9Av9+PTccICgAABmhJREFUeAHs1YVC5ToUheEgC5cTfB827u4Q3N3d3e8dg3F796nQCe7t2Pme4G+brIqA31dAQEBAQFBwcIj4DYTCEBYuHOERACKjwoXXomGKjhFnwmCJjhUeA+JgiPdJmZAo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" alt="Free" width="18px" title="Free"></span>&#160;!
Il est gratuit et fait partie de notre Pack pro,
où tu apprends à construire une application complète étape par étape.
Dans cet exercice, tu transformeras le <code>RaceService</code> pour le rendre réactif&#160;!</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-components">13. Créer des composants et directives</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction">13.1. Introduction</h3>
<div class="paragraph">
<p>Jusque-là, on a surtout vu des petits composants.
Et bien sûr, tu peux imaginer que dans la vraie vie,
comme ils sont la structure de nos applications, ils seront bien plus complexes que ceux qu&#8217;on a croisés.
Comment leur fournir des données&#160;? Comment gérer leur cycle de vie&#160;?
Quelles sont les bonnes pratiques pour construire ses composants&#160;?</p>
</div>
<div class="paragraph">
<p>Et les directives&#160;: c&#8217;est quoi, pourquoi, comment&#160;?</p>
</div>
</div>
<div class="sect2">
<h3 id="_directives">13.2. Directives</h3>
<div class="paragraph">
<p>Une directive est très semblable à un composant, sauf qu&#8217;elle n&#8217;a pas de template.
En fait, la classe <code>Component</code> hérite de la classe <code>Directive</code> dans le framework.</p>
</div>
<div class="paragraph">
<p>Il fait donc sens de commencer par étudier les directives, car tout ce que nous
verrons pour les directives s&#8217;appliquera également pour les composants.
On regardera les options de configuration qui te seront le plus utiles.
Les options plus exotiques seront réservées à un chapitre ultérieur,
quand tu maîtriseras déjà les bases.</p>
</div>
<div class="paragraph">
<p>Comme pour un composant, ta directive sera annotée d&#8217;un décorateur, mais
au lieu de <code>@Component</code>, ce sera <code>@Directive</code> (logique).</p>
</div>
<div class="paragraph">
<p>Les directives sont des briques minimalistes. On peut les concevoir comme des
décorateurs pour ton HTML&#160;: elles attacheront du comportement aux éléments du DOM.
Et tu peux avoir plusieurs directives appliquées à un même élément.</p>
</div>
<div class="paragraph">
<p>Une directive doit avoir un sélecteur CSS, qui indique au framework où l&#8217;activer
dans notre template.</p>
</div>
<div class="sect3">
<h4 id="_sélecteurs">13.2.1. Sélecteurs</h4>
<div class="paragraph">
<p>Les sélecteurs peuvent être de différents types&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un élément, comme c&#8217;est généralement le cas pour les composants&#160;: <code>footer</code>.</p>
</li>
<li>
<p>une classe, mais c&#8217;est plutôt rare&#160;: <code>.alert</code>.</p>
</li>
<li>
<p>un attribut, ce qui est le plus fréquent pour une directive&#160;: <code>[color]</code>.</p>
</li>
<li>
<p>un attribut avec une valeur spécifique&#160;: <code>[color=red]</code>.</p>
</li>
<li>
<p>une combinaison de ceux précédents&#160;:
<code>footer[color=red]</code> désignera un élément <code>footer</code> avec un attribut <code>color</code> à la valeur <code>red</code>.
<code>[color],footer.alert</code> désignera n&#8217;importe quel élément avec un attribut <code>color</code>, ou (<code>,</code>) un élément <code>footer</code> portant la classe CSS <code>alert</code>.
<code>footer:not(.alert)</code> désignera un élément <code>footer</code> qui ne porte pas (<code>:not()</code>) la classe CSS <code>alert</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Par exemple, voici une directive très simple qui ne fait rien mais est activée
si un élément possède l&#8217;attribut <code>doNothing</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[doNothing]'
})
export class DoNothingDirective {

  constructor() {
    console.log('Do nothing directive');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette directive sera activée sur un composant comme <code>TestComponent</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-test',
  template: '&lt;div doNothing&gt;Click me&lt;/div&gt;'
})
export class TestComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un sélecteur plus complexe pourrait ressembler à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: 'div.loggable[logText]:not([notLoggable=true])'
})
export class ComplexSelectorDirective {

  constructor() {
    console.log('Complex selector directive');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Celui-là désignera tous les éléments <code>div</code> portant la class <code>loggable</code> et un
attribut <code>logText</code>, mais n&#8217;ayant pas d&#8217;attribut <code>notLoggable</code> avec la valeur <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Ainsi, ce template déclenchera la directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div class="loggable" logText="text"&gt;Hello&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais celui-là, non&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div class="loggable" logText="text" notLoggable="true"&gt;Hello&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais pour être honnête, si tu en es à écrire quelque chose comme cela, c&#8217;est
qu&#8217;il y a un truc qui ne va pas&#160;! :)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Les sélecteurs CSS à base de descendants, de frères, ou d&#8217;identifiants,
et les pseudo-sélecteurs (autres que <code>:not</code>) ne sont pas supportés.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Ne nomme pas tes sélecteurs avec un préfixe <code>bind-</code>, <code>on-</code>, <code>let-</code> ou <code>ref-</code>&#160;:
ils ont une autre signification pour le parseur, car ils font partie de la syntaxe
canonique des templates.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Bien&#160;! Maintenant on sait déclarer une directive.
Il est temps d&#8217;en faire une qui sert vraiment à quelque chose&#160;!</p>
</div>
</div>
<div class="sect3">
<h4 id="_entrées">13.2.2. Entrées</h4>
<div class="paragraph">
<p>Le binding de données est généralement une étape capitale du travail de création
d&#8217;un composant ou d&#8217;une directive.
À chaque fois que tu voudras qu&#8217;un composant fournisse des données à l&#8217;un de ses
enfants, tu devras utiliser du binding de propriété.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, nous allons définir toutes les propriétés qui acceptent du binding
de données, grâce à l&#8217;attribut <code>inputs</code> du décorateur <code>@Directive</code>.
Cet attribut accepte un tableau de chaînes de caractères, chacune sous la forme
<code>property: binding</code>, où <code>property</code> désigne la propriété de l&#8217;instance du composant,
et <code>binding</code> une propriété du DOM qui contiendra l&#8217;expression.</p>
</div>
<div class="paragraph">
<p>Par exemple, cette directive binde la propriété <code>logText</code> du DOM sur la propriété
<code>text</code> de l&#8217;instance de directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[loggable]',
  inputs: ['text: logText']
})
export class SimpleTextDirective {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la propriété n&#8217;existe pas dans ta directive, elle est créée.
Et, à chaque fois que l&#8217;entrée est modifiée, la propriété est mise à jour automatiquement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div loggable logText="Some text"&gt;Hello&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux être notifié quand la propriété est modifiée, tu peux ajouter un setter à ta directive.
Le <em>setter</em> sera appelé lors de chaque modification de la propriété <code>logText</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[loggable]',
  inputs: ['text: logText']
})
export class SimpleTextWithSetterDirective {

  set text(value) {
    console.log(value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ainsi, si on l&#8217;utilise&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div loggable logText="Some text"&gt;Hello&lt;/div&gt;
// our directive will log "Some text"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y a également une autre façon de faire que l&#8217;on verra dans quelques minutes.</p>
</div>
<div class="paragraph">
<p>Ici, le texte est statique, mais il pourrait évidemment être une valeur dynamique,
avec une interpolation&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div loggable logText="{{ expression }}"&gt;Hello&lt;/div&gt;
// our directive will log the value of 'expression' in the component</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou avec la syntaxe crochets&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div loggable [logText]="expression"&gt;Hello&lt;/div&gt;
// our directive will log the value of 'expression' in the component</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est un des chouettes avantages de la nouvelle syntaxe de template&#160;:
en tant que développeur de composant, tu n&#8217;as pas à te préoccuper de la façon
dont ton composant sera utilisé, tu définis juste quelles propriétés peuvent
être bindées (si tu as écris un peu d&#8217;AngularJS&#160;1.x, tu sais que c&#8217;était
différent avec les notations <code>@</code> et <code>=</code>).</p>
</div>
<div class="paragraph">
<p>Tu peux aussi utiliser des <em>pipes</em> dans tes bindings&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div loggable [logText]="expression | uppercase"&gt;Hello&lt;/div&gt;
// our directive will log the value of 'expression' in the component in uppercase</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux binder une propriété du DOM sur un attribut de ta directive qui porte
le même nom, tu peux écrire simplement <code>property</code> au lieu de <code>property: binding</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[loggable]',
  inputs: ['logText']
})
export class SameNameInputDirective {

  set logText(value) {
    console.log(value);
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div loggable logText="Hello"&gt;Hello&lt;/div&gt;
// our directive will log "Hello"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y a une autre façon de déclarer une entrée dans ta directive&#160;: avec le décorateur <code>@Input</code>.
Je l&#8217;aime bien, et le guide de style officiel indique de préférer cette façon de faire,
alors beaucoup d&#8217;exemples vont désormais l&#8217;utiliser.</p>
</div>
<div class="paragraph">
<p>Les exemples ci-dessus peuvent être ainsi réécrits&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[loggable]'
})
export class InputDecoratorDirective {

  @Input('logText') text: string;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou, si la propriété et le binding ont le même nom&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[loggable]'
})
export class SameNameInputDecoratorDirective {

  @Input() logText: string;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va fonctionner mais avoir un champ et un setter avec le même nom va faire crier le compilateur TypeScript.
Une façon de réparer cela (si vous avez besoin du setter, ce qui n&#8217;est pas toujours le cas)
est d&#8217;utiliser le décorateur <code>@Input</code> directement sur le setter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[loggable]'
})
export class InputDecoratorOnSetterDirective {

  @Input('logText')
  set text(value) {
    console.log(value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>et si le setter et le binding ont le même nom&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[loggable]'
})
export class SameNameInputDecoratorOnSetterDirective {

  @Input()
  set logText(value) {
    console.log(value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les entrées sont parfaites pour passer des données d&#8217;un élément supérieur
à un élément inférieur. Par exemple, si tu veux avoir un composant affichant
une liste de poneys, il est probable que tu auras un composant supérieur
contenant la liste, et un autre composant inférieur affichant un poney&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-pony',
  template: `&lt;div&gt;{{ pony.name }}&lt;/div&gt;`
})
export class PonyComponent {
  @Input() pony: Pony;
}

@Component({
  selector: 'ns-ponies',
  template: `&lt;div&gt;
    &lt;h2&gt;Ponies&lt;/h2&gt;
    // the pony is handed to PonyComponent via [pony]="currentPony"
    &lt;ns-pony *ngFor="let currentPony of ponies" [pony]="currentPony"&gt;&lt;/ns-pony&gt;
  &lt;/div&gt;`
})
export class PoniesComponent {
  ponies: Array&lt;Pony&gt; = [
    { id: 1, name: 'Rainbow Dash' },
    { id: 2, name: 'Pinkie Pie' }
  ];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>OK, et maintenant, comment passe-t-on des données vers le haut&#160;?
On ne peut pas utiliser des propriétés pour passer des données de <code>PonyComponent</code> vers
<code>PoniesComponent</code>. Mais on peut utiliser des événements&#160;!</p>
</div>
</div>
<div class="sect3">
<h4 id="_sorties">13.2.3. Sorties</h4>
<div class="paragraph">
<p>Retournons à notre exemple précédent, et disons que nous voudrions sélectionner
un poney en cliquant dessus, et en informer le composant parent. Pour cela,
on utilisera un événement spécifique.</p>
</div>
<div class="paragraph">
<p>C&#8217;est quelque chose de fondamental.
En Angular, les données entrent dans un composant via des propriétés, et en
sortent via des événements.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag f4d6fe44e51a857224e0c6217edf829d" width="200" height="252">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag 0f31339eb56f40e6d4a51d6790f47b69" width="220" height="252">
</div>
</div>
<div class="paragraph">
<p>Tu te rappelles du dernier chapitre sur la programmation réactive&#160;?
Cool, parce que ça va devenir très utile&#160;!
Les événements spécifiques sont émis grâce à un <code>EventEmitter</code>,
et doivent être déclarés dans le décorateur, via l&#8217;attribut <code>outputs</code>.
Comme l&#8217;attribut <code>inputs</code>, il accepte un tableau contenant la liste des
événements que ta directive ou ton composant peut déclencher.
Et, comme pour les inputs, on préfère généralement le décorateur <code>@Output()</code>.</p>
</div>
<div class="paragraph">
<p>Disons qu&#8217;on veut émettre un événement appelé <code>ponySelected</code>.
Il y aura trois étapes à réaliser&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>déclarer la sortie dans le décorateur&#160;;</p>
</li>
<li>
<p>créer un <code>EventEmitter</code>&#160;;</p>
</li>
<li>
<p>et émettre un événement quand le poney est sélectionné.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-pony',
  // the method `selectPony()` will be called on click
  template: `&lt;div (click)="selectPony()"&gt;{{ pony.name }}&lt;/div&gt;`
})
export class SelectablePonyComponent {

  @Input() pony: Pony;

  // we declare the custom event as an output,
  // the EventEmitter is used to emit the event
  @Output() ponySelected = new EventEmitter&lt;Pony&gt;();

  /**
   * Selects a pony when the component is clicked.
   * Emits a custom event.
   */
  selectPony() {
    this.ponySelected.emit(this.pony);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour l&#8217;utiliser dans le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony [pony]="pony" (ponySelected)="betOnPony($event)"&gt;&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple ci-dessus, chaque fois que l&#8217;utilisateur clique sur le nom d&#8217;un poney,
un événement <code>ponySelected</code> est émis, avec le poney qui en constitue la valeur
(le paramètre de la méthode <code>emit()</code>).
Le composant parent écoute cet événement, comme tu peux le voir dans le template,
et il appellera sa méthode <code>betOnPony</code> avec la valeur de l&#8217;événement <code>$event</code>.
<code>$event</code> est la syntaxe qui doit être utilisée pour accéder à l&#8217;événement déclenché&#160;:
dans notre cas, ce sera un poney.</p>
</div>
<div class="paragraph">
<p>Le composant parent doit ensuite implémenter une méthode <code>betOnPony()</code>, qui sera appelée
avec le poney sélectionné&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">betOnPony(pony) {
  // do something with the pony
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux, tu peux définir un nom d&#8217;événement différent de celui choisi par
l&#8217;émetteur, avec la syntaxe <code>emitter: event</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-pony',
  template: `&lt;div (click)="selectPony()"&gt;{{ pony.name }}&lt;/div&gt;`
})
export class OtherSelectablePonyComponent {

  @Input() pony: Pony;
  // the emitter is called `emitter`
  // and the event `ponySelected`
  @Output('ponySelected') emitter = new EventEmitter&lt;Pony&gt;();

  selectPony() {
    this.emitter.emit(this.pony);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cycle_de_vie">13.2.4. Cycle de vie</h4>
<div class="paragraph">
<p>Tu peux avoir besoin que ta directive réagisse à certains moments de sa vie.</p>
</div>
<div class="paragraph">
<p>C&#8217;est un sujet plutôt avancé, et tu n&#8217;en auras pas besoin tous les jours, alors je vais aller vite.</p>
</div>
<div class="paragraph">
<p>Il y a cependant un point important à comprendre,
qui te sauvera pas mal de temps si tu l&#8217;intègres bien&#160;:
<strong>les entrées d&#8217;un composant ne sont pas encore évaluées dans son constructeur</strong>.</p>
</div>
<div class="paragraph">
<p>Cela signifie qu&#8217;un composant comme celui-ci ne fonctionnera pas&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[undefinedInputs]'
})
export class UndefinedInputsDirective {

  @Input() pony: string;

  constructor() {
    console.log(`inputs are ${this.pony}`);
    // will log "inputs are undefined", always
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux accéder à la valeur d&#8217;une entrée,
pour par exemple charger des données complémentaires depuis un serveur,
il te faudra utiliser une phase du cycle de vie.</p>
</div>
<div class="paragraph">
<p>Il y a plusieurs phases accessibles, chacune avec ses spécificités propres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ngOnChanges</code> sera la première appelée quand la valeur d&#8217;une propriété bindée est modifiée.
Elle recevra une map <code>changes</code>, contenant les valeurs courante et précédente du binding,
emballées dans un <code>SimpleChange</code>.
Elle ne sera pas appelée s&#8217;il n&#8217;y a pas de changement.</p>
</li>
<li>
<p><code>ngOnInit</code> sera appelée une seule fois après le premier changement (alors que <code>ngOnChanges</code> est appelée à chaque changement).
Cela en fait la phase parfaite pour du travail d&#8217;initialisation, comme son nom le laisse à penser.</p>
</li>
<li>
<p><code>ngOnDestroy</code> est appelée quand le composant est supprimé.
Utile pour y faire du nettoyage.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>D&#8217;autres phases sont disponibles, mais pour des cas d&#8217;usage plus avancés&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ngDoCheck</code> est légèrement différente. Si elle est présente, elle sera appelée à chaque cycle de détection de changements,
redéfinissant l&#8217;algorithme par défaut de détection, qui inspecte les différences pour chaque valeur de propriété bindée.
Cela signifie que si une propriété au moins est modifiée, le composant est considéré modifié par défaut,
et ses enfants seront inspectés et réaffichés.
Mais tu peux redéfinir cela si tu sais que la modification de certaines entrées n&#8217;a pas de conséquence.
Cela peut être utile si tu veux accélérer le cycle de détection de changements en n&#8217;inspectant que le minimum,
mais en règle générale tu ne devrais pas avoir à le faire.</p>
</li>
<li>
<p><code>ngAfterContentInit</code> est appelée quand tous les contenus projetés du composant ont été vérifiés pour la première fois.</p>
</li>
<li>
<p><code>ngAfterContentChecked</code> est appelée quand tous les contenus projetés du composant ont été vérifiés,
même s&#8217;ils n&#8217;ont pas changé.</p>
</li>
<li>
<p><code>ngAfterViewInit</code> est appelée quand tous les bindings du template ont été vérifiés pour la première fois.</p>
</li>
<li>
<p><code>ngAfterViewChecked</code> est appelée quand tous les bindings du template ont été vérifiés,
même s&#8217;ils n&#8217;ont pas changé.
Cela peut être utile si ton composant ou ta directive attend qu&#8217;un élément particulier soit disponible pour en faire quelque chose,
par exemple mettre le focus dessus.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Si cela semble un peu difficile à comprendre, pas d&#8217;inquiétude&#160;: continue la lecture,
et on reviendra sur le sujet plus en détails dans le
<a href="#advanced-components">chapitre Composants et directives avancés</a>
un peu plus loin.</p>
</div>
<div class="paragraph">
<p>Notre exemple précédent fonctionnera mieux en utilisant <code>ngOnInit</code>.
Angular appelle la méthode <code>ngOnInit()</code> si elle est présente,
pour que tu n&#8217;aies qu&#8217;à l&#8217;implémenter dans ta directive.
Si tu utilises TypeScript pour écrire ton application, tu peux bénéficier de
l&#8217;interface <code>OnInit</code> qui t&#8217;oblige à implémenter cette méthode&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[initDirective]'
})
export class OnInitDirective implements OnInit {

  @Input() pony: string;

  ngOnInit() {
    console.log(`inputs are ${this.pony}`);
    // inputs are not undefined \o/
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant on a accès à nos entrées&#160;!</p>
</div>
<div class="paragraph">
<p>Si tu veux faire un truc lors de chaque changement de la propriété, utilise <code>ngOnChanges</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[changeDirective]'
})
export class OnChangesDirective implements OnChanges {

  @Input() pony: string;

  ngOnChanges(changes: SimpleChanges) {
    const ponyValue = changes['pony'];
    console.log(`changed from ${ponyValue.previousValue} to ${ponyValue.currentValue}`);
    console.log(`is it the first change? ${ponyValue.isFirstChange()}`);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le paramètre <code>changes</code> est une map, dont les clés sont les noms de bindings,
et les valeurs un objet <code>SimpleChange</code> avec deux attributs (la valeur précédente et la valeur courante),
ainsi qu&#8217;une méthode <code>isFirstChange()</code> afin de savoir si c&#8217;est le premier changement.</p>
</div>
<div class="paragraph">
<p>Tu peux aussi utiliser un <em>setter</em> si tu veux réagir sur le changement d&#8217;un seul de tes bindings.
L&#8217;exemple suivant produira le même affichage que le précédent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[setterDirective]'
})
export class SetterDirective {

  private ponyModel: string;

  @Input()
  set pony(newPony) {
    console.log(`changed from ${this.ponyModel} to ${newPony}`);
    this.ponyModel = newPony;
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ngOnChanges</code> est encore plus pratique si tu dois surveiller plusieurs bindings en même temps.
Elle ne sera invoquée que si au moins un binding a changé,
et elle ne contiendra que les propriétés modifiées.</p>
</div>
<div class="paragraph">
<p>La phase <code>ngOnDestroy</code> est parfaite pour nettoyer le composant. Par exemple, pour
y annuler les tâches de fond.
Ici <code>OnDestroyDirective</code> trace "hello" toute les secondes quand elle est créée.
Quand le composant sera supprimé de la page, on veut arrêter le <code>setInterval</code> pour
éviter des fuites mémoire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[destroyDirective]'
})
export class OnDestroyDirective implements OnDestroy {

  sayHello: number;

  constructor() {
    this.sayHello = window.setInterval(() =&gt; console.log('hello'), 1000);
  }

  ngOnDestroy() {
    window.clearInterval(this.sayHello);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu ne fais pas cela, tu auras un thread traçant "hello" jusqu&#8217;à la fin de l&#8217;application (ou son plantage)&#8230;&#8203;</p>
</div>
</div>
<div class="sect3">
<h4 id="_providers">13.2.5. Providers</h4>
<div class="paragraph">
<p>On a déjà parlé des providers dans le
<a href="#dependency-injection">chapitre Injection de dépendances</a>
.
Cet attribut permet de déclarer des services qui seront injectables dans la directive courante
et ses enfants.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[providersDirective]',
  providers: [PoniesService]
})
export class ProvidersDirective {

  constructor(poniesService: PoniesService) {
    const ponies = poniesService.list();
    console.log(`ponies are: ${ponies}`);
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_composants">13.3. Composants</h3>
<div class="paragraph">
<p>Un composant n&#8217;est pas vraiment différent d&#8217;une directive&#160;:
il a simplement deux attributs supplémentaires, optionnels, et <strong>doit</strong> avoir
une vue associée.
Il n&#8217;apporte pas beaucoup d&#8217;attributs nouveaux comparés à la directive.</p>
</div>
<div class="sect3">
<h4 id="_providers_limités_à_la_vue">13.3.1. Providers limités à la vue</h4>
<div class="paragraph">
<p>On a vu que tu peux spécifier les services injectables via <code>providers</code>.
<code>viewProviders</code> est similaire, mais les providers donnés ne seront disponibles
que dans la vue du composant courant, pas dans ses enfants.</p>
</div>
</div>
<div class="sect3">
<h4 id="_template_url_de_template">13.3.2. Template / URL de template</h4>
<div class="paragraph">
<p>La caractéristique principale d&#8217;un <code>@Component</code> est d&#8217;avoir un template,
alors qu&#8217;une directive n&#8217;en a pas.
Tu peux soit déclarer ton template en ligne, avec l&#8217;attribut <code>template</code>, ou
utiliser une URL pour le placer dans un fichier séparé avec <code>templateURL</code>
(mais tu ne peux pas définir les deux simultanément).</p>
</div>
<div class="paragraph">
<p>En règle générale, si ton template est petit (1-2 lignes),
c&#8217;est parfaitement acceptable de le garder en ligne.
Quand il commence à grossir, le déplacer dans son propre fichier est une bonne
façon d&#8217;éviter l&#8217;encombrement de ton composant.</p>
</div>
<div class="paragraph">
<p>Tu peux utiliser un chemin absolu pour ton URL, ou un relatif, ou même une URL HTTP complète.</p>
</div>
<div class="paragraph">
<p>Quand le composant est chargé, Angular résout l&#8217;URL et essaye de charger le template.
S&#8217;il y parvient, le template deviendra le <em>Shadow Root</em> du composant, et ses expressions seront évaluées.</p>
</div>
<div class="paragraph">
<p>Si j&#8217;ai un gros composant, je place en général le template dans un fichier séparé du même répertoire,
et j&#8217;utilise une URL relative pour le charger.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-templated-pony',
  templateUrl: 'components/pony/templated-pony.html'
})
export class TemplatedPonyComponent {
  @Input() pony: any;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu utilises une URL relative, l&#8217;URL sera résolue en utilisant l&#8217;URL de la base de ton application.
Cette URL peut être un peu lourde, car si ton composant est dans un répertoire <code>components/pony</code>,
ton URL de template sera <code>components/pony/pony.html</code>.</p>
</div>
<div class="paragraph">
<p>Mais tu peux faire légèrement mieux si tu packages ton application avec des modules CommonJS,
en utilisant la propriété <code>moduleId</code>.
Sa valeur doit être <code>module.id</code>, une valeur qui sera remplacée par CommonJS a l&#8217;éxecution.
Angular peut alors utiliser cette valeur et construire l&#8217;URL relative correcte.
Ton URL de template ressemble alors à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-templated-pony',
  templateUrl: 'templated-pony.html',
  moduleId: module.id
})
export class ModuleIdPonyComponent {
  @Input() pony: any;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu peux maintenant mettre ton template dans le même dossier que ton composant&#160;!</p>
</div>
<div class="paragraph">
<p>Encore mieux: si tu utilises Webpack, avec un peu de configuration
(déjà faite pour toi par Angular CLI), tu peux carrément enlever <code>module.id</code> et utiliser un chemin relatif directement.
Webpack générera le chemin absolu pour toi&#160;!</p>
</div>
</div>
<div class="sect3">
<h4 id="_styles_url_de_styles">13.3.3. Styles / URL de styles</h4>
<div class="paragraph">
<p>Tu peux aussi définir les styles de ton composant.
C&#8217;est particulièrement utile si tu comptes faire des composants vraiment isolés.
Tu peux spécifier cela avec <code>styles</code> ou <code>styleUrls</code>.</p>
</div>
<div class="paragraph">
<p>Comme tu peux le voir ci-dessous, l&#8217;attribut <code>styles</code> reçoit un tableau de règles
CSS sous forme de chaînes de caractères. Comme tu peux l&#8217;imaginer, elles deviennent
vite énormes, alors utiliser un fichier séparé et <code>styleUrls</code> est une bonne idée.
Comme le nom le laisse deviner, tu peux y indiquer un tableau d&#8217;URLs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-styled-pony',
  template: '&lt;div class="pony"&gt;{{ pony.name }}&lt;/div&gt;',
  styles: ['.pony{ color: red; }']
})
export class StyledPonyComponent {
  @Input() pony: any;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_déclarations">13.3.4. Déclarations</h4>
<div class="paragraph">
<p>Rappelle-toi qu&#8217;il te faut déclarer dans les <code>declarations</code> de ton <code>@NgModule</code> chaque directive et composant que tu utilises.
Si tu ne le fais pas, ton composant ne sera pas déclenché par le template,
et tu perdras beaucoup de temps à comprendre pourquoi.</p>
</div>
<div class="paragraph">
<p>Les deux erreurs les plus fréquentes sont <strong>oublier de déclarer les directives</strong>
et <strong>définir le mauvais sélecteur</strong>.
Si un jour tu ne comprends pas pourquoi rien ne se passe, il serait de bon goût
de vérifier cela&#160;!</p>
</div>
<div class="paragraph">
<p>Nous avons laissé de côté deux ou trois points pour l&#8217;instant, comme les requêtes, les détections de changements,
les exports, les options d&#8217;encapsulation, etc.
Comme ce sont des options plus avancées, tu n&#8217;en auras pas besoin immédiatement,
mais ne t&#8217;inquiète pas, nous les verrons bientôt dans un chapitre dédié aux sujets avancés&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye nos exercices
<a href="https://angular-exercises.ninja-squad.com/exercises/6/race-detail">Détail d&#8217;une course</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>
et
<a href="https://angular-exercises.ninja-squad.com/exercises/7/pony-component">Composant Pony</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>&#160;!
Ces exercises vont te guider dans la construction de deux composants avancés
avec entrées et sorties.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="styles">14. Style des composants et encapsulation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Faisons une pause pour parler un peu style et CSS quelques instants.
Oh nooOon, mais pourquoi parler de CSS&#160;?!
Parce qu&#8217;Angular fait beaucoup pour nous sur ce sujet.</p>
</div>
<div class="paragraph">
<p>En tant que développeur web, tu ajoutes souvent des classes CSS sur tes éléments.
Et l&#8217;essence même de CSS, c&#8217;est que ce style va <em>cascader</em> (rappelons que CSS signifie <em>Cascading Style Sheet</em>).
C&#8217;est souvent un comportement voulu (pour par exemple changer la police globalement dans toute l&#8217;application),
mais des fois non.
Imaginons que tu veux ajouter un style sur l&#8217;élément sélectionné d&#8217;une liste&#160;:
tu vas probablement utiliser un sélecteur CSS très restreint, comme <code>li.selected</code>.
Ou encore plus restreint, en utilisant une convention comme <a href="http://getbem.com/introduction/">BEM</a>,
parce que tu veux styler l&#8217;élément sélectionné dans une partie bien spécifique de ton application.</p>
</div>
<div class="paragraph">
<p>Et sur ce point Angular peut se rendre utile.
Les styles que tu définis dans un composant (soit dans l&#8217;attribut <code>styles</code>,
soit dans un fichier CSS dédié avec <code>styleUrls</code>)
sont limités par Angular à ce composant et seulement celui-ci.
Cela s&#8217;appelle l&#8217;encapsulation de style (<em>style encapsulation</em>).
Mais comment est-ce possible&#160;?</p>
</div>
<div class="paragraph">
<p>Tout commence par l&#8217;écriture d&#8217;un style.
Ensuite, cela dépend de la stratégie que tu auras choisie pour l&#8217;attribut <code>encapsulation</code>
du décorateur du composant. Cet attribut peut prendre trois valeurs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ViewEncapsulation.Emulated</code>, qui est la valeur par défaut&#160;;</p>
</li>
<li>
<p><code>ViewEncapsulation.Native</code>, qui s&#8217;appuie sur le <em>Shadow DOM</em>&#160;;</p>
</li>
<li>
<p><code>ViewEncapsulation.None</code>, qui signifie que tu ne veux pas d&#8217;encapsulation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Chaque valeur va évidemment engendrer un comportement différent.
Prenons par exemple notre composant <code>PonyComponent</code>, que tu dois commencer à bien connaître.
C&#8217;est une version simplifiée, affichant seulement le nom du poney dans une <code>div</code>.
Pour l&#8217;exemple, ajoutons une classe CSS <code>red</code> à cette <code>div</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component, ViewEncapsulation } from '@angular/core';

@Component({
  selector: 'ns-pony',
  template: `&lt;div class="red"&gt;{{ name }}&lt;/div&gt;`,
  styles: [`.red {color: red;}`],
  // that's the same as the default mode
  encapsulation: ViewEncapsulation.Emulated
})
export class PonyComponent {

  name = 'Rainbow Dash';

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette classe est ensuite utilisée dans les styles du composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-css" data-lang="css">.red {
  color: red;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on veut afficher le nom du poney avec une police rouge.</p>
</div>
<div class="sect2">
<h3 id="_stratégie_native">14.1. Stratégie <em>Native</em></h3>
<div class="paragraph">
<p>Si tu utilises la stratégie <code>Native</code>,
tu demandes à Angular d&#8217;utiliser le <em>Shadow DOM</em> du navigateur pour assurer l&#8217;encapsulation.
Le <em>Shadow DOM</em> fait partie de la spécification récente des Web Component.
Cette spécification permet de créer des éléments dans un DOM spécial, parfaitement encapsulé.
Avec cette stratégie, si on inspecte le DOM généré dans notre navigateur, on y verra&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-pony&gt;
  #shadow-root (open)
    &lt;style&gt;.red {color: red}&lt;/style&gt;
    &lt;div class="red"&gt;Rainbow Dash&lt;/div&gt;
&lt;/ns-pony&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux y repérer <code>#shadow-root (open)</code> que Chrome affiche dans l&#8217;inspecteur&#160;:
c&#8217;est parce que notre composant à été ajouté dans un élément du <em>Shadow DOM</em>&#160;!
Et on peut aussi voir que notre style a été ajouté en tête du contenu du composant.</p>
</div>
<div class="paragraph">
<p>Avec la stratégie <code>Native</code>, tu peux être sûr que les styles de ton composant ne
vont pas "transpirer" sur tes composants enfants.
Si nous avions un autre composant à l&#8217;intérieur de <code>PonyComponent</code>,
il pourrait aussi définir sa propre classe CSS <code>red</code> avec un style différent&#160;:
tu serais sûr que le bon serait utilisé, sans confusion entre eux&#160;!</p>
</div>
<div class="paragraph">
<p>Mais rappelle-toi, le <em>Shadow DOM</em> est une spécification vraiment récente,
qui n&#8217;est pas encore disponible dans tous les navigateurs.
Tu peux en vérifier la disponibilité sur le merveilleux site <a href="http://caniuse.com/#feat=shadowdom">caniuse.com</a>.
Alors sois prudent quand tu l&#8217;utilises dans tes applications&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_stratégie_emulated_émulée">14.2. Stratégie <em>Emulated</em> ("émulée")</h3>
<div class="paragraph">
<p>Comme je le disais précédemment, c&#8217;est la stratégie par défaut.
Et la raison en est simple&#160;:
elle émule (d&#8217;où le nom) la stratégie <code>Native</code>, mais sans utiliser le <em>Shadow DOM</em>.
Elle peut donc être utilisée partout, et aura le même comportement.</p>
</div>
<div class="paragraph">
<p>Pour y parvenir, Angular va <em>inliner</em> le CSS que nous définirons dans le <code>&lt;head&gt;</code> de la page
(et non pas dans chaque composant comme on l&#8217;a vu avec la stratégie <em>Native</em>).
Mais avant de l'<em>inliner</em>, Angular va réécrire le sélecteur CSS, pour lui ajouter un attribut identifiant unique.
Cet attribut unique sera ensuite ajouté sur tous les éléments du template du composant&#160;!
Comme ceci, le style s&#8217;appliquera sur notre composant uniquement.
Le même exemple donnerait donc ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;html&gt;
  &lt;head&gt;
    &lt;style&gt;.red[_ngcontent-dvb-3] {color: red}&lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    ...
    &lt;ns-pony _ngcontent-dvb-2="" _nghost-dvb-3=""&gt;
      &lt;div _ngcontent-dvb-3="" class="red"&gt;Rainbow Dash&lt;/div&gt;
    &lt;/ns-pony&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le sélecteur de classe <code>red</code> a été réécrit en <code>.red[_ngcontent-dvb-3]</code>,
alors il ne s&#8217;appliquera que sur les éléments qui auront à la fois la classe <code>red</code>
et l&#8217;attribut <code>_ngcontent-dvb-3</code>.
Tu peux aussi vérifier que cet attribut a bien été ajouté automatiquement à notre <code>div</code>,
pour que tout fonctionne parfaitement.
L&#8217;élément <code>&lt;ns-pony&gt;</code> a aussi quelques attributs&#160;:
<code>_ngcontent-dvb-2</code> qui est l&#8217;identifiant unique généré pour son parent,
et <code>_nghost-dvb-3</code> qui est l&#8217;identifiant unique de l&#8217;élément hôte lui-même.
Oui, parce que l&#8217;on peut aussi ajouter des styles sur l&#8217;élément hôte, comme nous le verrons bientôt.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stratégie_none_aucune">14.3. Stratégie <em>None</em> ("aucune")</h3>
<div class="paragraph">
<p>Cette stratégie ne réalise aucune encapsulation.
Les styles seront <em>inlinés</em> en haut de la page
(comme pour la stratégie <code>Emulated</code>), mais ne seront pas réécrits.
Ils se comporteront donc comme des styles "normaux", qui cascaderont sur les enfants.</p>
</div>
</div>
<div class="sect2">
<h3 id="_style_lhôte">14.4. Style l&#8217;hôte</h3>
<div class="paragraph">
<p>Un sélecteur CSS spécial existe pour styler spécifiquement l&#8217;élément hôte.
Il s&#8217;appelle <code>:host</code>, et il vient de la spécification des Web Components&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-css" data-lang="css">:host {
  display: block;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il sera conservé tel quel avec la stratégie <code>Native</code>, comme dans la spécification du <em>Shadow DOM</em>,
ou sera réécrit en <code>[_nghost-xxx]</code> si tu utilises <code>Emulated</code>.</p>
</div>
<div class="paragraph">
<p>Pour conclure, il n&#8217;y a pas grand chose à faire pour avoir des styles parfaitement encapsulés,
car la stratégie <code>Emulated</code> fait tout le boulot pour nous.
Tu peux basculer sur la stratégie <code>Native</code> si tu ne cibles que des navigateurs spécifiques,
ou sur <code>None</code> si tu n&#8217;as pas besoin d&#8217;encapsuler tes styles.
Cette stratégie peut se définir au sein de chaque composant,
ou globalement pour l&#8217;application complète dans le module racine.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tests">15. Tester ton application</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tester_cest_douter">15.1. Tester c&#8217;est douter</h3>
<div class="paragraph">
<p>J&#8217;adore les tests automatisés.
Ma vie professionnelle tourne autour de cette barre de progression qui devient verte dans mon IDE,
et me félicite d&#8217;avoir bien travaillé.
J&#8217;espère que les tests sont aussi importants pour toi, car ils sont le filet de sécurité ultime quand on écrit du code.
Rien n&#8217;est plus pénible que tester du code manuellement.</p>
</div>
<div class="paragraph">
<p>Angular fait du bon boulot en ce qui concerne la facilité d&#8217;écriture de tests.
AngularJS&#160;1.x était déjà très bon, et c&#8217;était une des raisons pour lesquelles j&#8217;appréciais ce framework.
Comme en AngularJS&#160;1.x, on peut écrire deux types de tests&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>tests unitaires&#160;;</p>
</li>
<li>
<p>tests <em>end-to-end</em> ("de bout en bout").</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les premiers sont là pour affirmer qu&#8217;une petite portion de code (un composant, un service, un <em>pipe</em>) fonctionne correctement en isolation,
c&#8217;est à dire indépendamment de ses dépendances.
Écrire un tel test unitaire demande d&#8217;exécuter chacune des méthodes d&#8217;un composant/service/<em>pipe</em>,
et de vérifier que les sorties sont celles attendues pour les entrées fournies.
On peut aussi vérifier que les dépendances utilisées par cette portion sont correctement invoquées,
par exemple qu&#8217;un service fait la bonne requête HTTP.</p>
</div>
<div class="paragraph">
<p>On peut aussi écrire des tests <em>end-to-end</em> ("de bout en bout").
Ceux-ci émulent une interaction utilisateur réelle avec ton application,
en démarrant une vraie instance et en pilotant le navigateur pour saisir des valeurs dans les champs,
cliquer sur les boutons, etc.
On vérifiera ensuite que la page affichée contient ce qui est attendu, que l&#8217;URL est correcte, et tout ce que tu peux imaginer.</p>
</div>
<div class="paragraph">
<p>On va parler de tout cela, mais commençons par les tests unitaires.</p>
</div>
</div>
<div class="sect2">
<h3 id="_test_unitaire">15.2. Test unitaire</h3>
<div class="paragraph">
<p>Comme on l&#8217;a vu, les tests unitaires vérifient une petite portion de code en <strong>isolation</strong>.
Ces tests garantissent seulement qu&#8217;une petite partie de l&#8217;application fonctionne comme prévu,
mais ils ont de nombreux avantages&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ils sont vraiment rapides, tu peux en exécuter plusieurs centaines en quelques secondes.</p>
</li>
<li>
<p>ils sont très efficaces pour tester (quasiment) l&#8217;intégralité de ton code, et particulièrement les cas limites,
qui peuvent être difficiles à reproduire manuellement dans l&#8217;application réelle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>L&#8217;un des concepts au cœur d&#8217;un test unitaire est celui d&#8217;isolation&#160;:
on ne veut pas que notre test soit biaisé par ses dépendances.
Alors on utilise généralement des objets bouchonnés (<em>mock</em>) comme dépendances.
Ce sont des objets factices créés juste pour les besoins du test.</p>
</div>
<div class="paragraph">
<p>Pour tout cela, on va compter sur quelques outils.
D&#8217;abord, on a besoin d&#8217;une bibliothèque pour écrire des tests.
Une des plus populaires (sinon la plus populaire) est <a href="http://jasmine.github.io/">Jasmine</a>,
on va donc utiliser celle-ci&#160;!</p>
</div>
<div class="sect3">
<h4 id="_jasmine_karma">15.2.1. Jasmine &amp; Karma</h4>
<div class="paragraph">
<p>Jasmine nous propose plusieurs méthodes pour déclarer nos tests&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>describe()</code> déclare une suite de tests (un groupe de tests)&#160;;</p>
</li>
<li>
<p><code>it()</code> déclare un test&#160;;</p>
</li>
<li>
<p><code>expect()</code> déclare une assertion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Un test JavaScript basique ressemble à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class Pony {
  constructor(public name: string, public speed: number) {
  }

  isFasterThan(speed) {
    return this.speed &gt; speed;
  }
}

describe('My first test suite', () =&gt; {
  it('should construct a Pony', () =&gt; {
    const pony = new Pony('Rainbow Dash', 10);
    expect(pony.name).toBe('Rainbow Dash');
    expect(pony.speed).not.toBe(1);
    expect(pony.isFasterThan(8)).toBe(true);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;appel à <code>expect()</code> peut être chaîné avec plein de méthodes comme <code>toBe()</code>,
<code>toBeLessThan()</code>, <code>toBeUndefined()</code>, etc.
Chaque méthode peut être rendue négative avec l&#8217;attribut <code>not</code> de l&#8217;objet retourné par <code>expect()</code>.</p>
</div>
<div class="paragraph">
<p>Le fichier de test est un fichier séparé du code que tu veux tester,
en général avec une extension comme <code>.spec.ts</code>.</p>
</div>
<div class="paragraph">
<p>Le test d&#8217;une classe Pony écrite dans un fichier <code>pony.ts</code> sera normalement dans un fichier nommé <code>pony.spec.ts</code>.
Tu peux soit poser ce fichier de test juste à côté du fichier à tester,
soit dans un répertoire dédié contenant tous les tests.
J&#8217;ai tendance à placer le code et le test dans le même répertoire,
mais les deux approches sont parfaitement acceptables&#160;: choisis ton camp.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Une astuce&#160;: si tu utilises <code>fdescribe()</code> au lieu de <code>describe()</code>
alors cette seule suite de tests sera exécutée (le "f" ajouté signifie "focus").
Même chose si tu ne veux exécuter qu&#8217;un seul test&#160;: utilise <code>fit()</code> au lieu de <code>it()</code>.
Si tu veux exclure un test, utilise <code>xit()</code>, ou <code>xdescribe()</code> pour une suite de tests.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tu peux aussi utiliser la méthode <code>beforeEach()</code> pour initialiser un contexte avec chaque test.
Si j&#8217;ai plusieurs tests sur le même poney,
il est préférable d&#8217;utiliser <code>beforeEach()</code> pour initialiser ce poney,
plutôt que copier/coller le même morceau de code dans tous les tests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">describe('Pony', () =&gt; {
  let pony: Pony;

  beforeEach(() =&gt; {
    pony = new Pony('Rainbow Dash', 10);
  });

  it('should have a name', () =&gt; {
    expect(pony.name).toBe('Rainbow Dash');
  });

  it('should have a speed', () =&gt; {
    expect(pony.speed).not.toBe(1);
    expect(pony.speed).toBeGreaterThan(9);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe aussi une méthode <code>afterEach</code>, mais je n&#8217;en ai juste jamais eu besoin&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Une dernière astuce&#160;: Jasmine nous permet de créer des objets factices (bouchons ou espions, comme tu veux),
ou même d&#8217;espionner une méthode d&#8217;un véritable objet.
On peut alors faire quelques assertions sur ces méthodes,
comme <code>toHaveBeenCalled()</code> qui vérifie que la méthode a bien été invoquée,
ou <code>toHaveBeenCalledWith()</code> qui vérifie les paramètres exacts utilisés lors de l&#8217;invocation de la méthode espionnée.
Tu peux aussi vérifier combien de fois la méthode a été invoquée, ou vérifier si elle ne l&#8217;a pas été, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">describe('My first test suite with spyOn', () =&gt; {
  let pony: Pony;

  beforeEach(() =&gt; {
    pony = new Pony('Rainbow Dash', 10);
    // define a spied method
    spyOn(pony, 'isFasterThan').and.returnValue(true);
  });

  it('should test if the Pony is fast', () =&gt; {
    const runPonyRun = pony.isFasterThan(60);
    expect(runPonyRun).toBe(true); // as the spied method always returns
    expect(pony.isFasterThan).toHaveBeenCalled();
    expect(pony.isFasterThan).toHaveBeenCalledWith(60);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand tu écris des tests unitaires, garde à l&#8217;esprit qu&#8217;ils doivent rester courts et lisibles.
Et n&#8217;oublie pas de les faire d&#8217;abord échouer, pour être sûr que tu testes la bonne chose.</p>
</div>
<div class="paragraph">
<p>La dernière étape est l&#8217;exécution de nos tests.
Pour cela, l&#8217;équipe Angular a développé <a href="http://karma-runner.github.io">Karma</a>,
dont le seul but est d&#8217;exécuter nos tests dans un ou plusieurs navigateurs.
Cette bibliothèque peut aussi surveiller nos fichiers pour réexécuter nos tests lors de chaque enregistrement.
Comme l&#8217;exécution est très rapide, c&#8217;est vraiment bien d&#8217;avoir ça,
pour avoir un retour instantané sur notre code.</p>
</div>
<div class="paragraph">
<p>Je ne vais pas me lancer dans les détails de la mise en place de Karma,
mais c&#8217;est un projet très intéressant avec une tonne de plugins à disposition,
pour le faire fonctionner avec tes outils préférés, pour mesurer la couverture de tests, etc.
Si comme moi tu écris ton code en TypeScript,
la stratégie que tu peux adopter est de laisser le compilateur TypeScript surveiller ton code et tes tests,
et produire les fichiers compilés dans un répertoire séparé,
et avoir Karma qui surveille ce dernier répertoire.</p>
</div>
<div class="paragraph">
<p>Donc on sait maintenant comment écrire un test unitaire en JavaScript.
Ajoutons maintenant Angular à la recette.</p>
</div>
</div>
<div class="sect3">
<h4 id="_utiliser_linjection_de_dépendances">15.2.2. Utiliser l&#8217;injection de dépendances</h4>
<div class="paragraph">
<p>Disons que j&#8217;ai une application Angular avec un service simple, comme <code>RaceService</code>,
avec une méthode retournant une liste de courses codée en dur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class RaceService {
  list(): Array&lt;RaceModel&gt; {
    const race1: RaceModel = { name: 'London' };
    const race2: RaceModel = { name: 'Lyon' };
    return [race1, race2];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Essayons de tester cela.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">describe('RaceService', () =&gt; {
  it('should return races when list() is called', () =&gt; {
    const raceService = new RaceService();
    expect(raceService.list().length).toBe(2);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ca fonctionne.
Mais on pourrait aussi bénéficier de l&#8217;injection de dépendances proposée par Angular pour récupérer
le RaceService et l&#8217;injecter dans notre test.
C&#8217;est d&#8217;autant plus utile que notre <code>RaceService</code> a lui aussi des dépendances&#160;:
plutôt que devoir instancier nous-même chacune des ses dépendances,
on peut compter sur l&#8217;injecteur pour le faire à notre place en lui disant
"hé, j&#8217;ai besoin de RaceService, débrouille-toi pour le créer, lui fournir ce dont il a besoin, et me le donner".</p>
</div>
<div class="paragraph">
<p>Pour utiliser le système d&#8217;injection de dépendances dans notre test,
le framework a une méthode utilitaire dans la classe <code>TestBed</code> nommée <code>get</code>.</p>
</div>
<div class="paragraph">
<p>Cette méthode est utilisée dans notre test
pour récupérer des dépendances spécifiques.</p>
</div>
<div class="paragraph">
<p>Si on retourne à notre exemple, cette fois-ci en utilisant <code>TestBed.get</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { TestBed } from '@angular/core/testing';

describe('RaceService', () =&gt; {

  it('should return races when list() is called', () =&gt; {
    const raceService = TestBed.get(RaceService);
    expect(raceService.list().length).toBe(2);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va fonctionner, car le service est déclaré avec <code>providedIn: 'root'</code>,
ce qui le rend disponible dans le test.
Il sera alors instancié et injecté paresseusement quand il est demandé.</p>
</div>
<div class="paragraph">
<p>Comme on l&#8217;a fait dans l&#8217;exemple simple de Jasmine,
on devrait déplacer l&#8217;initialisation de <code>RaceService</code> dans une méthode <code>beforeEach</code>.
On peut aussi utiliser <code>TestBed.get</code> dans un <code>beforeEach</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { TestBed } from '@angular/core/testing';

describe('RaceService', () =&gt; {
  let service: RaceService;

  beforeEach(() =&gt; service = TestBed.get(RaceService));

  it('should return races when list() is called', () =&gt; {
    expect(service.list().length).toBe(2);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a déplacé la logique de <code>TestBed.get</code> dans un <code>beforeEach</code>, et maintenant notre test est plutôt clair.</p>
</div>
<div class="paragraph">
<p>Évidemment, un véritable <code>RaceService</code> n&#8217;aura pas une liste de courses écrite en dur,
et il est fortement probable que cette réponse soit asynchrone.
Disons que la méthode <code>list</code> retourne un observable.
Qu&#8217;est-ce que cela change dans notre test&#160;?
Et bien nous devrons mettre <code>expect</code> dans le callback <code>subscribe</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { async, TestBed } from '@angular/core/testing';

describe('RaceService', () =&gt; {
  let service: RaceService;

  beforeEach(() =&gt; service = TestBed.get(RaceService));

  it('should return an observable of 2 races', async(() =&gt; {
    service.list().subscribe(races =&gt; {
      expect(races.length).toBe(2);
    });
  }));
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu te dis peut-être que cela ne fonctionnera pas,
car le test se terminera avant que l&#8217;observable ne soit appelé,
et notre assertion ne sera jamais exécutée.</p>
</div>
<div class="paragraph">
<p>Mais nous avons utilisé la fonction <code>async()</code>
et cette méthode est vraiment intelligente&#160;:
elle enregistre tous les appels asynchrones faits dans le test
et attend leur résolution.</p>
</div>
<div class="paragraph">
<p>Angular utilise un nouveau concept appelé <a href="https://github.com/angular/zone.js"><strong>zones</strong></a>.
Ces <strong>zones</strong> sont des contextes d&#8217;exécution,
et, pour simplifier, elles enregistrent tout ce qui se passe en leur sein
(timeouts, event listeners, callbacks, &#8230;&#8203;).
Elles proposent aussi des points d&#8217;extensions qui peuvent être appelés quand on entre ou sort de la zone.
Une application Angular tourne dans une zone,
et c&#8217;est comme cela que le framework sait qu&#8217;il doit rafraîchir le DOM quand une action asynchrone est réalisée.</p>
</div>
<div class="paragraph">
<p>Ce concept est aussi utilisé dans les tests si ton test utilise <code>async()</code>&#160;:
chaque test tourne dans une zone, ainsi le framework sait quand toutes les actions asynchrones sont terminées,
et ne se finira pas jusqu&#8217;alors.</p>
</div>
<div class="paragraph">
<p>Et donc nos assertions asynchrones seront exécutés. Cool&#160;!</p>
</div>
<div class="paragraph">
<p>Il y a une autre façon de gérer les tests asynchrones en Angular,
en utilisant <code>fakeAsync()</code> et <code>tick()</code>,
mais on garde ça pour un chapitre plus avancé.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dépendances_factices">15.3. Dépendances factices</h3>
<div class="paragraph">
<p>La classe <code>TestBed</code> va nous aider à déclarer des dépendances factices si besoin.
Sa méthode <code>configureTestingModule</code> permet de déclarer ce qui pourra être injecté dans le test,
en créant un module de test ne contenant que ce dont nous avons besoin.
Essaye de n&#8217;injecter que le strict nécessaire dans ton test,
pour le rendre le plus faiblement couplé possible du reste de l&#8217;application.
La méthode est appelée dans le <code>beforeEach</code> de Jasmine pour être exécutée avant nos tests,
et prend une configuration de module comme paramètre, très proche de ce que nous passons au décorateur <code>@NgModule</code>.
L&#8217;attribut <code>providers</code> reçoit un tableau de dépendances qui deviendront disponibles à l&#8217;injection.</p>
</div>
<div class="paragraph">
<p>Pouvoir déclarer les dépendances dans le module de test
a donc son utilité&#160;: on peut sans problème y déclarer une dépendance factice plutôt qu&#8217;une vraie.</p>
</div>
<div class="paragraph">
<p>Pour le bien de mon exemple, disons que mon <code>RaceService</code> utilise le <em>local storage</em> pour stocker les courses,
avec une clé <code>races</code>.
Tes collègues ont développé un service appelé <code>LocalStorageService</code> qui gère la sérialisation JSON, etc.
que notre <code>RaceService</code> utilise.
La méthode <code>list()</code> ressemble à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class RaceService {
  constructor(private localStorage: LocalStorageService) {
  }

  list() {
    return this.localStorage.get('races');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, nous ne voulons pas vraiment tester le service <code>LocalStorageService</code>,
nous voulons juste tester notre <code>RaceService</code>.
Cela peut être fait en bénéficiant du système d&#8217;injection de dépendances pour
donner un <code>LocalStorageService</code> factice&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class FakeLocalStorage {
  get(key) {
    return [{ name: 'Lyon' }, { name: 'London' }];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>au <code>RaceService</code> dans notre test, en utilisant <code>provide</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { TestBed } from '@angular/core/testing';

describe('RaceService', () =&gt; {

  beforeEach(() =&gt; TestBed.configureTestingModule({
    providers: [
      { provide: LocalStorageService, useClass: FakeLocalStorage }
    ]
  }));

  it('should return 2 races from localStorage', () =&gt; {
    const service = TestBed.get(RaceService);
    const races = service.list();
    expect(races.length).toBe(2);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cool&#160;!
Mais je ne suis pas complètement satisfait de ce test.
Créer manuellement un service factice est laborieux,
et Jasmine peut nous aider à espionner le service et à remplacer son implémentation par une factice.
Elle permet aussi de vérifier que la méthode <code>get()</code> a été invoquée avec la bonne clé <code>'races'</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { TestBed } from '@angular/core/testing';

describe('RaceService', () =&gt; {

  const localStorage = jasmine.createSpyObj('LocalStorageService', ['get']);

  beforeEach(() =&gt; TestBed.configureTestingModule({
    providers: [
      { provide: LocalStorageService, useValue: localStorage }
    ]
  }));

  it('should return 2 races from localStorage', () =&gt; {
    localStorage.get.and.returnValue([{ name: 'Lyon' }, { name: 'London' }]);

    const service = TestBed.get(RaceService);
    const races = service.list();

    expect(races.length).toBe(2);
    expect(localStorage.get).toHaveBeenCalledWith('races');
  });
})
;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tester_des_composants">15.4. Tester des composants</h3>
<div class="paragraph">
<p>Après avoir testé un service simple, l&#8217;étape suivante est de tester un composant.
Un test de composant est légèrement différent car il nous faut créer le composant.
On ne peut pas compter sur le système d&#8217;injection de dépendances pour nous fournir une instance du composant à tester
(tu as probablement déjà remarqué que les composants ne sont pas injectables dans d&#8217;autres composants :) ).</p>
</div>
<div class="paragraph">
<p>Commençons par écrire un composant à tester.
Pourquoi pas notre composant <code>PonyComponent</code>&#160;?
Il prend un poney en entrée et émet un événement <code>ponyClicked</code> quand le composant est cliqué.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-pony',
  template: `&lt;img [src]="'/images/pony-' + pony.color.toLowerCase() + '.png'" (click)="clickOnPony()"&gt;`
})
export class PonyComponent {

  @Input() pony: PonyModel;
  @Output() ponyClicked = new EventEmitter&lt;PonyModel&gt;();

  clickOnPony() {
    this.ponyClicked.emit(this.pony);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il a un template plutôt simple&#160;:
une image avec une source dynamique dépendante de la couleur du poney,
et un gestionnaire de clic.</p>
</div>
<div class="paragraph">
<p>Pour tester un tel composant, tu as d&#8217;abord besoin de créer une instance.
Pour ce faire, nous allons aussi utiliser <code>TestBed</code>.
Cette classe vient avec une méthode utilitaire, nommée <code>createComponent</code>, pour créer un composant.
Cette méthode retourne un <code>ComponentFixture</code>, une représentation de notre composant.</p>
</div>
<div class="paragraph">
<p>Note que pour créer un composant, il doit être connu du module de test,
nous devons donc l&#8217;ajouter à l&#8217;attribut <code>declarations</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { TestBed } from '@angular/core/testing';

import { PonyComponent } from './pony_cmp';

describe('PonyComponent', () =&gt; {

  it('should have an image', () =&gt; {
    TestBed.configureTestingModule({
      declarations: [PonyComponent]
    });
    const fixture = TestBed.createComponent(PonyComponent);
    // given a component instance with a pony input initialized
    const ponyComponent = fixture.componentInstance;
    ponyComponent.pony = { name: 'Rainbow Dash', color: 'BLUE' };

    // when we trigger the change detection
    fixture.detectChanges();

    // then we should have an image with the correct source attribute
    // depending of the pony color
    const element = fixture.nativeElement;
    expect(element.querySelector('img').getAttribute('src')).toBe('/images/pony-blue.png');
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, on suit le modèle "Given/When/Then" ("soit/quand/alors") pour écrire notre test.
Tu trouveras une littérature complète sur le sujet, mais il se résume à&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une phase "Given", où on met en place le contexte du test. On y récupère l&#8217;instance du composant créée, et lui donne un poney.
Cela simule une entrée qui viendrait d&#8217;un composant parent dans la vraie application.</p>
</li>
<li>
<p>une phase "When", où on déclenche manuellement la détection de changements, via la méthode <code>detectChanges()</code>.
Dans un test, la détection de changement est de notre responsabilité&#160;: ce n&#8217;est pas automatique comme ça l&#8217;est dans une application.</p>
</li>
<li>
<p>et une phase "Then", contenant les assertions.
On peut récupérer l&#8217;élément natif et interroger le DOM comme on le ferait dans un navigateur (avec <code>querySelector()</code> par exemple).
Ici on teste si la source de l&#8217;image est la bonne.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On peut également tester que le composant émet bien un événement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">it('should emit an event on click', () =&gt; {
  TestBed.configureTestingModule({
    declarations: [PonyComponent]
  });
  const fixture = TestBed.createComponent(PonyComponent);

  // given a pony
  const ponyComponent = fixture.componentInstance;
  ponyComponent.pony = { name: 'Rainbow Dash', color: 'BLUE' };

  // we fake the event emitter with a spy
  spyOn(ponyComponent.ponyClicked, 'emit');

  // when we click on the pony
  const element = fixture.nativeElement;
  const image = element.querySelector('img');
  image.dispatchEvent(new Event('click'));

  // and we trigger the change detection
  fixture.detectChanges();

  // then the event emitter should have fired an event
  expect(ponyComponent.ponyClicked.emit).toHaveBeenCalled();
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Examinons un autre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-race',
  template: `&lt;div&gt;
    &lt;h1&gt;{{ race.name }}&lt;/h1&gt;
    &lt;ns-pony *ngFor="let currentPony of race.ponies" [pony]="currentPony"&gt;&lt;/ns-pony&gt;
  &lt;/div&gt;`
})
export class RaceComponent {

  @Input() race: any;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>et son test&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">describe('RaceComponent', () =&gt; {

  let fixture: ComponentFixture&lt;RaceComponent&gt;;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      declarations: [RaceComponent, PonyComponent]
    });
    fixture = TestBed.createComponent(RaceComponent);
  });

  it('should have a name and a list of ponies', () =&gt; {
    // given a component instance with a race input initialized
    const raceComponent = fixture.componentInstance;
    raceComponent.race = { name: 'London', ponies: [{ name: 'Rainbow Dash', color: 'BLUE' }] };

    // when we trigger the change detection
    fixture.detectChanges();

    // then we should have a title with the race name
    const element = fixture.nativeElement;
    expect(element.querySelector('h1').textContent).toBe('London');

    // and a list of ponies
    const ponies = fixture.debugElement.queryAll(By.directive(PonyComponent));
    expect(ponies.length).toBe(1);
    // we can check if the pony is correctly initialized
    const rainbowDash = ponies[0].componentInstance.pony;
    expect(rainbowDash.name).toBe('Rainbow Dash');
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici on requête toutes les directives de type <code>PonyComponent</code> et on teste si le premier poney est correctement initialisé.</p>
</div>
<div class="paragraph">
<p>Tu peux récupérer les composants au sein de ton composant avec <code>children</code>
ou les requêter avec <code>query()</code> et <code>queryAll()</code>.
Ces méthodes prennent un prédicat en argument qui peut être soit <code>By.css</code>, soit <code>By.directive</code>.
C&#8217;est ce qu&#8217;on fait pour obtenir les poneys affichés, parce qu&#8217;elles sont des instances de <code>PonyComponent</code>.
Garde à l&#8217;esprit que c&#8217;est différent d&#8217;une requête DOM avec <code>querySelector()</code>&#160;:
elle ne trouvera que les éléments gérés par Angular,
et retourne un <code>ComponentFixture</code>, pas un élément du DOM
(ce qui te donnera accès à <code>componentInstance</code> du résultat par exemple).</p>
</div>
</div>
<div class="sect2">
<h3 id="_tester_avec_des_templates_ou_providers_factices">15.5. Tester avec des templates ou providers factices</h3>
<div class="paragraph">
<p>Quand on teste un composant,
on veut parfois créer un composant parent qui l&#8217;utilise.
Et s&#8217;il y a plusieurs cas d&#8217;utilisation,
on devrait créer plusieurs composants parents juste pour essayer les différents <em>inputs</em> par exemple.</p>
</div>
<div class="paragraph">
<p>Heureusement, quand nous sommes dans un test,
nous pouvons modifier n&#8217;importe quel composant pour le réutiliser dans différents tests,
en surchargeant son template.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, le <code>TestBed</code> propose une méthode <code>overrideComponent()</code>,
à appeler avant <code>createComponent()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">describe('RaceComponent', () =&gt; {

  let fixture: ComponentFixture&lt;RaceComponent&gt;;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      declarations: [RaceComponent, PonyComponent]
    });
    TestBed.overrideComponent(RaceComponent, { set: { template: '&lt;h2&gt;{{ race.name }}&lt;/h2&gt;' } });
    fixture = TestBed.createComponent(RaceComponent);
  });

  it('should have a name', () =&gt; {
    // given a component instance with a race input initialized
    const raceComponent = fixture.componentInstance;
    raceComponent.race = { name: 'London' };

    // when we trigger the change detection
    fixture.detectChanges();

    // then we should have a name
    const element = fixture.nativeElement;
    expect(element.querySelector('h2').textContent).toBe('London');
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, cette méthode prend deux arguments&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le composant que tu veux surcharger&#160;;</p>
</li>
<li>
<p>la méta-donnée que tu veux ajouter, supprimer ou remplacer (par exemple ici on remplace le template).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cela signifie que tu peux modifier le template du composant que tu testes,
ou celui d&#8217;un de ses enfants (pour remplacer le template complexe d&#8217;un composant par un plus simple).</p>
</div>
<div class="paragraph">
<p><code>template</code> n&#8217;est pas la seule méta-donnée disponible, tu peux aussi utiliser&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>providers</code> pour remplacer les dépendances d&#8217;un composant&#160;;</p>
</li>
<li>
<p><code>styles</code> pour remplacer le style utilisé dans le template d&#8217;un composant&#160;;</p>
</li>
<li>
<p>ou n&#8217;importe quelle propriété que tu peux passer au décorateur <code>@Component</code>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Comme remplacer un template est le cas le plus courant,
Angular&#160;4 a introduit une nouvelle méthode <code>overrideTemplate()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">describe('RaceComponent', () =&gt; {

  let fixture: ComponentFixture&lt;RaceComponent&gt;;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      declarations: [RaceComponent, PonyComponent]
    });
    TestBed.overrideTemplate(RaceComponent, '&lt;h2&gt;{{ race.name }}&lt;/h2&gt;');
    fixture = TestBed.createComponent(RaceComponent);
  });

  it('should have a name', () =&gt; {
    // given a component instance with a race input initialized
    const raceComponent = fixture.componentInstance;
    raceComponent.race = { name: 'London' };

    // when we trigger the change detection
    fixture.detectChanges();

    // then we should have a name
    const element = fixture.nativeElement;
    expect(element.querySelector('h2').textContent).toBe('London');
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant tu es prêt pour tester ton application&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_tests_end_to_end_de_bout_en_bout">15.6. Tests end-to-end ("de bout en bout")</h3>
<div class="paragraph">
<p>Les tests end-to-end ("de bout en bout", abrégés en <em>e2e</em>) sont l&#8217;autre type de tests qu&#8217;on peut faire.
Un test end-to-end consiste à lancer réellement ton application dans un navigateur et à simuler l&#8217;interaction d&#8217;un utilisateur
(clic sur les boutons, saisie de formulaires, etc.).
Ils ont l&#8217;avantage de vraiment tester l&#8217;application dans son ensemble, mais&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ils sont bien plus lents (plusieurs secondes par test)&#160;;</p>
</li>
<li>
<p>c&#8217;est souvent difficile de tester les cas limites.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Comme tu l&#8217;as deviné, tu n&#8217;as pas besoin de choisir entre les tests unitaires et les tests e2e&#160;:
tu combineras les deux pour avoir à la fois une bonne couverture et quelques garanties que ton application complète fonctionne comme prévue.</p>
</div>
<div class="paragraph">
<p>Les tests e2e s&#8217;appuient sur un outil appelé <a href="https://angular.github.io/protractor/#/">Protractor</a>.
C&#8217;est le même outil qu&#8217;on utilisait en AngularJS&#160;1.x.
Et la bonne nouvelle, c&#8217;est qu&#8217;il fonctionne de la même façon avec AngularJS&#160;1.x et Angular&#160;!</p>
</div>
<div class="paragraph">
<p>Tu écriras ta suite de tests avec Jasmine comme pour un test unitaire,
mais tu utiliseras l&#8217;API de Protractor pour interagir avec ton application.</p>
</div>
<div class="paragraph">
<p>Un test simple ressemblerait à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">describe('Home', () =&gt; {

  it('should display title, tagline and logo', () =&gt; {
    browser.get('/');
    expect(element.all(by.css('img')).count()).toEqual(1);
    expect($('h1').getText()).toContain('PonyRacer');
    expect($('small').getText()).toBe('Always a pleasure to bet on ponies');
  });

});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Protractor nous fournit un objet <code>browser</code>,
avec quelques méthodes utilitaires comme <code>get()</code> pour aller à une URL.
Puis tu as <code>element.all()</code> pour sélectionner tous les éléments répondant à un prédicat donné.
Ce prédicat s&#8217;appuie souvent sur <code>by</code> et ses méthodes variées
(<code>by.css()</code> pour faire une requête CSS, <code>by.id()</code> pour récupérer un élément par son identifiant, etc.).
<code>element.all()</code> retournera une promesse, avec une méthode spéciale <code>count()</code> utilisée dans le test ci-dessus.</p>
</div>
<div class="paragraph">
<p><code>$('h1')</code> est un raccourci, équivalent de <code>element(by.css('h1'))</code>.
Il récupérera le premier élément correspondant à la requête CSS.</p>
</div>
<div class="paragraph">
<p>Tu peux utiliser plusieurs méthodes sur la promesse retournée par <code>$()</code>, comme <code>getText()</code> et <code>getAttribute()</code> pour récupérer des informations,
ou <code>click()</code> et <code>sendKeys()</code> pour agir sur l&#8217;élément.</p>
</div>
<div class="paragraph">
<p>Ces tests peuvent être bien plus longs à écrire et à débugger (bien plus que des tests unitaires),
mais ils sont vraiment utiles.
Tu peux faire plein de trucs incroyables avec ces tests,
comme tester dans plusieurs navigateurs, prendre une capture d&#8217;écran à chaque échec, etc.</p>
</div>
<div class="paragraph">
<p>Avec les tests unitaires et les tests e2e, tu as toutes les cartes en main pour construire une application solide et maintenable&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en Pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Tous les exercices du Pack Pro viennent avec leurs tests unitaires&#160;!
Si tu veux en apprendre plus, nous t&#8217;encourageons fortement à leur jeter un œil&#160;:
nous avons testé toutes les parties possibles de l&#8217;application (100% de couverture de code)&#160;!
À la fin tu auras des dizaines d&#8217;exemples de test,
que tu pourras utiliser dans tes propres projets.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="http">16. Envoyer et recevoir des données par HTTP</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Attention</div>
</td>
<td class="content">
Ce chapitre utilise le nouveau <code>HttpClientModule</code> introduit avec Angular&#160; 4.3 dans le package <code>@angular/common/http</code>,
qui est une réécriture complète du <code>HttpModule</code> qui existait jusqu&#8217;à alors.
Ce chapitre ne parle <em>pas</em> de l&#8217;ancien <code>HttpModule</code> du package <code>@angular/http</code> qui était utilisé précédemment.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce ne sera pas une surprise, mais une grande part de notre travail consiste
à demander des données à un serveur, et à lui en envoyer d&#8217;autres.</p>
</div>
<div class="paragraph">
<p>Traditionnellement, on utilise HTTP, même si de nos jours il y a des alternatives,
comme les WebSockets.
Angular fournit un module http, mais ne te l&#8217;impose pas.
Si tu préfères, tu peux utiliser ta bibliothèque HTTP favorite pour faire des requêtes
asynchrones.</p>
</div>
<div class="paragraph">
<p>Une des nouvelles candidates est l&#8217;API <a href="https://github.com/github/fetch">fetch</a>,
pour le moment disponible sous forme de <em>polyfill</em>, mais elle devrait devenir
standard dans les navigateurs.
Tu peux parfaitement construire ton application en utilisant <code>fetch</code> ou une autre bibliothèque.
En fait, c&#8217;était ce que je j&#8217;utilisais avant que la partie HTTP existe dans Angular.
Elle fonctionne très bien, sans besoin d&#8217;aucune plomberie pour informer le framework
de la réception de données et du besoin de déclencher le cycle de détection de changements
(contrairement à AngularJS&#160;1.x, où il fallait invoker <code>$scope.apply()</code> si tu utilisais
une bibliothèque externe&#160;: c&#8217;est la magie d&#8217;Angular et de ses zones&#160;!).</p>
</div>
<div class="paragraph">
<p>Mais si tu es content du framework, tu utiliseras un petit module appelé <code>HttpClientModule</code>,
codé par l&#8217;équipe interne.
C&#8217;est un module indépendant, donc tu peux vraiment faire comme tu préfères.
Note d&#8217;ailleurs qu&#8217;il ressemble beaucoup à la proposition de spécification de l&#8217;API Fetch.</p>
</div>
<div class="paragraph">
<p>Si tu veux l&#8217;utiliser, il te faudra utiliser les classes du package <code>@angular/common/http</code>.</p>
</div>
<div class="paragraph">
<p>Pourquoi préférer ce module à <code>fetch</code>&#160;?
La réponse est simple&#160;: pour les tests.
Comme on le verra, le module Http permet de bouchonner ton serveur,
et de retourner des réponses données.
C&#8217;est vraiment, vraiment très utile.</p>
</div>
<div class="paragraph">
<p>Une dernière chose avant de plonger dans l&#8217;API&#160;: le module Http utilise
largement le paradigme de la programmation réactive.
Alors si tu as sauté le
<a href="#reactive-programming">chapitre Programmation réactive</a>
, c&#8217;est le bon moment d&#8217;y retourner et de le lire vraiment cette fois ;).</p>
</div>
<div class="sect2">
<h3 id="_obtenir_des_données">16.1. Obtenir des données</h3>
<div class="paragraph">
<p>Le module Http propose un service nommé <code>HttpClient</code> que tu peux t&#8217;injecter dans n&#8217;importe quel constructeur.
Comme le service est fourni par un autre module, il te faut le rendre disponible
à tes composants et services.
Pour cela il faut importer le module <code>HttpClientModule</code> dans le module racine&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { HttpClientModule } from '@angular/common/http';

@NgModule({
  imports: [BrowserModule, HttpClientModule],
  declarations: [AppComponent],
  bootstrap: [AppComponent]
})
export class AppModule {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand cela est fait tu peux injecter le service <code>HttpClient</code> partout où tu en as besoin&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-races',
  template: `&lt;h1&gt;Races&lt;/h1&gt;`
})
export class RacesComponent {

  constructor(private http: HttpClient) {
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Par défaut, le service <code>HttpClient</code> réalise des requêtes AJAX avec <code>XMLHttpRequest</code>.</p>
</div>
<div class="paragraph">
<p>Il propose plusieurs méthodes, correspondant au verbes HTTP communs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>get</code></p>
</li>
<li>
<p><code>post</code></p>
</li>
<li>
<p><code>put</code></p>
</li>
<li>
<p><code>delete</code></p>
</li>
<li>
<p><code>patch</code></p>
</li>
<li>
<p><code>head</code></p>
</li>
<li>
<p><code>jsonp</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Si tu as déjà utilisé le service <code>$http</code> en AngularJS&#160;1.x, tu dois te rappeler
qu&#8217;il utilisait largement les promesses (<em>Promises</em>).
Mais en Angular, toutes ces méthodes retournent un objet <code>Observable</code>.</p>
</div>
<div class="paragraph">
<p>L&#8217;utilisation des Observables apporte plusieurs avantages, comme la possibilité
d&#8217;annuler une requête, de la retenter, d&#8217;en composer facilement plusieurs, etc.</p>
</div>
<div class="paragraph">
<p>Commençons par récupérer les courses enregistrées dans PonyRacer.
On supposera qu&#8217;un serveur est déjà prêt et disponible,
fournissant une belle API RESTful. Pour charger les courses, on enverra une requête
GET sur une URL genre 'http://backend.url/api/races'.</p>
</div>
<div class="paragraph">
<p>Généralement, l&#8217;URL de base de tes appels HTTP sera stockée dans une variable ou
un service, que tu pourras facilement variabiliser selon ton environnement.
Ou, si l&#8217;API REST est servie par le même serveur que l&#8217;application Angular, tu
peux simplement utiliser une URL relative&#160;: '/api/races'.</p>
</div>
<div class="paragraph">
<p>Avec le service <code>HttpClient</code>, une telle requête est triviale&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">http.get(`${baseUrl}/api/races`)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela retourne un Observable, et tu peux donc t&#8217;y abonner pour obtenir la réponse.
Le corps de la réponse est la partie la plus intéressante,
et est directement émis par l&#8217;Observable&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">http.get(`${baseUrl}/api/races`)
  .subscribe((response: Array&lt;RaceModel&gt;) =&gt; {
    console.log(response);
    // logs the array of races
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Évidemment, tu peux accéder à la réponse HTTP complète.
L&#8217;objet retourné est alors une <code>HttpResponse</code>,
avec quelques champs comme le champ <code>status</code> (code de la réponse), le champ <code>headers</code>, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">http.get(`${baseUrl}/api/races`, { observe: 'response' })
  .subscribe((response: HttpResponse&lt;Array&lt;RaceModel&gt;&gt;) =&gt; {
    console.log(response.status); // logs 200
    console.log(response.headers.keys()); // logs []
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;observable échoue si la réponse a un statut différent de 2xx ou 3xx,
et l&#8217;erreur récupérée est alors une <code>HttpErrorResponse</code>.</p>
</div>
<div class="paragraph">
<p>Envoyer des données est aussi trivial.
Il suffit d&#8217;appeler la méthode <code>post()</code>, avec l&#8217;URL et l&#8217;objet à poster&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// you currently need to stringify the object you send
http.post(`${baseUrl}/api/races`, newRace)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Je ne te montrerai pas les autres méthodes, je suis sûr que tu as compris le principe.</p>
</div>
</div>
<div class="sect2">
<h3 id="_transformer_des_données">16.2. Transformer des données</h3>
<div class="paragraph">
<p>Ce genre de travail sera généralement réalisé dans un service dédié.
J&#8217;ai tendance à créer un service, genre <code>RaceService</code>, où tout le travail sera réalisé.
Ainsi, mon composant n&#8217;a qu&#8217;à s&#8217;abonner à la méthode de mon service, sans savoir
ce qui est réalisé sous le capot.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">raceService.list()
  .subscribe(races =&gt; {
    // store the array of the races in the component
    this.races = races;
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu peux aussi bénéficier de la puissance de RxJS pour par exemple retenter
plusieurs fois une requête en échec.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">raceService.list().pipe(
  // if the request fails, retry 3 times
  retry(3)
).subscribe(races =&gt; {
  // store the array of the races in the component
  this.races = races;
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_options_avancées">16.3. Options avancées</h3>
<div class="paragraph">
<p>Évidemment, tu peux ajuster tes requêtes plus finement.
Chaque méthode accepte un objet <code>options</code> en paramètre optionnel,
où tu peux configurer ta requête.</p>
</div>
<div class="paragraph">
<p>L&#8217;option <code>params</code> représente les paramètres de recherche
(que l&#8217;on appelle aussi <em>query string</em>) à ajouter à l&#8217;URL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const params = {
  'sort': 'ascending',
  'page': '1'
};

http.get(`${baseUrl}/api/races`, { params })
// will call the URL ${baseUrl}/api/races?sort=ascending&amp;page=1
  .subscribe(response =&gt; {
    // will return the races sorted
    this.races = response;
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;option <code>headers</code> est pratique pour ajouter quelques headers custom à ta requête.
Cela est notamment nécessaire pour certaines techniques d&#8217;authentification,
comme par exemple JSON Web Token&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const headers = { 'Authorization': `Bearer ${token}` };

http.get(`${baseUrl}/api/races`, { headers })
  .subscribe(response =&gt; {
    // will return the races visible for the authenticated user
    this.races = response;
  });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jsonp">16.4. Jsonp</h3>
<div class="paragraph">
<p>Pour te permettre d&#8217;utiliser leur API sans être bloqué par la <em>Same Origin Policy</em> ("politique de même origine") assurée par les navigateurs web,
certains services web n&#8217;utilisent pas CORS, mais JSONP (<em>JSON with Padding</em>).</p>
</div>
<div class="paragraph">
<p>Le serveur ne retournera pas le JSON directement, mais l&#8217;emballera dans une fonction passée en callback.
La réponse arrive alors sous forme de script, et les scripts ne sont pas soumis à la <em>Same Origin Policy</em>.
Une fois chargé, tu peux alors accéder à la valeur JSON contenue dans la réponse.</p>
</div>
<div class="paragraph">
<p>En plus des classiques méthodes HTTP,
le <code>HttpClient</code> offre une méthode <code>jsonp</code>.
Tout ce que tu as à faire est de fournir l&#8217;URL du service à appeler,
et d&#8217;ajouter le nom du callback que tu veux.</p>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple ci-dessous, je vais récupérer tous les dépôts publics de
notre organisation Github via JSONP.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">http.jsonp('https://api.github.com/orgs/Ninja-Squad/repos', 'callback').pipe(
  // extract data
  map((res: { data: Array&lt;any&gt; }) =&gt; res.data)
).subscribe(response =&gt; {
  // will return the public repos of Ninja-Squad
  this.repos = response;
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_intercepteurs">16.5. Intercepteurs</h3>
<div class="paragraph">
<p>Une des raisons de la réécriture du module Http est l&#8217;ajout des intercepteurs.
Les intercepteurs sont intéressants lorsque l&#8217;on veut&#8230;&#8203; intercepter des requêtes ou des réponses dans l&#8217;application.</p>
</div>
<div class="paragraph">
<p>Par exemple, si l&#8217;on veut intercepter toutes les requêtes pour ajouter un header particulier à certaines d&#8217;entre elles,
on peut écrire un intercepteur comme celui-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Injectable()
export class GithubAPIInterceptor implements HttpInterceptor {

  intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {

    // if it is a Github API request
    if (req.url.includes('api.github.com')) {
      // we need to add an OAUTH token as a header to access the Github API
      const clone = req.clone({ setHeaders: { 'Authorization': `token ${OAUTH_TOKEN}` } });
      return next.handle(clone);
    }
    // if it's not a Github API request, we just handle it to the next handler
    return next.handle(req);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que tu dois cloner la requête pour la mettre à jour (les requêtes sont immuables).</p>
</div>
<div class="paragraph">
<p>Il faut ensuite ajouter l&#8217;intercepteur au tableau <code>HTTP_INTERCEPTORS</code> grâce à l&#8217;injection de dépendances&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">providers: [
  { provide: HTTP_INTERCEPTORS, useClass: GithubAPIInterceptor, multi: true }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, toute requête passera par notre intercepteur,
et recevra le header que nous avons défini si nécessaire (ici les appels à l&#8217;API Github).</p>
</div>
<div class="paragraph">
<p>Il est également possible d&#8217;intercepter la réponse,
ce qui peut être pratique pour gérer les erreurs de façon générique&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Injectable()
export class ErrorHandlerInterceptor implements HttpInterceptor {

  constructor(private router: Router, private errorHandler: ErrorHandler) {}

  intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {
    return next.handle(req).pipe(
      // we catch the error
      catchError((errorResponse: HttpErrorResponse) =&gt; {
        // if the status is Unauthorized
        if (errorResponse.status === 401) {
          // we redirect to login
          this.router.navigateByUrl('/login');
        } else {
          // else we notify the user
          this.errorHandler.handle(errorResponse);
        }
        return throwError(errorResponse);
      })
    );
  }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tests">16.6. Tests</h3>
<div class="paragraph">
<p>Nous avons maintenant un service appelant une API REST pour récupérer les courses.
Comment testons-nous ce service&#160;?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class RaceService {
  constructor(private http: HttpClient) {
  }

  list(): Observable&lt;Array&lt;RaceModel&gt;&gt; {
    return this.http.get&lt;Array&lt;RaceModel&gt;&gt;('/api/races');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans un test unitaire, on ne veut pas vraiment appeler le serveur HTTP&#160;: ce n&#8217;est pas ce que nous testons.
Nous voulons faire un "faux" appel HTTP pour retourner de fausses données.
Pour cela, nous pouvons remplacer la dépendance au service <code>HttpClient</code> par une implémentation bouchonnée
en important <code>HttpClientTestingModule</code>.
Nous pouvons ensuite utiliser une classe fournie par le framework appelée <code>HttpTestingController</code>
pour simuler les réponses HTTP&#160;:</p>
</div>
<div class="paragraph">
<p>Et on peut également ajouter quelques assertions sur la requête HTTP sous-jacente&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { async, TestBed } from '@angular/core/testing';
import { HttpClientTestingModule, HttpTestingController } from '@angular/common/http/testing';
describe('RaceService', () =&gt; {

  let raceService: RaceService;
  let http: HttpTestingController;

  beforeEach(() =&gt; TestBed.configureTestingModule({
    imports: [HttpClientTestingModule]
  }));

  beforeEach(() =&gt; {
    raceService = TestBed.get(RaceService);
    http = TestBed.get(HttpTestingController);
  });

  it('should return an Observable of 2 races', async(() =&gt; {
    // fake response
    const hardcodedRaces = [{ name: 'London' }, { name: 'Lyon' }];

    // call the service
    let actualRaces = [];
    raceService.list().subscribe(races =&gt; actualRaces = races);

    // check that the underlying HTTP request was correct
    http.expectOne('/api/races')
    // return the fake response when we receive a request
      .flush(hardcodedRaces);

    // check that the returned array is deserialized as expected
    expect(actualRaces.length).toBe(2);
  }));
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le tour est joué&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/8/http">HTTP</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>&#160;!
Nous avons préparé une API REST complète, prête à être utilisée.
Récupérons donc les courses avec le service <code>HttpClient</code>&#160;!
Plus tard, nous apprendrons comment appeler une API sécurisée avec un système d&#8217;authentification et des intercepteurs
dans les exercices
<a href="https://angular-exercises.ninja-squad.com/exercises/18/http-auth">HTTP avec authentification</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>,
<a href="https://angular-exercises.ninja-squad.com/exercises/19/bet">Parier sur un poney</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>
et
<a href="https://angular-exercises.ninja-squad.com/exercises/20/cancel-bet">Annuler un pari</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>.
Dans le même genre, nous utiliserons aussi les
<a href="https://angular-exercises.ninja-squad.com/exercises/22/websockets">WebSockets</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>.</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="router">17. Routeur</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Il est classique de vouloir associer une URL à un état de l&#8217;application.
En effet, on veut qu&#8217;un utilisateur puisse mettre une page en favori et y revenir plus tard,
et ça donne une meilleure expérience en général.</p>
</div>
<div class="paragraph">
<p>La partie en charge de ce travail s&#8217;appelle un routeur, et chaque framework a le sien (voire même plusieurs).</p>
</div>
<div class="paragraph">
<p>Le routeur d&#8217;Angular a un objectif simple&#160;: permettre d&#8217;avoir des URLs compréhensibles qui
reflètent l&#8217;état de notre application, et déterminer pour chaque URL quels composants initialiser et insérer dans la page.
Tout cela sans rafraîchir la page et sans lancer de requête auprès de notre serveur&#160;:
c&#8217;est tout l&#8217;intérêt d&#8217;avoir une <em>Single Page Application</em>.</p>
</div>
<div class="paragraph">
<p>Tu sais probablement qu&#8217;il y a un routeur natif dans AngularJS&#160;1.x,
maintenu par l&#8217;équipe du framework, dans un module nommé <code>ngRoute</code>.
Tu sais aussi peut-être qu&#8217;il est très basique&#160;: il suffit pour des applications simples,
mais il ne permet qu&#8217;une seule vue par URL, sans imbrication possible.
C&#8217;est donc trop limité pour de grosses applications, où on a souvent des vues dans des vues.
Il y a cependant un autre module très populaire dans la communauté, nommé <code>ui-router</code>,
que beaucoup de monde utilise et qui fait du très bon boulot.</p>
</div>
<div class="paragraph">
<p>Avec Angular, l&#8217;équipe a décidé de réduire l&#8217;écart et a écrit un nouveau module <code>RouterModule</code>.
Et ce module va probablement répondre à tous tes besoins&#160;!</p>
</div>
<div class="paragraph">
<p>Quelques-unes des ses nouvelles fonctionnalités sont vraiment intéressantes.
Alors lançons-nous&#160;!</p>
</div>
<div class="sect2">
<h3 id="_en_route">17.1. En route</h3>
<div class="paragraph">
<p>Commençons à utiliser le routeur.
C&#8217;est un module optionnel&#160;; il n&#8217;est donc pas inclus dans le noyau du framework.
Comme nous l&#8217;avons vu avec les autres modules,
tu dois l&#8217;inclure dans le module racine si tu veux l&#8217;utiliser.
Mais pour ça,
nous avons besoin d&#8217;une configuration
pour définir les associations entre les URLs et les composants.
Cela peut se faire dans un fichier dédié, généralement nommé <code>app.routes.ts</code>,
et contenant un tableau représentant la configuration&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Routes } from '@angular/router';
import { HomeComponent } from './home/home.component';
import { RacesComponent } from './races/races.component';

export const ROUTES: Routes = [
  { path: '', component: HomeComponent },
  { path: 'races', component: RacesComponent }
];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite nous devons importer le module routeur dans notre module racine,
initialisé avec la bonne configuration&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { RouterModule } from '@angular/router';
import { ROUTES } from './app.routes';
import { HomeComponent } from './home/home.component';
import { RacesComponent } from './races/races.component';


@NgModule({
  imports: [BrowserModule, RouterModule.forRoot(ROUTES)],
  declarations: [AppComponent, HomeComponent, RacesComponent],
  bootstrap: [AppComponent]
})
export class AppModule {
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Tu dois aussi déclarer tous les composants utilisés par le routeur
dans les <code>declarations</code> du module racine.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Comme tu le vois, les <code>Routes</code> sont un tableau d&#8217;objets, chacun d&#8217;eux étant une&#8230;&#8203; route.
Une configuration de route est en général une paire&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>path</code>&#160;: quelle URL va déclencher la navigation&#160;;</p>
</li>
<li>
<p><code>component</code>&#160;: quel composant sera initialisé et affiché&#160;.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tu te demandes peut-être où le composant sera inclus dans la page, et c&#8217;est une bonne question.
Pour qu&#8217;un composant soit inclus dans notre application, comme le <code>RacesComponent</code> de l&#8217;exemple ci-dessus,
il faut utiliser un tag spécial dans le template du composant principal&#160;: <code>&lt;router-outlet&gt;</code>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdYAAAGWCAIAAABKIDVhAAAdmUlEQVR42u3de3TP9+HHcbmHSFySJSEXlyCRy+TIaY1k6q7DlM39cpph3ai6NZpQfzRLY3MZ63Y6WlN3q9mwxWVrSw6Zqm3aMtlRMyW0RC0XFoTk199r3uvnfH2TfHKhkcbz8YfzuX8+30ueeeeTL5p8DgB4SJrwFAAACQaARzjB/wcAqBckGABIMACQYBIMACQYAEgwAIAEAwAJBgCQYAAgwQAAEgwAJBgAQIIBgAQDAEgwAJBgAAAJBgASDAAkmAQDAAkGABIMACDBAECCAQAkGABIMACABAMACQYAkGAAIMEAABIMACQYAECCAaCxJzgqKqoJADR2al1DTLCu7HMAaOzUumvXrv3nP/+5efNmaWlpWVkZCQaA+kvwhQsX8vPzCwoKFGJVmAQDQP0lODc391//+tcnn3yiCt+4cYMEA0D9Jfjdd989fvy4Knz58uXr16+TYACovwTv27dPFT558mReXl5RUREJBoD6S/C2bdveeuutv/71r2fOnPn3v/9NggGg/hL861//+o9//ONf/vKXf/7znyQYAEgwCQZAgkkwAJBgACDBJBgASDAAkGASDAAkGABIMAkGABIMACSYBAMACQYAEkyCAYAEAwAJ/rITXFRU5OXlpaN17tz5QT1l586de+aZZ9q1a+fp6env79+rV681a9Y4PhEAQIL/a926dTqUr6+v/jx27Nj9H/DkyZPKro7m5+eXlJT02GOPubq6ajY5ObkxvS0OHz6sB3XkyBG+QgASXHdPPvmkDrVy5Ur9+cILL9z/AXv27KlD9e/fv7Cw0Cz56KOPoqKitCQ/P7/RvC1SUlJIMECC78vVq1fd3d0TEhJu3brVokWLdu3aOa51c3Mz/3He448/7uXl1blz5z/96U/2q06fPq3lLi4uym5VJ7158+aCBQvat2/v4eERGBg4efLkTz/91Kxyv+vUqVO6pKZNm+rbQ3Fx8fLlywMCAoKCgn72s59Ve2HVHjwvL69fv346eExMzIEDB8yqgoKCadOmaXtPT8+vf/3rWVlZ9rt069atyRcGDx7MFwlAguti9erVOs6yZcs0nZyc7DSsa9asmZZ06dLlpZdeGjlypKaVaTXRZtVvf/tbTSuXNicdMWKEtlFklyxZMnz4cHMbWum0DpuUlDRlypSWLVtq+lvf+lZ8fPx3vvMdTbu6up45c8b+wqo9+De+8Y2nn35aG5jr1PcerRoyZIhmZ8+evXXr1ri4OCXefAupapcdO3aEhYVpVrnXO4MvEoAE10Xfvn01YtUoT9NvvfWWjjlnzhxrrY+Pj5Zs3LjRzHbt2tWarWrV+vXrNREbG1vVGU+cOKENlDYNPB333bRpk3XYN954Q9MrVqzQtJaYGxrdu3c3r4TN2Wty8J///Oeavn79upnNzc09fvy4Jjp16mR2efvttzX77LPP2uxiDYS5EQGQ4Dq6dOmS+UWZo5CQEOuKTXHOnj1rZidNmqTZH/3oRzardu7cqYmAgICqTrphwwYzSrWWaICpJfPnz7cOq2dZ01lZWZru0aOH2Wzs2LGa1bDd5uw1Ofjp06fNqpiYGM3++c9/fvPNN5tU0L9/f5tdSDBAgu83wa+88ooO0rNnz6e/EB0drSUHDx50TPDHH39sZidMmKDZjIwMm1UaUJuEffjhh5We1AyTNaS1lkyePNn6TaA57IULFzS9b98+TT/xxBNms4kTJ2p21apVNmev+cGthubk5PzmN78xtzWyHJgnoapdSDBAgu83wb169dJBjh49ai0xH1CbMWOGY4K3bt1qZiMjI61Zm1UDBw40Zb9y5YpZ+8knn2gwO3ToUD19f//737W2adOm5vZCeXl5p06dtGTbtm21TXDFs9f84I49Nbcv/P39S0tLnZ6iahNspgGQ4No5f/68i4tL69at1Slr4cWLF3XYwMDAsrIyK0CdO3d++eWXv/vd75o7DCUlJfarNDgNCQkxt3ET7/L09NTsoEGDzLnMb8wef/zxpUuXDh48WNPx8fG3b9+ubYIrPXsND+7UUPPJPH2T+MUvftG3b19fX9/XX3/dfhdtpukhQ4bo+xZfJAAJrp1ly5bpCKNHj3Zabn5/9fbbb1sB2rlzpyqmjMbGxh46dMhxeFjpKrl8+fLs2bMjIiK0qmXLlhoCv/LKKybrn9/93FhaWlp4eLi7u3ubNm1+8IMfWL89q1WCKz17DQ/u1NOrV68mJydrIKyjdenSZfny5eZls9lFb4i2bdu2aNFi7NixfJEAJPjBcwpQDVfVg4d7dgAkmASTYIAEk2ASDIAEAwAJJsEAQIIBgASTYAAgwQBAgkkwAJBgACDBJBgASDAAkGASDAAkGABIMAkGQIJJMACQYBIMgASTYAAgwQBAgkkwAJBgACDBJBgASDAAkOAGluCoqKgmAFBf1BwSfM9D4lsrgPocyZJgEgyABJNgACSYBAMACSbBAEgwCQYAEtyQE+zv7699161b57gwJiZGCzMyMh7gC5aamqpjjh07lvcuQIJJMAkGQIJJMAASTIJtElxWVpaZmRkREeHh4REaGrpo0SItMasKCgpmzJgRFhbm7e3duXPn5cuXW89OYWHh+PHjfXx8dIqUlJT58+c7JtjmmAEBAdoyOzs7KSmpVatWvNcBEvxIJ3jmzJmajYuLW7FiRb9+/TQ9b948s2rgwIGa7d279+LFi006X3vtNbNq0qRJmm3duvVzzz3Xs2fPr33ta44JtjlmSEiIOabyHR4eznsdIMGNPMGVMgnOz893d3fX7KlTpzR7/fp1X19fLy+v4uLiW7dupaWlaRR89uxZrUpPT9dmgwYN0vSVK1fMXrt27dJsaWlpx44drQTbHFOz7dq106rY2FgzC4AEN/IE+/n5BTkwfTQJzsrK0rSLi8uLX9AGWnLgwAHH45SXl2v8a9Kp2ZycHNPxGzdumA1++MMfWgm2P6ZJsEbHvMsBEvyo34jYtGmTpl1dXSPutWfPHq3dsGFDt27dmjVrZo2dta+W79ixQ9Ma2FrHXLBggZVg+2OaBG/fvp13OUCCH/UE7969W9Nubm4a5zrtq0GrVnl7e69du/bo0aMLFy60Enzo0CGnUfC0adOsBNsc00rwzp07eZcDJPhRT7B13zY7O1uzxcXF2qVr165FRUXaQMs1CjZ7PfXUU5qNjIzU9OXLl1VYq6Q3b940v2Rzuhdc8ZgkGCDBJPieT0RMnz5ds8HBwWlpaYmJiZqeM2eOlm/bts3c0p0yZUqfPn2SkpI07eHhsXTpUq0dOXKk+UTErFmzHnvssbCwMM2OGTPG/pgkGCDBJNj5c8Hp6ekdOnTw9PTUn1puPsOra1Y3AwICmjdvPn78+IKCgtTU1MDAwC5dupiB8LBhw7y9vYOCghYtWvTjH/9Yx/z2t79tf0wSDJBg/pkeACDBJBgACSbBAECCSTAAEkyCAZBgEkyCAZBgEgyABJNgACDBJBgACSbBAECCSTAAEkyCAYAEk2AAJJgEAwAJJsEASDAJBgASTIIBkGASDAAkmAQDIMEkGABIMAkGQIJJMAASTIJJMAASTIIBkGASDAAkmAQDIMEkGABIMAkGQIJJMACQYBIMgASTYAAgwSQYAAkmwQBAgkkwABJMggGABJNgACSYBAMgwSTYQXBwcBMAqC9qDgkGgK/kCJoEAwAJJsEASDAJBgASDAAkmAQDAAkGABJMggGABAMACSbBAECCAYAEk2AAIMEAQIJJMACQYAAgwSQYAEgwAJBgEgyABJNgACDBJBgACSbBAECCAYAEk2AAIMEAQIJJMACQYAAgwSQYAEhwVFRUEwCoL2oOCb7nIfGtFUB9jmRJMAkGQIJJMAASTIIBgASTYAAkmAQDAAkmwQBIMAkGABJMggGQYBIMACSYBAMgwSQYAEgwCQZAgkkwAJBgEgyABJNgACDBJBgACSbBAEgwCSbBAEgwCQZAgknwA+Lv7+/4v/W5urqGhYWNGjXqxIkTDeEdcOfOndWrV/fq1atFixZeXl4dO3acMWPG+fPn63a0du3a6THu3LmTLy2ABDegBLdv3z7hrtjYWG9vby1p2rTpA6lwXl6ei4vLypUr67BvaWnp4MGDzfeGoKCgyMhINzc3Tbdq1erIkSN1OHsNE3w/1wyQYBJc6wSvW7fOWnL58uW2bdtq4XPPPXf/x1+2bJkOVbecLVy4UPvqW8Lvfvc7s+TChQs9evTQwpCQkJKSktqevYYJvp9rBkgwCb6vBMuIESO0cPz48daSjRs3du/eXTVs3rx579699bQ6XpV88MEHZjY1NVWzY8eO1bSG1Y53Oa5fv15WVpaZmRkREeHh4REaGrpo0SItMTsGBARom+zs7KSkJI1zNQT28/PTkvnz5zte26lTp1xdXbV8zZo1tT27Y4KrupKKe/F1CBJMgusvwRcvXgwMDNTCn/zkJ2bJkiVLzGh06tSp48aNc7lr165d1SZ47dq1apxmhwwZkpGRcfv27ZkzZ2o2Li5uxYoV/fr10/S8efPMjhrYalZ99/HxCQ8PP3r0qDlybm6u0zUnJiZq+cSJE2t7dscEV3UlFffi6xAkmAR/uQm27gUrSeZecHR0dFFRkTYoLCxs1qyZlmggbHZJSUnRbExMTLUJlv79+1s/1Ofn57u7u2tWI1nNaoDp6+vr5eVVXFxs3SWIjY01swqlOXLFGw6TJ0/W8j59+tTq7I43IuyvxGkvgAST4C83wU6+//3vmxjJ3r17nVKYk5Njlug5rVUEs7KyNK0R9ItfCAoK0pIDBw5YfdSY1OyoUXZVtwImTJig5YMGDapzgu2vhAQDJPjh3IgYNWqUZvWTvrXB5s2btUQDYWtJbm6uCd+ZM2dqFcFNmzaZz71F3GvPnj1WH7dv3252PHbsmDnyhx9+6HTNvXr10vKpU6fWOcH2V0KCARL8cBKsvJpfdu3YscMs2bdvn8ncjRs3zJKDBw+aJYWFhZo12x8+fNisTU5OriqCu3fv1rSbm1t5eXnFK3H6uMKdO3fMtTl9MOOjjz5yvMKan93xFPZXQoIBEvxwEiwTJ07UksjISEVQs0VFReZe8JYtW8wGs2bN0mxCQoKZNb9GW7x4saY/++yz1q1bO0ZwwIABms3MzPzc4V5wdna2ZouLi3X2rl27mpvOFT8xlpGRoSWenp5bt241Sy5evGiGwNHR0aWlpbU6++eV3Quu9Eqc9gJIMAmuvwSfPn3a/A2IX/7yl2aJ+USEQjx9+vTRo0drWv3av3+/WTtt2jSzZOjQoaGhoX369NHsmDFjHIelbdu2nTt3rsKnI2g2ODg4LS3NfLBhzpw5lY6CzUB42LBhFf9qho5m/bWRWp3d8RQ2V+K0F1+HIMEkuP4SLN/73vdM9axfha1fvz4+Pt7Ly8vX11eDxJycHGvjq1evjho1ys/PTwV89dVXV61apX2HDx9u1p48eVIjVg8PD+VPY9iysrL09PQOHTpobKs/Nc61Phdc6d+b0No1a9Zo5KvzNm3aVBVOTU29fPly3c7u9Lngqq7EaS++DkGCSfCXlWAAIMEkGAAJJsEAQIJJMAASTIIBkGASTIIBkGASDIAEk2AAIMEkGAAJJsEAQIJJMAASTIIBgASTYAAkmAQDAAkmwQBIMAkGABL8lUxwSkrKzZs3G/67p9J/Ax6N+/V64C96DQ/YWN9sJLghJliXER8fb/2nxST4Ky0vL8/FxaUh/F+lzz///NNPP33s2LEG9aLX8KoeyMWTYBJc08sQb2/v5cuXk+CvumXLljWm/y6aF50EPyoJNvr06XPhwoWG/9VYVlaWmZkZERHh4eERGhq6aNEi63+Kc6QXSDGKjIz08vIKCwubNWuW+T+VjY0bN3bv3l3fe5o3b967d2+9t6xVAQEBOtd77703adIkHx+f9u3b79q1S++5IUOGNGvWLDY29ujRo2bLwMBAbbl79+7Jkye3uEtncbwYm7NcunRp2rRpujCt1WN5+eWXrR0LCgpmzJhhVnXu3FnfHa13sLm2v/3tb7Nnz27VqlVQUFBqaqrZMSEhwfHVtP6rwGpPZ/N8mtNlZ2cnJSXpdPbXVtXrZXPN9i+T40HMg7J+XNMRHP93bZtHV9VV1fC8JJgE11+CpWXLlm+++WYDT/DMmTM1HRcXt2LFin79+ml63rx5FXdZsGCBVvn7+z/77LMmT0888YR5K5j/RlpfrlOnTh03bpzLXeqs2TEkJERrFZ2ePXuaaT0tw4cP15I2bdpoVukpLy/XluHh4ZpVowcNGjRx4kRXV1fN/vSnPzXHsT9Lr169TEReeumlHj16aPqFF14wqwYOHKhZJXvx4sWmX6+99prjtfXt2zc6OtocQd544w2tWrt2reqjWX2ryMjIuH37tuOzYXM6m+fTnE5Xom9FerD211bV62VzzfYvU80TbPPoqrqqGp6XBJPgek2woV4UFhY2zATn5+e7u7tr+tSpU1qusZ6vr68GMsXFxY7b6y3i6elphqiavXbtmoaoKun777+vh6bBrFZpiGo2TklJ0WxMTIzjuQYPHqzpf/zjH+Y5GTFihGa1u5k9e/asteWTTz7peJxOnTpp2v4sumxN6wpv3bqlWY2/1IJvfvObmtaStLQ0jTTNKdLT07WlEu94bYmJiXfu3NHssGHDNDtq1Ciztn///pXeiLA5nf3zaU6ngb+Ztb+2qmJnc802L1PNE2zz6Kq6qpqflwST4IeQYNEPpPrxswEmOCsrSxMaTr74Bf1gqyUHDhxw3H7v3r1ms9LSUqdDmVVSUlJiluTk5JglemNZ51qzZo1ZqyQ5ltR86b777rvWlr/61a/Mqv3791sntT+LBtFmQK0jaBS2bds2/YBf8VFrM40xTQQdn4fVq1c73vzVGNA+wTans38+zek0Oq7JtdknuNJrtnmZap7gGj6Zjges+XlJMAm+X3369GlSexoRrF+/vgEmeNOmTZrQj/wR99qzZ4/j9mYz/fhc8VCbN2/WKg1RrSW5ubnmUZ85c6biV6BJ0r59+8yshkuaVU+tLf/whz+YVdYY+dKlS9WeRRGPioqynnBvb+/XX3/dbLlhw4Zu3bqZQbThNEK3rm3VqlWa1Y/e9gm2OZ3982lOt337dus4Ntdmn+BKr9nmZarVjQibJ9PmXVST85JgEvwQRsGq9scff9wwb0ToJ0dNuLm5mbuxVTGDOzE/nDpSTM2qGzdumCUHDx40S8ztl9om2Ppe9c4775ic6Sfuas9i6Mf/tWvXjhgxwuyYl5en4aeJiJYfPXp04cKFDyTBVZ3O/vl0Op39tdUhwTYvk9OO5j774cOHzark5GTHBFf16Ox/lqrJeUkwCa7XBLu7uy9fvtzcs2vg94LNfZLi4mJ/f/+uXbs6ftpBrly54uHhoc1+//vfa1Y/b4aGhvr5+eknUG1pBnFbtmwxG8+aNUuzCQkJlX4FVpvgkSNHmlXPP/+8ZqOjo80dSZuzHDlyJC4ubsKECdYFK2TmYxgZGRma0EjTLH/qqac0GxkZWZMEDxgwQLOZmZlOz57N6eyfT6fT2V9bHRJs8zJV+ju9xYsXa/qzzz5r3bq1lWCbR1fVVdX8vCSYBNdfgmNjYxvs39Fw/KqYPn26poODg9PS0hITEzU9Z86cirvMmzfP/Mp79uzZSUlJ5gGae3/mswpKpA41evRo871n//79dUtwmzZtVOEpU6aYkZp109PmLCUlJWFhYS4uLhrNKSvaV9Ph4eE3b97ctm2buU2phfpxRFeuafVi6dKl1SbYjA3btm07d+5ctdV6KmxOZ/98Op3O/trqkGD7l8lxx2nTppkncOjQocqlub02ZsyYah9dVVdVw/OSYBJcTwnWV11D/pvKTp8LTk9P79Chg6enp/7U0KzSD4HqJ2tFsFOnTmqE+vLMM89o7GOtXb9+fXx8vJeXl6+vrwaPJql1S7AOpeGYj49PQECAfjZ3fLfZnEXvY+2lfOtRqCAKx7lz58zbUq+FDtW8efPx48cXFBSkpqYGBgZ26dKl2pydPHlSY3A9Xm128eJFx2ejqtPZP59Op7O/trol2OZlctzx6tWro0aN0kBV/X311VfNQYYPH17to6vqqmp4XhJMgr/0V0Xv6Xfeeedz3N83BoAEk+Ba08iioX0EmAQDJJh/rBIkGCSYBAMACSbBAEgwCQYAEkyCAZBgEgwAJJgEAyDBJBgASDAJBkCCSTAAkGASDIAEk2AAJJgEk2AAJJgEAyDBJBgASDAJBkCCSTAAkGASDIAEk2AAIMEkGAAJJsEAQILr/pCCg4ObAEB9UXNIMAB8JUfQJBgASDAJBkCCSTAAkGAAIMEkGABIMACQYBIMACQYAEgwCQYAEgwAJJgEAwAJBgASTIIBgAQDAAkmwQBAggGABJNgACSYBAMACSbBAEgwCQYAEgwAJJgEAwAJBgASTIIBgAQDAAkmwQBAgqOiopoAQH1Rc0jwPQ+Jb60A6nMkS4JJMAASTIIBkGASDAAkmAQDIMEkGABIcMNPsL+/f6WfO/nggw94qwEgwfWR4I4dO/a41+nTp+/zdcrLy3NxcVm5ciVvWYAEk2C7BK9bt+6Bv07Lli3TkUkwQIJJcN0TvHHjxu7du3t7ezdv3rx379567mqyNiEhwfG2xvXr18vKyjIzMyMiIjw8PEJDQxctWqQlZuOAgABtk52dnZSU1KpVK97iAAkmwf+1ZMkSrVVhp06dOm7cOJe7du3aVe3atWvXqrZaO2TIkIyMjNu3b8+cOVOzcXFxK1as6Nevn6bnzZtnjhMSEqJZFdzHxyc8PJy3OECCH/Vfx925c6ewsLBZs2aa1lDXbJySkqLZmJgYTduvlf79+1s3IvLz893d3TV76tQpzWpQ7Ovr6+XlVVxcrNl27dppVWxsrJkFQIIf9V/HlZWV7d271+S4pKTEbJyTk2OW6ImzX+uU4KysLE1rjPziF4KCgrTkwIEDVoI1OubNDZBgbkT8z+bNm7VKQ11rSW5uronsmTNn7Nc6JXjTpk2adnV1jbjXnj17rARv376dNzdAgknw/+zbt88k9caNG2bJwYMHzZLCwkL7tU4J3r17t6bd3NzKy8srnsgkeOfOnby5ARJMgv+nqKjI3O3dsmWLWTJr1izNJiQkVLtWBgwYoNnMzMzPHe4FZ2dna7a4uFjn7dq1qw5CggESTILXVbrWfOZBqZ0+ffro0aM1rZLu37+/JmuTk5O1pG3btnPnzlWCtY1mg4OD09LSEhMTNT1nzhxGwQAJJsF2nwtev359fHy8l5eXr6+vBrY5OTk1XHvy5Mno6GgPDw8V9uLFi2VlZenp6R06dPD09NSfGRkZ1ueCSTBAgvlnegCABJNgACSYBAMACSbBAEgwCQYAEkyCAZBgEgyABJNgEgyABJNgACSYBAMACSbBAEgwCQYAEkyCAZBgEgwAJJgEAyDBJBgASDAJBkCCSTAAkGASDIAEk2AAIMEkGAAJJsEASDAJJsEASDAJBkCCSTAAkGASDIAEk2AAIMEkGAAJJsEAQIJJMAASTIIBgASTYAAkmAQDAAkmwQBIMAkGABJMggGQYBIMACS4guDg4CYAUF/UHBIMAF/JETQJBgASTIIBkGASDAAkGABIMAkGABIMACSYBAMACQYAEkyCAYAEAwAJJsEAQIIBgASTYAAgwQBAgkkwAJBgACDBJBgACSbBAECCSTAAEkyCAYAEAwAJJsEAQIIBgASTYAAgwQBAgkkwADSOBAcHBzcBgMbOz8+vISZYioqKzp8/f+LEiZycnN27d28BgMZIfVPl1DoVT91rKAm+du3ap59+evr06ffff//QoUN7AaAxUt9UObVOxVP3GkqCS0pKrl69euHCBV3Z8ePH3wOAxkh9U+XUOhVP3WsoCb5165a+Ieia9J3h3LlzHwFAY6S+qXJqnYqn7jWUBN+5c0dXo+8JxcXFBQUFnwFAY6S+qXJqnYqn7jWUBBvlXygDgMbIqlzdIvnlJhgAQIIBgAQDAEgwAJBgACDBJBgASDAAkGAAAAkGABIMACDBAECCAQAkGABIMACABAMACQYAkGAAIMEAABIMACQYAECCAYAEAwAJJsEAQIIBgAQDAOo7wQCAekaCAYAEA8Cj5/8BOnRA29VJd34AAAAASUVORK5CYII=" alt="diag cfaefbff1289fa19bd2fa1155ecbef0b" width="470" height="406">
</div>
</div>
<div class="paragraph">
<p>C&#8217;est évidemment une directive Angular,
dont le seul rôle est de marquer l&#8217;emplacement du template du composant de la route actuelle.
Le template de notre application ressemblera donc à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;header&gt;
  &lt;nav&gt;...&lt;/nav&gt;
&lt;/header&gt;
&lt;main&gt;
  &lt;router-outlet&gt;&lt;/router-outlet&gt;
  &lt;!-- the component's template will be inserted here--&gt;
&lt;/main&gt;
&lt;footer&gt;made with &amp;lt;3 by Ninja Squad&lt;/footer&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand on naviguera, tout restera en place (le <em>header</em>, le <em>main</em>, et le <em>footer</em> ici),
et le composant correspondant à la route actuelle sera inséré à la suite de la directive <code>RouterOutlet</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_navigation">17.2. Navigation</h3>
<div class="paragraph">
<p>Comment peut-on naviguer entre différents composants&#160;?
Bien sûr, tu peux saisir manuellement l&#8217;URL correspondante et recharger la page,
mais cela n&#8217;est pas très pratique.
On ne veut pas non plus utiliser des liens "classiques", avec <code>&lt;a href=""&gt;&lt;/a&gt;</code>.
En effet, un clic sur un tel lien entraîne un rechargement de la page, et redémarre donc l&#8217;application Angular toute entière.
Le but d&#8217;Angular est justement d&#8217;éviter ces rechargements&#160;: on construit une <em>Single Page Application</em>.
Bien sûr, une solution existe.</p>
</div>
<div class="paragraph">
<p>Dans un template, tu peux insérer un lien avec la directive <code>RouterLink</code> pointant sur le chemin où tu veux aller.
On peut utiliser cette directive car notre module racine importe <code>RouterModule</code>,
rendant toutes les directives exportées par <code>RouterModule</code> disponibles dans le module racine.
La directive <code>RouterLink</code> peut recevoir soit une constante représentant le chemin vers lequel tu veux naviguer,
soit un tableau de chaînes de caractères,
représentant le chemin de la route et ses paramètres.
Par exemple, dans le template de <code>RacesComponent</code>, si on veut aller sur <code>HomeComponent</code>,
on peut imaginer écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;a href="" routerLink="/"&gt;Home&lt;/a&gt;
&lt;!-- same as --&gt;
&lt;a href="" [routerLink]="['/']"&gt;Home&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A l&#8217;exécution, le lien <code>href</code> sera calculé par le routeur et pointera sur <code>/</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Le <em>slash</em> de début dans le chemin est nécessaire.
S&#8217;il n&#8217;est pas inclus, <code>RouterLink</code> construit une URL relativement au chemin courant
(ce qui peut être utile en cas de composants imbriqués, comme on le verra plus tard).
Ajouter un <em>slash</em> indique que l&#8217;URL doit être calculée depuis l&#8217;URL de base de l&#8217;application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La directive <code>RouterLink</code> peut être utilisée avec la directive <code>RouterLinkActive</code>,
qui peut ajouter une classe CSS automatiquement si le lien pointe sur la route courante.
Cela permet notamment de styler une entrée de menu comme active quand elle pointe sur la page courante.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;a href="" routerLink="/" routerLinkActive="selected-menu"&gt;Home&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut même récupérer une référence sur cette directive,
pour savoir si la route est active et s&#8217;en servir dans le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;a href="" routerLink="/" routerLinkActive #route="routerLinkActive"&gt;Home {{ route.isActive ? '(here)' : '' }}&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il est aussi possible de naviguer depuis le code, en utilisant le service <code>Router</code> et sa méthode <code>navigate()</code>.
C&#8217;est souvent pratique quand on veut rediriger notre utilisateur suite à une action&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export class RacesComponent {
  constructor(private router: Router) {
  }

  saveAndMoveBackToHome() {
    // ... save logic ...
    this.router.navigate(['']);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La méthode prend en paramètre un tableau dont le premier élément est le chemin
vers lequel tu souhaites rediriger l&#8217;utilisateur.</p>
</div>
<div class="paragraph">
<p>Il est également possible d&#8217;avoir des paramètres dans l&#8217;URL,
et c&#8217;est très pratique pour définir des URLs dynamiques.
Par exemple, on pourrait afficher une page de détail pour un poney,
et cette page aurait une URL significative comme <code>ponies/id-du-poney/le-nom-du-poney</code>.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, rien de compliqué.
On définit une route dans la configuration avec un (ou plusieurs) paramètre(s) dynamique(s).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export const routes: Routes = [
  { path: '', component: HomeComponent },
  { path: 'races', component: RacesComponent },
  { path: 'races/:raceId/ponies/:ponyId', component: PonyComponent }
];</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut alors définir des liens dynamiques avec <code>routerLink</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;a href="" [routerLink]="['/races', race.id, 'ponies', pony.id]"&gt;See pony&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et bien sûr on peut récupérer ces paramètres assez facilement dans le composant cible.
Ici, grâce à l&#8217;injection de dépendances, notre composant <code>PonyComponent</code> reçoit un objet du type <code>ActivatedRoute</code>.
Cet objet peut être utilisé dans <code>ngOnInit</code>, et a un champ bien pratique&#160;: <code>snapshot</code>.
Ce champ contient tous les paramètres de l&#8217;URL dans <code>paramMap</code>&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export class PonyComponent implements OnInit {
  pony: any;

  constructor(private ponyService: PonyService, private route: ActivatedRoute) {
  }

  ngOnInit() {
    const id = this.route.snapshot.paramMap.get('ponyId');
    this.ponyService.get(id).subscribe(pony =&gt; this.pony = pony);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce hook est aussi le bon endroit pour faire le travail d&#8217;initialisation du composant.</p>
</div>
<div class="paragraph">
<p>Comme tu l&#8217;as peut-être remarqué, nous utilisons <code>snapshot</code>. Cela veut-il dire qu&#8217;il y a une version non instantanée&#160;?
En effet. Et cela nous donne une façon de nous abonner aux changements de paramètre, avec,
tu l&#8217;as deviné, un observable.
Cet observable est appelé <code>paramMap</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Attention</div>
</td>
<td class="content">
Très important: le routeur va réutiliser le composant s&#8217;il le peut&#160;!
Supposons que notre composant a un bouton "Suivant" pour le poney suivant.
Quand l&#8217;utilisateur cliquera sur le bouton, l&#8217;URL va changer de <code>/ponies/1</code> à <code>/ponies/2</code> par exemple.
Le routeur va alors réutiliser notre instance de composant&#160;:
cela veut dire que <code>ngOnInit</code> ne sera pas appelée à nouveau&#160;!
Si tu veux que ton composant se mette à jour pour ce genre de navigation,
il n&#8217;y a pas d&#8217;autre choix que d&#8217;utiliser l&#8217;observable <code>paramMap</code>&#160;!
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export class PonyReusableComponent implements OnInit {
  pony: any;

  constructor(private ponyService: PonyService, private route: ActivatedRoute) {
  }

  ngOnInit() {
    this.route.paramMap.subscribe((params: ParamMap) =&gt; {
      const id = params.get('ponyId');
      this.ponyService.get(id).subscribe(pony =&gt; this.pony = pony);
    });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici nous nous abonnons à l&#8217;observable offert par <code>ActivatedRoute</code>.
Maintenant, à chaque fois que l&#8217;URL changera de <code>/ponies/1</code> à <code>/ponies/2</code> par exemple,
l&#8217;observable <code>paramMap</code> va émettre un événement,
et nous pourrons récupérer le bon poney à afficher à l&#8217;écran.</p>
</div>
<div class="paragraph">
<p>Note qu&#8217;au lieu de nous abonner au résultat du <code>PonyService</code>
dans l&#8217;abonnement des mises à jour des paramètres
on peut utiliser l&#8217;opérateur, plus élégant, <code>switchMap</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export class PonySwitchMapComponent implements OnInit {
  pony: any;

  constructor(private ponyService: PonyService, private route: ActivatedRoute) {
  }

  ngOnInit() {
    this.route.paramMap.pipe(
      map((params: ParamMap) =&gt; params.get('ponyId')),
      switchMap(id =&gt; this.ponyService.get(id))
    ).subscribe(pony =&gt; this.pony = pony);
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye notre exercice
<a href="https://angular-exercises.ninja-squad.com/exercises/10/router">Routeur</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>
pour apprendre à configurer le routeur,
naviguer entre composants, et tester tout ça.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce que tu viens d&#8217;apprendre devrait couvrir tes besoins de routage les plus communs. Mais le routeur va bien plus loin
que ça, et offre de nombreuses autres fonctionnalités. Les couvrir toutes en détails n&#8217;est pas une mince affaire, et
on peut vite se sentir submergé lorsqu&#8217;on tente de tout connaître sur le routeur.</p>
</div>
<div class="paragraph">
<p>Cette section tente de présenter
la plupart des fonctionnalités additionnelles, aussi brièvement que possible, en expliquant pourquoi elles peuvent être
utiles. Mais elle ne couvre pas chaque petit détail. Si tu ressens le besoin d&#8217;avoir une couverture exhaustive
de toutes les fonctionnalités du routeur, il y a un <a href="https://leanpub.com/router">livre entier</a> pour ça, écrit par le
contributeur principal du routeur d&#8217;Angular, Victor Savkin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_redirections">17.3. Redirections</h3>
<div class="paragraph">
<p>Il est assez commun de vouloir qu&#8217;une URL redirige simplement vers une autre URL dans l&#8217;application. Par exemple, un site
d&#8217;actualités pourrait rediriger l&#8217;URL racine vers <code>/breaking</code>, qui présenterait les toutes dernières nouvelles. Ou
encore, on pourrait vouloir conserver une URL utilisée avant un refactoring et la rediriger vers l&#8217;URL correspondante après
le refactoring. Cela est possible en utilisant</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{ path: '', pathMatch: 'full', redirectTo: '/breaking' },</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quelle_route_pour_une_url">17.4. Quelle route pour une URL&#160;?</h3>
<div class="paragraph">
<p>Dans l&#8217;exemple précédent, illustrant une redirection, j&#8217;ai appliqué une stratégie pour la sélection de la route&#160;:
<code>'full'</code>. La stratégie par défaut est <code>'prefix'</code>. Pour une URL donnée, cette stratégie choisit une route si l&#8217;URL
commence par le <em>path</em> de la route. Si j&#8217;avais utilisé cette stratégie par défaut ici, toutes les URLs
seraient redirigées vers <code>/breaking</code>, puisque toutes les URLs commencent par une chaîne vide.</p>
</div>
<div class="paragraph">
<p>La stratégie du routeur consiste à trouver la première route qui correspond à l&#8217;URL complète. Donc, par exemple,
si tu définis les routes</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{ path: 'races/:id', component: RaceComponent },
{ path: 'races/new', component: RaceCreationComponent }</code></pre>
</div>
</div>
<div class="paragraph">
<p>et que l&#8217;URL est <code>races/new</code>, le composant activé par le routeur sera le <code>RaceComponent</code>. En effet,
<code>races/:id</code> correspond à <code>races/new</code>, et apparaît en premier dans la liste des routes. Pour résoudre ce problème, il
suffit de changer l&#8217;ordre des routes&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{ path: 'races/new', component: RaceCreationComponent },
{ path: 'races/:id', component: RaceComponent }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_routes_hiérarchiques">17.5. Routes hiérarchiques</h3>
<div class="paragraph">
<p>Les routes peuvent avoir des routes filles. Cela peut être utile pour plusieurs raisons&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>appliquer des <em>guards</em> à plusieurs routes à la fois (voir plus loin)&#160;;</p>
</li>
<li>
<p>appliquer des <em>resolvers</em> à plusieurs routes à la fois (voir plus loin)&#160;;</p>
</li>
<li>
<p>appliquer un <em>template</em> commun à plusieurs routes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous avons expliqué au début de ce chapitre que, lorsque le routeur active une route, le composant de la route
est inséré dans la page à l&#8217;emplacement marqué par la directive <code>router-outlet</code>.</p>
</div>
<div class="paragraph">
<p>En fait, ce mécanisme peut aussi être utilisé par les composants imbriqués. Suppose que tu veuilles créer une page
complexe pour afficher le profil d&#8217;un poney. Cette page afficherait le nom et le portrait du poney dans sa partie
supérieure, et afficherait des onglets dans sa partie inférieure&#160;: un onglet pour le certificat de naissance du poney,
un autre pour son palmarès et un troisième pour les avis des journalistes. Tu veux bien sûr que chaque
onglet ait sa propre URL, afin de pouvoir créer des liens directs vers chacun d&#8217;eux.
Mais tu veux aussi éviter de recharger le poney, et de répéter son nom et son portrait sur chacun
des trois composants correspondant aux trois onglets.</p>
</div>
<div class="paragraph">
<p>La solution est d&#8217;utiliser un <code>router-outlet</code> dans le template du <code>PonyComponent</code>, et de définir une route mère pour
le poney, comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{
  path: 'ponies/:ponyId',
  component: PonyComponent,
  children: [
    { path: 'birth-certificate', component: BirthCertificateComponent },
    { path: 'track-record', component: TrackRecordComponent },
    { path: 'reviews', component: ReviewsComponent }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lorsque tu navigues vers <code>ponies/42/reviews</code>, par exemple, le routeur insère le PonyComponent à l&#8217;emplacement
marqué par le router-outlet principal, dans le composant racine. Le template du PonyComponent, en plus du nom et du
portrait du poney, contient lui aussi un router-outlet. C&#8217;est là que le composant de la route fille (<code>ReviewsComponent</code>)
est inséré.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag e25a8adcbd5af3494c96d6fcdb9342bb" width="450" height="336">
</div>
</div>
<div class="paragraph">
<p>Si tu navigues vers <code>ponies/42</code>, le composant pony sera affiché, mais aucun des trois sous-composants ne le sera.
Tâchons d&#8217;afficher plutôt le certificat de naissance par défaut. Il suffit pour cela d&#8217;ajouter une route fille,
avec un chemin vide, et qui redirige vers la route <code>birth-certificate</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{
  path: 'ponies/:ponyId',
  component: PonyComponent,
  children: [
    { path: '', pathMatch: 'full', redirectTo: 'birth-certificate' },
    { path: 'birth-certificate', component: BirthCertificateComponent },
    { path: 'track-record', component: TrackRecordComponent },
    { path: 'reviews', component: ReviewsComponent }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que, dans cet exemple, la redirection est relative à la route <code>ponies/:ponyId</code> parce qu&#8217;elle ne commence pas par
un <code>/</code>.</p>
</div>
<div class="paragraph">
<p>Au lieu de rediriger, on peut aussi afficher le certificat de naissance directement à l&#8217;adresse <code>ponies/42</code>. Là aussi,
il suffit d&#8217;utiliser un chemin vide&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{
  path: 'ponies/:ponyId',
  component: PonyComponent,
  children: [
    { path: '', component: BirthCertificateComponent },
    { path: 'track-record', component: TrackRecordComponent },
    { path: 'reviews', component: ReviewsComponent }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_guards">17.6. Guards</h3>
<div class="paragraph">
<p>Certaines routes de l&#8217;application ne devraient pas être accessibles à tous. L&#8217;utilisateur est-il authentifié&#160;?
A-t-il les permissions nécessaires&#160;? Bien sûr, il faut désactiver ou masquer les liens pointant sur ces routes
inaccessibles. Bien sûr, le backend doit aussi empêcher l&#8217;accès aux ressources interdites à l&#8217;utilisateur courant.
Mais cela n&#8217;empêchera pas l&#8217;utilisateur d&#8217;accéder aux routes qui lui sont interdites, simplement en entrant leur URL
dans la barre d&#8217;adresse du navigateur.</p>
</div>
<div class="paragraph">
<p>C&#8217;est là que les <em>guards</em> (gardes, gardiens) entrent en jeu. Il existe 4 types de <em>guards</em>&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CanActivate</code>&#160;: lorsqu&#8217;un tel <em>guard</em> est appliqué à une route, il peut empêcher l&#8217;activation de la route.
Il peut aussi avoir un effet de bord, comme par exemple naviguer vers une autre route. C&#8217;est ce qui
permet d&#8217;afficher une page d&#8217;erreur, ou de naviguer vers la page de connexion lorsqu&#8217;un utilisateur anonyme tente
d&#8217;accéder à une page qui requiert une authentification&#160;;</p>
</li>
<li>
<p><code>CanActivateChild</code>&#160;: Ce <em>guard</em> peut empêcher les activations des <em>enfants</em> de la route sur lequel il est appliqué.
Cela peut être utile, par exemple, pour empêcher l&#8217;accès à de nombreuses routes d&#8217;un seul coup, en fonction de leur URL&#160;;</p>
</li>
<li>
<p><code>CanLoad</code>&#160;: ce <em>guard</em> peut être utilisé sur une route qui a un attribut <code>loadChildren</code>. Cet attribut permet de
télécharger un module applicatif à la demande (<em>lazy loading</em>), contenant des routes filles. Nous parlerons du <em>lazy
loading</em> un peu plus tard. Ce <em>guard</em> va plus loin que les deux précédents en empêchant le téléchargement du fichier
JavaScript lui-même&#160;;</p>
</li>
<li>
<p><code>CanDeactivate</code>&#160;: ce <em>guard</em> est différent des trois autres. Il est utilisé pour empêcher de <em>quitter</em> la route actuelle.
Cela peut être utile pour, par exemple, demander une confirmation avant de quitter une page contenant un long
formulaire.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Voici comment appliquer un <em>guard</em> <code>CanActivate</code> à une route. Les trois autres types sont appliqués de manière similaire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{ path: 'races', component: RacesComponent, canActivate: [LoggedInGuard] }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans l&#8217;exemple ci-dessus, <code>LoggedInGuard</code> est un service Angular. Comme n&#8217;importe quel autre service, il doit être
déclaré dans les <em>providers</em> du module Angular.</p>
</div>
<div class="paragraph">
<p>Ce service doit implémenter l&#8217;interface <code>CanActivate</code>. Cela consiste simplement à décider si la route peut être activée
ou non (en vérifiant si l&#8217;utilisateur est authentifié ou non), et à retourner un <code>boolean</code>, une <code>Promise&lt;boolean&gt;</code>, ou
un <code>Observable&lt;boolean&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Le routeur naviguera vers la route si la valeur retournée est <code>true</code>, ou si la promesse retournée est résolue à <code>true</code>,
ou si l&#8217;observable retourné émet <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Voilà à quoi pourrait ressembler le <code>LoggedInGuard</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class LoggedInGuard implements CanActivate {

  constructor(private router: Router, private userService: UserService) { }

  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable&lt;boolean&gt;|Promise&lt;boolean&gt;|boolean {
    const loggedIn = this.userService.isLoggedIn();
    if (!loggedIn) {
      this.router.navigate(['/login']);
    }
    return loggedIn;
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Au lieu de définir un service et de passer son type dans la configuration de la route, on peut aussi passer une
fonction qui a la même signature que la méthode du service. Mais en règle générale, utiliser un service est un meilleur
choix, parce qu&#8217;une fonction est moins <em>type-safe</em>, et ne permet pas d&#8217;injecter un service dans le <em>guard</em>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les routes hiérarchiques, combinées aux routes à chemin vide, sont très pratiques pour appliquer un <em>guard</em> sur de
nombreuses routes d&#8217;un seul coup. Par exemple, si tu veux que les routes affichant des courses et des poneys ne soient
accessibles qu&#8217;aux utilisateurs authentifiés, au lieu de</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{ path: 'ponies/:ponyId', component: PonyComponent, canActivate: [LoggedInGuard] },
{ path: 'races', component: RacesComponent, canActivate: [LoggedInGuard] }</code></pre>
</div>
</div>
<div class="paragraph">
<p>tu peux introduire une route mère avec un chemin vide, et sans composant. Cette route ne consommera aucun segment d&#8217;URL,
et n&#8217;activera aucun composant, mais ses <em>guards</em> seront appelés chaque fois qu&#8217;on navigue vers l&#8217;une de ses routes filles&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{
  path: '',
  canActivate: [LoggedInGuard],
  children: [
    { path: 'ponies/:ponyId', component: PonyComponent },
    { path: 'races', component: RacesComponent }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resolvers">17.7. Resolvers</h3>
<div class="paragraph">
<p>Dans une bonne vieille application multi-pages, où les pages sont générées côté serveur, voilà ce qui se passe lorsqu&#8217;on
clique sur un lien&#160;: une requête est envoyée au serveur, le navigateur affiche une petite animation dans l&#8217;onglet,
 et quand la réponse du serveur arrive enfin, alors seulement le navigateur change l&#8217;URL dans la barre d&#8217;adresse
 et affiche le contenu de la nouvelle page téléchargée.</p>
</div>
<div class="paragraph">
<p>Dans une application Angular mono-page, ça ne marche pas vraiment comme ça. L&#8217;utilisateur clique sur un lien pour
afficher une course de poneys (par exemple). Le routeur crée une instance de <code>RaceComponent</code>, et le composant envoie
une requête AJAX pour charger la course. Le routeur insère immédiatement le template du composant à l&#8217;endroit
indiqué par le router-outlet. A cet instant, immédiatement après le clic, l&#8217;URL a déjà changé dans la barre d&#8217;adresse
et l&#8217;utilisateur voit déjà la nouvelle page, mais sans une seule course affichée. Lorsque la réponse arrive enfin
du serveur, la course est stockée dans le composant et le DOM est mis à jour pour afficher la course.</p>
</div>
<div class="paragraph">
<p>Cela a des avantages et des inconvénients&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la navigation vers la nouvelle page a l&#8217;air plus rapide&#160;;</p>
</li>
<li>
<p>l&#8217;utilisateur peut être perturbé si le chargement de la course est trop long, parce que la page apparaît vide, ce qui
ressemble à un bug&#160;;</p>
</li>
<li>
<p>le template doit être codé avec soin, parce qu&#8217;il doit fonctionner correctement pendant la courte période où la course
est <code>null</code> ou <code>undefined</code>&#160;;</p>
</li>
<li>
<p>le template peut cependant donner un feedback immédiat en affichant un message ou une animation indiquant
que la course est en court de chargement&#160;;</p>
</li>
<li>
<p>Même si le chargement échoue (à cause d&#8217;une perte de connexion par exemple), au lieu de rester sur la page courante,
la navigation est effectuée et l&#8217;URL change, bien que la page ne puisse afficher aucune course.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Un <em>resolver</em> permet de faire en sorte que notre application Angular se comporte pratiquement comme une application
multi-pages traditionnelle. Au lieu de charger la course depuis le composant lui-même, on applique un <em>resolver</em> à la route,
et ce <em>resolver</em> charge la course.</p>
</div>
<div class="paragraph">
<p>Comme un <em>guard</em>, un <em>resolver</em> peut retourner les données de manière synchrone (en retournant une course) ou asynchrone
(en retournant une promesse ou un observable de course). Le routeur ne navigue vers la route que lorsque la promesse
a été résolue, ou lorsque l&#8217;observable a émis une course et terminé. Voici à quoi un <em>resolver</em> ressemble:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Injectable({
  providedIn: 'root'
})
export class RaceResolver implements Resolve&lt;RaceModel&gt; {

  constructor(private raceService: RaceService) { }

  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable&lt;RaceModel&gt; | Promise&lt;RaceModel&gt; | RaceModel {
    return this.raceService.get(+route.paramMap.get('raceId'));
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, c&#8217;est un simple service qui utilise le snapshot de la nouvelle route, fournie par le routeur,
pour charger la course identifiée par le paramètre <code>raceId</code> et retourner un <code>Observable&lt;RaceModel&gt;</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
tu te demandes peut-être pourquoi on utilise <code>+route.paramMap.get('raceId')</code> et pas simplement
<code>route.paramMap.get('raceId')</code>. La raison est que le paramètre est de type <code>string</code> (c&#8217;est un segment d&#8217;URL), et que le
service attend un identifiant numérique. <code>+</code> est le moyen le plus concis de convertir une chaîne de caractères
en nombre.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Voici comment le <em>resolver</em> est appliqué à la route&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{
  path: 'races/:raceId',
  component: RaceComponent,
  resolve: {
    race: RaceResolver
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le <code>RaceResolver</code> est associé à une clé que j&#8217;ai choisi de nommer <code>race</code>. Le routeur utilise cette clé pour stocker la
course chargée par le <em>resolver</em> dans une propriété éponyme des <code>data</code> de la route. Ainsi, le <code>RaceComponent</code> peut
obtenir la course de cette manière&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export class RaceComponent implements OnInit {

  race: RaceModel;

  constructor(private route: ActivatedRoute) { }

  ngOnInit() {
    this.race = this.route.snapshot.data['race'];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que, si tu navigues d&#8217;une route à la même route, mais avec des paramètres différents (par exemple, si ta page
contient un lien <em>Course Suivante</em>), les <em>guards</em> et les <em>resolvers</em> appliqués à la route sont appelés à nouveau.
La même instance de composant, dans ce cas, sera néanmoins réutilisée, et il te faut donc souscrire à un observable pour obtenir
la course (ou stocker l&#8217;observable dans le composant et utiliser le <em>pipe</em> <code>async</code> dans le template)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export class RaceComponent implements OnInit {

  race: RaceModel;

  constructor(private route: ActivatedRoute) { }

  ngOnInit() {
    this.route.data.subscribe(data =&gt; this.race = data['race']);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les <em>resolvers</em> ont de nombreux avantages par rapport au chargement des données depuis le composant qui les affiche&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ils rendent la navigation plus traditionnelle&#160;;</p>
</li>
<li>
<p>ils peuvent être partagés par plusieurs routes&#160;;</p>
</li>
<li>
<p>ils simplifient le code du composant et de son template&#160;: plus besoin de charger la donnée&#160;; plus besoin de se
préoccuper de la période pendant laquelle le modèle est absent&#160;; plus besoin d&#8217;appliquer des opérateurs RxJS
relativement complexes pour obtenir les données à partir des paramètres&#160;;</p>
</li>
<li>
<p>si la navigation échoue, la page courante reste affichée, et il suffit à l&#8217;utilisateur de recliquer sur le lien
pour refaire une tentative.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le seul inconvénient que je peux trouver aux <em>resolvers</em> est que, dans le cas où le chargement est long,
l&#8217;application peut sembler ne pas réagir. L&#8217;utilisateur clique sur un lien, et rien de visible ne se produit
avant que les données aient été chargées par le <em>resolver</em>. Si tu sais que le chargement des données d&#8217;une page
est long (parce que le serveur doit faire des calculs complexes, ou interroger des services externes), naviguer directement
vers le composant et lui faire afficher une animation ou un message d&#8217;attente peut être plus ergonomique.
Un autre moyen de régler ce problème est de s&#8217;appuyer sur les événements de routage pour afficher ce message d&#8217;attente.</p>
</div>
</div>
<div class="sect2">
<h3 id="_événements_de_routage">17.8. Événements de routage</h3>
<div class="paragraph">
<p>Le routeur émet plusieurs événements lorsqu&#8217;on navigue vers une route. Tu peux être notifié de ces événements
en souscrivant à l&#8217;observable <code>events</code> du service <code>Router</code>. Les événements émis sont de plusieurs types,
que tu peux filtrer en utilisant <code>instanceof</code>. Par exemple&#160;: <code>event instanceof NavigationStart</code>.</p>
</div>
<div class="paragraph">
<p>Voici les différents types d&#8217;événements&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>NavigationStart</code>&#160;: émis lorsqu&#8217;une navigation est demandée. Par exemple lorsqu&#8217;on clique sur un lien. Cet événement peut être
utilisé pour afficher un indicateur animé&#160;;</p>
</li>
<li>
<p><code>NavigationEnd</code>&#160;: émis lorsque la navigation s&#8217;achève avec succès. Il peut être utilisé pour masquer l&#8217;indicateur animé.
Un autre cas d&#8217;utilisation est l&#8217;envoi d&#8217;un <em>hit</em> à un service de statistiques de consultation (comme Google Analytics par example).
Pratique pour connaître les pages populaires ou à l&#8217;inverse les fonctionnalités peu utilisées dans l&#8217;application&#160;;</p>
</li>
<li>
<p><code>NavigationError</code>&#160;: émis lorsque la navigation échoue à cause d&#8217;une erreur inattendue (comme un <em>resolver</em> retournant un
observable vide ou en erreur). Il peut être utilisé pour masquer l&#8217;indicateur animé, ou pour tenter d&#8217;envoyer une
erreur de navigation au serveur, par exemple&#160;;</p>
</li>
<li>
<p><code>NavigationCancel</code>&#160;: émis lorsqu&#8217;une navigation est annulée, parce qu&#8217;un <em>guard</em> a empêché la navigation, typiquement.
Là aussi, l&#8217;indicateur animé de navigation doit être masqué.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>D&#8217;autres événements existent pour le chargement des configurations de routes
(<code>RouteConfigLoadStart</code>, <code>RouteConfigLoadEnd</code>, <code>RoutesRecognized</code>) et,
depuis la version 4.3, pour les resolvers (<code>ResolveStart</code>, <code>ResolveEnd</code>)
et les guards (<code>GuardsCheckStart</code>, <code>GuardsCheckEnd</code>).
La version 5.0 a également introduit
des événements de navigation plus fins (<code>ChildActivationStart</code>, <code>ChildActivationEnd</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="_paramètres_et_data">17.9. Paramètres et data</h3>
<div class="paragraph">
<p>Nous avons vu plus tôt que les routes pouvaient avoir des paramètres. Par exemple, la route <code>races/:raceId</code> a un paramètre
nommé <code>raceId</code>. La valeur de ce paramètre, lorsqu&#8217;on navigue vers <code>/races/42</code>, est la chaîne de caractères <code>'42'</code>. Mais
cette route peut en fait avoir d&#8217;autres paramètres additionnels appelés <em>matrix parameters</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Les paramètres <em>matrix</em> ne sont pas spécifiques à Angular. Bien qu&#8217;assez rarement utilisés et donc moins connus
que les paramètres de requête, ils constituent des éléments standards des URIs, qui sont supportés par plusieurs frameworks
utilisés côté serveur.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Si tu navigues vers l&#8217;URL</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>/races/42;foo=bar;baz=wiz</code></pre>
</div>
</div>
<div class="paragraph">
<p>les propriétés <code>params</code> et <code>paramMap</code> de la route activée contiendront deux paramètres additionnels
'foo' et 'baz' ayant respectivement les valeurs 'bar' et 'wiz'.</p>
</div>
<div class="paragraph">
<p>Ces paramètres <em>matrix</em> sont spécifiques à la route. Ainsi, par exemple, si l&#8217;URL est</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>/races/42;foo=bar;baz=wiz/ponies</code></pre>
</div>
</div>
<div class="paragraph">
<p>alors le composant associé au segment <code>ponies</code> de la route n&#8217;aura pas <code>foo</code> ni <code>bar</code> dans les paramètres de son <code>ActivatedRoute</code>.
Seul le composant associé au segment <code>races/42</code> les aura.</p>
</div>
<div class="paragraph">
<p>Pour naviguer vers cette URL, on utilise le code suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">router.navigate(['/races', 42, {foo: 'bar', baz: 'wiz'}, 'ponies']);</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou, depuis le template, le router link équivalent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;a [routerLink]="['/races', 42, {foo: 'bar', baz: 'wiz'}, 'ponies']"&gt;Link&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les paramètres de requête (<em>query parameters</em>), en revanche, sont partagés par tous les segments de la route. Ils ressemblent
à ceci dans l&#8217;URL&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>/races/42/ponies?foo=bar&amp;baz=wiz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces paramètres de requête sont donc accessibles depuis n&#8217;importe quelle route, en utilisant les propriétés <code>queryParams</code>
ou <code>queryParamMap</code>.</p>
</div>
<div class="paragraph">
<p>Pour naviguer vers une URL comme celle-là, on utilise le code suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">router.navigate(['/races', 42, 'ponies'], { queryParams: {foo: 'bar', 'baz': 'wiz'} });</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou, depuis le template, le router link équivalent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;a [routerLink]="['/races', 42, 'ponies']"  [queryParams]="{foo: 'bar', baz: 'wiz'}"&gt;Link&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, nous avons vu que les <em>resolvers</em> permettaient d&#8217;ajouter des propriétés aux <code>data</code> de <code>ActivatedRoute</code>, avant
que la route ne soit activée. Il est aussi possible d&#8217;y ajouter des propriétés directement depuis la configuration
de la route. Cela peut être utile lorsque le même composant doit pouvoir être utilisé dans deux contextes différents,
par exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{
  path: 'races',
  component: RacesComponent,
  data: {
    allowDeletion: false
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_chargement_à_la_demande">17.10. Chargement à la demande</h3>
<div class="paragraph">
<p>Cette section clôture ce long chapitre sur le routeur d&#8217;Angular.</p>
</div>
<div class="paragraph">
<p>Inévitablement, les applications s&#8217;enrichissent de plus en plus de fonctionnalités, et leur taille ne fait qu&#8217;augmenter, jusqu&#8217;au
point où ça devient un problème&#160;: le fichier JS consomme trop de bande passante et met trop longtemps
à être téléchargé et analysé, en particulier sur les téléphones mobiles et les réseaux de mauvaise qualité.
Par ailleurs, le nombre de fonctionnalités augmentant, certaines d&#8217;entre elles ne sont utilisées que par certains
utilisateurs, ou par tous, mais rarement. Charger ces fonctionnalités dès le démarrage de l&#8217;application est un
gaspillage de bande passante et une perte de temps pour l&#8217;utilisateur. C&#8217;est là que le chargement à la demande
(<em>lazy loading</em>) devient intéressant.</p>
</div>
<div class="paragraph">
<p>Le chargement à la demande consiste à diviser l&#8217;application en plusieurs modules Angular. Un module chargé à la demande
définit ses propres routes, composants et services, tous empaquetés dans un fichier JavaScript qu&#8217;on appelle un <em>bundle</em>,
distinct du bundle principal de l&#8217;application.</p>
</div>
<div class="paragraph">
<p>Le module principal de l&#8217;application, lui, ne fait que définir une route
permettant d&#8217;accéder à ce module chargé à la demande. Comme le nom <em>"à la demande"</em> le laisse supposer, le routeur ne
télécharge le bundle de ce module que lorsque l&#8217;utilisateur navigue vers cette route. Une fois le module chargé,
 les composants, services et routes filles sont ajoutés à l&#8217;application, dynamiquement.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag 4345e88f90468e06f4059c1c6c4721b0" width="610" height="210">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Il est en réalité possible de pré-charger les modules en tâche de fond, après que l&#8217;application ait démarré,
sans attendre que l&#8217;utilisateur ait navigué vers une route du module fils, grâce à une <code>preloadingStrategy</code>
alternative.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Pour illustrer comment configurer concrètement un chargement à la demande, nous allons supposer que tu veux définir
une section dédiée aux administrateurs de l&#8217;application, qui doit être chargée à la demande. Nous supposerons aussi que tu
utilises Angular CLI pour construire ton application.</p>
</div>
<div class="paragraph">
<p>La première étape consiste à définir un module Angular pour cette partie réservée à l&#8217;administration. Le fichier
<code>admin.module.ts</code> contiendrait le code suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@NgModule({
  imports: [
    CommonModule
  ],
  declarations: []
})
export class AdminModule { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il y a une importante différence entre ce module fils, et le module racine de l&#8217;application. Ce module fils n&#8217;importe pas
<code>BrowserModule</code>. À la place, il importe <code>CommonModule</code>.</p>
</div>
<div class="paragraph">
<p>La seconde étape est de définir un composant <code>admin</code>, et au moins une route pour ce composant dans un ficher <code>admin.routes.ts</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">export const ADMIN_ROUTES: Routes = [
  { path: '', component: AdminComponent }
];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette configuration de routage doit être importée dans le module d&#8217;administration. Mais à nouveau, il y a une subtile
mais importante différence par rapport à la manière dont c&#8217;est réalisé dans le module principal&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@NgModule({
  imports: [
    CommonModule,
    RouterModule.forChild(ADMIN_ROUTES)
  ],
  declarations: [AdminComponent]
})
export class AdminModule { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Au lieu d&#8217;utiliser <code>RouterModule.forRoot()</code>, il faut utiliser <code>RouterModule.forChild()</code>, parce que ce module est un
module fils, et non le module racine de l&#8217;application.
Comme le routeur est un singleton et conserve un état (l&#8217;ensemble des routes), il ne s&#8217;agit pas d&#8217;en avoir deux instances
dans l&#8217;application. C&#8217;est la raison pour laquelle <code>forChild()</code> est utilisé.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Ces différences entre un module fils et un module racine ne sont pas spécifiques aux modules chargés à la
demande. Nous expliquerons les raisons de ces différences et les subtilités d&#8217;utilisation de multiples modules
 dans un chapitre futur.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Le composant <code>AdminComponent</code> est déclaré dans ce module d&#8217;administration, et non dans le module racine. Le déclarer dans
le module racine ne conduirait pas à l&#8217;objectif fixé, qui est de charger ce composant à la demande, lorsque nécessaire.</p>
</div>
<div class="paragraph">
<p>L&#8217;étape finale est d&#8217;ajouter une route dans le fichier de configuration des routes du module racine (<code>app.routes.ts</code>), et
d&#8217;indiquer au routeur qu&#8217;il faut charger le module d&#8217;administration lorsqu&#8217;on navigue vers cette route (ou une des
routes filles qu&#8217;il pourrait avoir)&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">{ path: 'admin', loadChildren: './admin/admin.module#AdminModule' }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le constates, ceci est réalisé grâce à la propriété <code>loadChildren</code> de la route d&#8217;administration.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
La valeur de cette propriété est une chaîne de caractères, contenant le chemin relatif du module d&#8217;administration
à charger dynamiquement, suivi du nom de la classe décorée par <code>NgModule</code>. Ce n&#8217;est <strong>pas</strong> une référence à la classe
<code>AdminModule</code>. En effet, ajouter une référence à cette classe empêcherait son chargement à la demande, puisque le module
racine aurait alors une dépendance au module d&#8217;administration qui lui-même dépend des composants et services qui y sont déclarés.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Lorsque l&#8217;application est construite, Angular CLI analyse la configuration des routes et détecte que le module
d&#8217;administration doit être chargé à la demande. Sans aucune autre configuration nécessaire, il génère un bundle JavaScript
supplémentaire (nommé <code>0.chunk.js</code>), et génère le code JavaScript nécessaire pour télécharger ce fichier lorsque le routeur
requiert le chargement de <code>'./admin/admin.module'</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="forms">18. Formulaires</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Attention</div>
</td>
<td class="content">
Ce chapitre utilise la nouvelle API de formulaire (du package <code>@angular/forms</code> qui est apparu en <code>rc.2</code>).
Si tu utilises l&#8217;ancienne API maintenant dépréciée, c&#8217;est le moment de mettre à jour. Ce chapitre t&#8217;aidera à faire la migration&#160;!
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_form_form_form_idable">18.1. Form, form, form-idable&#160;!</h3>
<div class="paragraph">
<p>La gestion des formulaires a toujours été super soignée en Angular.
C&#8217;était une des fonctionnalités les plus mises en avant en 1.x,
et, comme toute application inclut en général des formulaires, elle a gagné le cœur de beaucoup de développeurs.</p>
</div>
<div class="paragraph">
<p>Les formulaires, c&#8217;est compliqué&#160;: tu dois valider les saisies de l&#8217;utilisateur,
afficher les erreurs correspondantes, tu peux avoir des champs obligatoires ou non,
ou qui dépendent d&#8217;un autre champ, tu veux pouvoir réagir sur les changements de certains, etc.
On a aussi besoin de tester ces formulaires, et c&#8217;était impossible dans un test unitaire en AngularJS&#160;1.x.
C&#8217;était seulement possible avec un test end-to-end, ce qui peut être lent.</p>
</div>
<div class="paragraph">
<p>En Angular, le même soin a été appliqué aux formulaires,
et le framework nous propose une façon élégante d&#8217;écrire nos formulaires.
En fait, il en propose même deux&#160;!</p>
</div>
<div class="paragraph">
<p>Tu peux écrire ton formulaire en utilisant seulement des directives dans ton template&#160;:
c&#8217;est la façon "pilotée par le template".
D&#8217;après notre expérience, c&#8217;est particulièrement utile pour des formulaires simples, sans trop de validation.</p>
</div>
<div class="paragraph">
<p>L&#8217;autre façon de procéder est la façon "pilotée par le code", où tu écris une description du formulaire
dans ton composant, puis utilises ensuite des directives pour lier ce formulaire aux inputs/textareas/selects de ton template.
C&#8217;est plus verbeux, mais aussi plus puissant, notamment pour faire de la validation custom,
ou pour générer des formulaires dynamiquement.</p>
</div>
<div class="paragraph">
<p>Alors prenons un cas d&#8217;utilisation, codons-le de chacune des deux façons, et étudions les différences.</p>
</div>
<div class="paragraph">
<p>On va écrire un formulaire simple, pour enregistrer de nouveaux utilisateurs dans
notre merveilleuse application PonyRacer. Comme on a besoin d&#8217;un composant de base
pour chacun des cas d&#8217;utilisation, commençons par celui-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-register',
  template: `
  &lt;h2&gt;Sign up&lt;/h2&gt;
  &lt;form&gt;&lt;/form&gt;
  `
})
export class RegisterFormComponent {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rien d&#8217;extraordinaire&#160;: un composant avec un simple template contenant un formulaire.
Dans les minutes qui viennent, on y ajoutera les champs permettant d&#8217;enregistrer un utilisateur
avec un nom et un mot de passe.</p>
</div>
<div class="paragraph">
<p>Quelque soit la méthode choisie (piloté par le template ou par le code),
Angular crée une représentation de notre formulaire.</p>
</div>
<div class="paragraph">
<p>Dans la méthode "pilotée par le template", c&#8217;est automatique&#160;:
on a juste besoin d&#8217;ajouter les bonnes directives dans le template
et le framework s&#8217;occupe de créer la représentation du formulaire.</p>
</div>
<div class="paragraph">
<p>Dans la méthode "pilotée par le code", on crée cette représentation manuellement,
et on lie ensuite la représentation du formulaire aux inputs en utilisant des directives.</p>
</div>
<div class="paragraph">
<p>Sous le capot, un champ du formulaire, comme un <code>input</code> ou un <code>select</code>, sera représenté par un <code>FormControl</code> en Angular.
C&#8217;est la plus petite partie d&#8217;un formulaire, et il encapsule l&#8217;état du champ et sa valeur.</p>
</div>
<div class="paragraph">
<p>Un <code>FormControl</code> a plusieurs attributs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>valid</code>&#160;: si le champ est valide, au regard des contraintes et des validations qui lui sont appliquées.</p>
</li>
<li>
<p><code>invalid</code>&#160;: si le champ est invalide, au regard des contraintes et des validations qui lui sont appliquées.</p>
</li>
<li>
<p><code>errors</code>&#160;: un objet contenant les erreurs du champ.</p>
</li>
<li>
<p><code>dirty</code>&#160;: <code>false</code> jusqu&#8217;à ce que l&#8217;utilisateur modifie la valeur du champ.</p>
</li>
<li>
<p><code>pristine</code>&#160;: l&#8217;opposé de <code>dirty</code>.</p>
</li>
<li>
<p><code>touched</code>&#160;: <code>false</code> jusqu&#8217;à ce que l&#8217;utilisateur soit entré dans le champ.</p>
</li>
<li>
<p><code>untouched</code>&#160;: l&#8217;opposé de <code>touched</code>.</p>
</li>
<li>
<p><code>value</code>&#160;: la valeur du champ.</p>
</li>
<li>
<p><code>valueChanges</code>&#160;: un <em>Observable</em> qui émet à chaque changement sur le champ.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il propose aussi quelques méthodes comme <code>hasError()</code> pour savoir si le contrôle a une erreur donnée.</p>
</div>
<div class="paragraph">
<p>Tu peux ainsi écrire des trucs comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const password = new FormControl();
console.log(password.dirty); // false until the user enters a value
console.log(password.value); // null until the user enters a value
console.log(password.hasError('required')); // false</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que tu peux passer un paramètre au constructeur, qui deviendra sa valeur initiale.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const password = new FormControl('Cédric');
console.log(password.value); // logs "Cédric"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces contrôles peuvent être regroupés dans un <code>FormGroup</code> ("groupe de formulaire") pour constituer une partie du formulaire
qui a des règles de validation communes. Un formulaire lui-même est un groupe de contrôle.</p>
</div>
<div class="paragraph">
<p>Un <code>FormGroup</code> a les mêmes propriétés qu&#8217;un <code>FormControl</code>, avec quelques différences&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>valid</code>&#160;: si tous les champs sont valides, alors le groupe est valide.</p>
</li>
<li>
<p><code>invalid</code>&#160;: si l&#8217;un des champs est invalide, alors le groupe est invalide.</p>
</li>
<li>
<p><code>errors</code>&#160;: un objet contenant les erreurs du groupe, ou <code>null</code> si le groupe est entièrement valide.
Chaque erreur en constitue la clé, et la valeur associée est un tableau contenant chaque contrôle affecté par cette erreur.</p>
</li>
<li>
<p><code>dirty</code>&#160;: <code>false</code> jusqu&#8217;à ce qu&#8217;un des contrôles devienne "dirty".</p>
</li>
<li>
<p><code>pristine</code>&#160;: l&#8217;opposé de <code>dirty</code>.</p>
</li>
<li>
<p><code>touched</code>&#160;: <code>false</code> jusqu&#8217;à ce qu&#8217;un des contrôles devienne "touched".</p>
</li>
<li>
<p><code>untouched</code>&#160;: l&#8217;opposé de <code>touched</code>.</p>
</li>
<li>
<p><code>value</code>&#160;: la valeur du groupe. Pour être plus précis, c&#8217;est un objet dont les clé/valeurs sont les contrôles et leur valeur respective.</p>
</li>
<li>
<p><code>valueChanges</code>&#160;: un <code>Observable</code> qui émet à chaque changement sur un contrôle du groupe.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Un groupe propose les mêmes méthodes qu&#8217;un <code>FormControl</code>, comme <code>hasError()</code>.
Il a aussi une méthode <code>get()</code> pour récupérer un contrôle dans le groupe.</p>
</div>
<div class="paragraph">
<p>Tu peux en créer un comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const form = new FormGroup({
  username: new FormControl('Cédric'),
  password: new FormControl()
});
console.log(form.dirty); // logs false until the user enters a value
console.log(form.value); // logs Object {username: "Cédric", password: null}
console.log(form.get('username')); // logs the Control</code></pre>
</div>
</div>
<div class="paragraph">
<p>Commençons avec un formulaire piloté par le template&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_formulaire_piloté_par_le_template">18.2. Formulaire piloté par le template</h3>
<div class="paragraph">
<p>Dans cette méthode, on va mettre en œuvre un paquet de directives dans notre formulaire,
et laisser le framework construire les instances de <code>FormControl</code> et <code>FormGroup</code> nécessaires.
Par exemple, la directive <code>NgForm</code> qui transforme l&#8217;élément <code>&lt;form&gt;</code> en sa
version Angular super-puissante&#160;: tu peux le voir comme la différence entre Bruce Wayne et Batman.</p>
</div>
<div class="paragraph">
<p>Toutes ces directives sont incluses dans le module <code>FormsModule</code>,
nous devons donc l&#8217;importer dans notre module racine.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { FormsModule } from '@angular/forms';

@NgModule({
  imports: [BrowserModule, FormsModule],
  declarations: [AppComponent],
  bootstrap: [AppComponent]
})
export class AppModule {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>FormsModule</code> contient les directives pour la façon "pilotée par le template".
Nous verrons plus tard qu&#8217;il existe un autre module, <code>ReactiveFormsModule</code>,
dans le même package <code>@angular/forms</code>, qui est nécessaire pour la façon "pilotée par le code".</p>
</div>
<div class="paragraph">
<p>Ajoutons un bouton <em>submit</em>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-register',
  template: `
  &lt;h2&gt;Sign up&lt;/h2&gt;
  &lt;form (ngSubmit)="register()"&gt;
    &lt;button type="submit"&gt;Register&lt;/button&gt;
  &lt;/form&gt;
  `
})
export class RegisterFormComponent {
  register() {
    // we will have to handle the submission
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>J&#8217;ai ajouté un bouton, et défini un handler d&#8217;événement <code>ngSubmit</code> sur l&#8217;élément <code>&lt;form&gt;</code>.
L&#8217;événement <code>ngSubmit</code> est émis par la directive <code>form</code> lors de la soumission du formulaire.
Cela invoquera la méthode <code>register()</code> de notre composant, qu&#8217;on implémentera plus tard.</p>
</div>
<div class="paragraph">
<p>Une dernière chose&#160;: comme notre template va rapidement grossir, extrayons-le
tout de suite dans un fichier dédié, grâce à <code>templateUrl</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html'
})
export class RegisterFormComponent {
  register() {
    // we will have to handle the submission
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans la façon "pilotée par le template", tu écris tes formulaires à peu près comme tu l&#8217;aurais fait en AngularJS&#160;1.x,
avec beaucoup de trucs dans ton template et peu dans ton composant.</p>
</div>
<div class="paragraph">
<p>Dans sa forme la plus simple, tu ajoutes simplement les directives <code>ngModel</code> dans le template, et c&#8217;est tout.
La directive <code>ngModel</code> crée le <code>FormControl</code> pour toi,
et le <code>&lt;form&gt;</code> crée automatiquement le <code>FormGroup</code>.
Note que tu dois donner un <code>name</code> à l&#8217;input,
qui sera utilisé par le framework pour construire le <code>FormGroup</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, on doit évidemment faire quelque-chose pour la soumission, et récupérer les valeurs saisies.
Pour cela, on va utiliser une variable locale et lui assigner l&#8217;objet <code>NgForm</code> créé par Angular pour le formulaire.
Tu te rappelles le chapitre
<a href="#local-variables">Template</a>
&#160;?
On va définir une variable, <code>userForm</code>, qui référencera le formulaire.
C&#8217;est possible parce que la directive exporte l&#8217;instance de la directive <code>NgForm</code>,
qui a les mêmes méthodes que la classe <code>FormGroup</code>.
On verra comment exporter des données plus en détail quand on étudiera comment construire des directives.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;!-- we use a local variable #userForm --&gt;
&lt;!-- and give its value to the register method --&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre méthode <code>register</code> est désormais appelée avec la valeur du formulaire en paramètre&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

@Component({
  selector: 'ns-register',
  templateUrl: 'register.component.html'
})
export class RegisterFormComponent {
  register(user) {
    console.log(user);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est seulement du binding uni-directionnel cependant.
Si tu mets à jour le champ, le modèle sera mis à jour,
mais mettre à jour le modèle ne mettra pas à jour la valeur du champ.
Mais <code>ngModel</code> est plus puissant qu&#8217;on ne le croit&#160;!</p>
</div>
<div class="sect3">
<h4 id="_binding_bi_directionnel">18.2.1. Binding bi-directionnel</h4>
<div class="paragraph">
<p>Si tu as utilisé AngularJS&#160;1.x, ou même juste lu un article dessus,
tu as du voir le fameux exemple avec un champ et une expression affichant la valeur de celui-ci,
qui se mettait à jour toute seule dès que l&#8217;utilisateur entrait une valeur dans le champ,
et le champ se mettant à jour automatiquement dès que le modèle changeait.
Le fameux "Binding Bi-directionnel", quelque chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;!-- AngularJS 1.x code example --&gt;
&lt;input type="text" ng-model="username"&gt;
&lt;p&gt;{{ username }}&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut faire quelque chose de similaire en Angular.</p>
</div>
<div class="paragraph">
<p>Tu commences par définir un modèle de ce qui sera saisi dans le formulaire.
On va faire cela dans une classe <code>User</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class User {
  username: string;
  password: string;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre <code>RegisterFormComponent</code> doit avoir un attribut <code>user</code> de type <code>User</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';

class User {
  username: string;
  password: string;
}

@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html',
})
export class RegisterFormComponent {
  user = new User();

  register() {
    console.log(this.user);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, la méthode <code>register()</code> trace désormais directement l&#8217;objet <code>user</code>.</p>
</div>
<div class="paragraph">
<p>On est donc prêt à ajouter les champs dans notre formulaire.
Il nous faut lier les champs au modèle défini.
Et pour cela, il y a donc la directive <code>ngModel</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" [(ngModel)]="user.username"&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" [(ngModel)]="user.password"&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wow&#160;! <code>[(ngModel)]</code>&#160;? Qu&#8217;est-ce que c&#8217;est que ce truc&#160;?!
Ce n&#8217;est que du sucre syntaxique ajouté pour exprimer la même chose que&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;input name="username" [ngModel]="user.username" (ngModelChange)="user.username = $event"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La directive <code>NgModel</code> met à jour la valeur de l'<code>input</code> à chaque changement du modèle lié <code>user.username</code>,
d&#8217;où la partie <code>[ngModel]="user.username"</code>.
Et elle génère un événement depuis un output nommé <code>ngModelChange</code> à chaque fois que l'<code>input</code> est modifié par l&#8217;utilisateur,
où l&#8217;événement est la nouvelle valeur,
d&#8217;où la partie <code>(ngModelChange)="user.username = $event"</code>,
qui met donc à jour le modèle <code>user.username</code> avec la valeur saisie.</p>
</div>
<div class="paragraph">
<p>Au lieu d&#8217;écrire cette forme verbeuse, on peut donc utiliser la syntaxe raccourcie <code>[()]</code>.
Si, comme moi, tu as du mal à te rappeler si c&#8217;est <code>[()]</code> ou <code>([])</code>,
il y a un très bon moyen mnémotechnique : c&#8217;est une boîte de bananes&#160;!
Mais si, regarde&#160;: le <code>[]</code> est une boîte, et, dedans, il y a deux bananes qui se regardent <code>()</code>&#160;!</p>
</div>
<div class="paragraph">
<p>Maintenant chaque fois qu&#8217;on tapera quelque chose dans le champ,
le modèle sera mis à jour.
Et si le modèle est mis à jour dans notre composant,
le champ affichera automatiquement la nouvelle valeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" [(ngModel)]="user.username"&gt;
    &lt;small&gt;{{ user.username }} is an awesome username!&lt;/small&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" [(ngModel)]="user.password"&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu essayes l&#8217;exemple ci-dessus, tu verras que le binding bi-directionnel fonctionne.
Et notre formulaire aussi&#160;: si on le soumet, le composant tracera notre objet <code>user</code>&#160;!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formulaire_piloté_par_le_code">18.3. Formulaire piloté par le code</h3>
<div class="paragraph">
<p>En AngularJS&#160;1.x, tu devais essentiellement construire tes formulaires dans tes templates.
Angular introduit une déclaration impérative, qui permet de construire les formulaires programmatiquement.</p>
</div>
<div class="paragraph">
<p>Désormais, on peut manipuler les formulaires directement depuis le code.
C&#8217;est plus verbeux mais plus puissant.</p>
</div>
<div class="paragraph">
<p>Pour construire un formulaire dans notre code, nous allons utiliser les abstractions dont nous avons parlé:
<code>FormControl</code> et <code>FormGroup</code>.</p>
</div>
<div class="paragraph">
<p>Avec ces briques de bases on peut construire un formulaire dans notre composant.
Mais au lieu d&#8217;utiliser <code>new FormControl()</code> ou <code>new FormGroup()</code>,
on va utiliser une classe utilitaire, <code>FormBuilder</code>, qu&#8217;on peut s&#8217;injecter&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { FormBuilder } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html'
})
export class RegisterFormComponent {

  constructor(fb: FormBuilder) {
    // we will have to build the form
  }

  register() {
    // we will have to handle the submission
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>FormBuilder</code> est une classe utilitaire, avec plein de méthodes bien pratiques pour créer
des contrôles et des groupes.
Faisons simple, et créons un petit formulaire avec deux contrôles, un nom d&#8217;utilisateur et un mot de passe.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { FormBuilder, FormGroup } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html'
})
export class RegisterFormComponent {
  userForm: FormGroup;

  constructor(fb: FormBuilder) {
    this.userForm = fb.group({
      username: '',
      password: ''
    });
  }

  register() {
    // we will have to handle the submission
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a créé un <code>&lt;form&gt;</code> avec deux contrôles.
Tu peux voir que chaque contrôle est créé avec la valeur <code>''</code>.
C&#8217;est la même chose que d&#8217;utiliser la méthode <code>control()</code> du <code>FormBuilder</code> avec cette chaîne de caractères comme paramètre,
et la même chose que d&#8217;appeler le constructeur <code>new FormControl('')</code>&#160;:
la chaîne de caractères représente la valeur initiale que nous voulons afficher dans le formulaire.
Ici elle est vide, donc l&#8217;input sera vide.
Mais tu peux mettre une valeur bien sûr, si tu veux éditer une entité existante par exemple.
La méthode utilitaire peut aussi recevoir d&#8217;autres attributs, que nous verrons plus tard.</p>
</div>
<div class="paragraph">
<p>On veut maintenant implémenter la méthode <code>register</code>.
Comme on l&#8217;a vu, l&#8217;objet <code>FormGroup</code> a un attribut <code>value</code>, alors on peut facilement tracer son contenu avec&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { FormBuilder, FormGroup } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html'
})
export class RegisterFormComponent {
  userForm: FormGroup;

  constructor(fb: FormBuilder) {
    this.userForm = fb.group({
      username: fb.control(''),
      password: fb.control('')
    });
  }

  register() {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On veut maintenant affiner un peu le template.
On va utiliser d&#8217;autres directives que celles que nous avons dans les formulaires "pilotés par le template".
Ces directives sont dans le module <code>ReactiveFormsModule</code> que nous devons importer dans notre module racine.
Leurs noms commencent par <code>form</code> au lieu de <code>ng</code> comme c&#8217;était le cas avec la façon "pilotée par le template".</p>
</div>
<div class="paragraph">
<p>Le formulaire doit être relié à notre objet <code>userForm</code>, grâce à la directive <code>formGroup</code>.
Chaque champ de saisie est relié à un <code>FormControl</code>, grâce à la directive <code>formControlName</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise la notation avec crochets <code>[formGroup]="userForm"</code> pour relier notre objet <code>userForm</code> à <code>formGroup</code>.
Chaque <code>input</code> reçoit la directive <code>formControlName</code> avec pour valeur le nom du contrôle auquel il est relié.
Si tu indiques un nom qui n&#8217;existe pas, tu auras une erreur.
Comme on passe une valeur (et pas une expression), on n&#8217;utilise pas les <code>[]</code> autour de <code>formControlName</code>.</p>
</div>
<div class="paragraph">
<p>Et c&#8217;est tout&#160;: un clic sur le bouton <em>submit</em> va tracer un objet contenant le nom d&#8217;utilisateur et le mot de passe choisi&#160;!</p>
</div>
<div class="paragraph">
<p>Si tu en as besoin, tu peux mettre à jour la valeur d&#8217;un <code>FormControl</code> depuis ton composant en utilisant <code>setValue()</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { FormBuilder, FormGroup, FormControl } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html',
})
export class RegisterFormComponent {
  usernameCtrl: FormControl;
  passwordCtrl: FormControl;
  userForm: FormGroup;

  constructor(fb: FormBuilder) {
    this.usernameCtrl = fb.control('');
    this.passwordCtrl = fb.control('');
    this.userForm = fb.group({
      username: this.usernameCtrl,
      password: this.passwordCtrl
    });
  }

  reset() {
    this.usernameCtrl.setValue('');
    this.passwordCtrl.setValue('');
  }

  register() {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_un_peu_de_validation">18.4. Un peu de validation</h3>
<div class="paragraph">
<p>La validation de données est traditionnellement une partie importante de la construction de formulaire.
Certains champs sont obligatoires, certains dépendent d&#8217;autres,
certains doivent respecter un format spécifique,
certains ne doivent pas avoir de valeur plus grande ou plus petite que X, par exemple.</p>
</div>
<div class="paragraph">
<p>Commençons par ajouter quelques règles basiques&#160;: tous nos champs sont obligatoires.</p>
</div>
<div class="sect3">
<h4 id="_dans_un_formulaire_piloté_par_le_code">18.4.1. Dans un formulaire piloté par le code</h4>
<div class="paragraph">
<p>Pour spécifier que chaque champ est requis, on va utiliser <code>Validator</code>.
Un validateur retourne une <em>map</em> des erreurs, ou <code>null</code> si aucune n&#8217;a été détectée.</p>
</div>
<div class="paragraph">
<p>Quelques validateurs sont fournis par le framework&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Validators.required</code> pour vérifier qu&#8217;un contrôle n&#8217;est pas vide&#160;;</p>
</li>
<li>
<p><code>Validators.minLength(n)</code> pour s&#8217;assurer que la valeur entrée a au moins <em>n</em> caractères&#160;;</p>
</li>
<li>
<p><code>Validators.maxLength(n)</code> pour s&#8217;assurer que la valeur entrée a au plus <em>n</em> caractères&#160;;</p>
</li>
<li>
<p><code>Validators.email()</code> (disponible depuis la version 4.0) pour s&#8217;assurer que la valeur entrée est une adresse email valide
(bon courage pour trouver l&#8217;expression régulière par vous-même&#8230;&#8203;)&#160;;</p>
</li>
<li>
<p><code>Validators.min(n)</code> (disponible depuis la version 4.2) pour s&#8217;assurer que la valeur entrée vaut au moins <em>n</em>&#160;;</p>
</li>
<li>
<p><code>Validators.max(n)</code> (disponible depuis la version 4.2) pour s&#8217;assurer que la valeur entrée vaut au plus <em>n</em>&#160;;</p>
</li>
<li>
<p><code>Validators.pattern(p)</code> pour s&#8217;assurer que la valeur entrée correspond à l&#8217;expression régulière <em>p</em> définie.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les validateurs peuvent être multiples, en passant un tableau,
et peuvent s&#8217;appliquer sur un <code>FormControl</code> ou un <code>FormGroup</code>.
Comme on veut que tous les champs soient obligatoires, on peut ajouter
le validator <code>required</code> sur chaque contrôle,
et s&#8217;assurer que le nom de l&#8217;utilisateur fait 3 caractères au minimum.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { FormBuilder, FormGroup, Validators } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html',
})
export class RegisterFormComponent {
  userForm: FormGroup;

  constructor(fb: FormBuilder) {
    this.userForm = fb.group({
      username: fb.control('', [Validators.required, Validators.minLength(3)]),
      password: fb.control('', Validators.required)
    });
  }

  register() {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dans_un_formulaire_piloté_par_le_template">18.4.2. Dans un formulaire piloté par le template</h4>
<div class="paragraph">
<p>Ajouter un champ requis dans un formulaire piloté par le template est aussi rapide.
Il suffit de rajouter l&#8217;attribut <code>required</code> sur les <code>&lt;input&gt;</code>.
<code>required</code> est une directive fournie par le framework, qui ajoutera automatiquement le validateur sur le champ.
Même chose avec <code>minlength</code>, <code>maxlength</code>, et <code>email</code>
(<code>min</code> et <code>max</code> ne sont en revanche pas encore disponibles comme des directives).</p>
</div>
<div class="paragraph">
<p>En partant de l&#8217;exemple de binding bi-directionnel&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel required minlength="3"&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel required&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note que cela peut s&#8217;utiliser dans un formulaire piloté par le code également.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_erreurs_et_soumission">18.5. Erreurs et soumission</h3>
<div class="paragraph">
<p>Évidemment, on veut que l&#8217;utilisateur ne puisse pas soumettre le formulaire tant qu&#8217;il reste des erreurs,
et ces erreurs doivent être parfaitement affichées.</p>
</div>
<div class="paragraph">
<p>Si tu utilises les exemples plus haut, tu verras que même si les champs sont requis,
on peut quand même soumettre le formulaire. Peut-être qu&#8217;on peut y faire quelque chose&#160;?</p>
</div>
<div class="paragraph">
<p>On sait qu&#8217;on peut facilement désactiver un bouton avec l&#8217;attribut <code>disabled</code>,
mais encore faut-il lui passer une expression qui reflète l&#8217;état de validité du formulaire courant.</p>
</div>
<div class="sect3">
<h4 id="_erreurs_et_soumission_dans_un_formulaire_piloté_par_le_code">18.5.1. Erreurs et soumission dans un formulaire piloté par le code</h4>
<div class="paragraph">
<p>Nous avons ajouté un champ <code>userForm</code>, du type <code>FormGroup</code>&#160;, à notre composant.
Ce champ fournit une vision complète de l&#8217;état du formulaire et de ses champs, incluant ses erreurs de validation.</p>
</div>
<div class="paragraph">
<p>Par exemple, on peut désactiver la soumission si le formulaire n&#8217;est pas valide&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois dans la dernière ligne, il suffit de lier <code>disabled</code> à la propriété <code>invalid</code> du <code>userForm</code>.</p>
</div>
<div class="paragraph">
<p>Désormais, on ne pourra soumettre que si tous les contrôles sont valides.
Pour informer l&#8217;utilisateur de la raison de cette impossibilité, il faut encore afficher les messages d&#8217;erreur.</p>
</div>
<div class="paragraph">
<p>Toujours grâce au <code>userForm</code>, on peut écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    &lt;div *ngIf="userForm.get('username').hasError('required')"&gt;Username is required&lt;/div&gt;
    &lt;div *ngIf="userForm.get('username').hasError('minlength')"&gt;Username should be 3 characters min&lt;/div&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
    &lt;div *ngIf="userForm.get('password').hasError('required')"&gt;Password is required&lt;/div&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cool&#160;! Les erreurs sont désormais affichées si les champs sont vides,
et elles disparaissent quand ils ont une valeur. Mais elles sont affichées dès
l&#8217;apparition du formulaire. Peut-être qu&#8217;on devrait les masquer jusqu&#8217;à ce que
l&#8217;utilisateur remplisse une valeur&#160;?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    &lt;div *ngIf="userForm.get('username').dirty &amp;&amp; userForm.get('username').hasError('required')"&gt;
      Username is required
    &lt;/div&gt;
    &lt;div *ngIf="userForm.get('username').dirty &amp;&amp; userForm.get('username').hasError('minlength')"&gt;
      Username should be 3 characters min
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
    &lt;div *ngIf="userForm.get('password').dirty &amp;&amp; userForm.get('password').hasError('required')"&gt;
      Password is required
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est un peu verbeux, mais on peut créer des références sur chaque contrôle dans le composant pour améliorer cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html'
})
export class RegisterFormComponent {
  userForm: FormGroup;
  usernameCtrl: FormControl;
  passwordCtrl: FormControl;

  constructor(fb: FormBuilder) {
    this.usernameCtrl = fb.control('', Validators.required);
    this.passwordCtrl = fb.control('', Validators.required);

    this.userForm = fb.group({
      username: this.usernameCtrl,
      password: this.passwordCtrl
    });
  }

  register() {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ensuite on utilise ces références dans le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    &lt;div *ngIf="usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')"&gt;Username is required&lt;/div&gt;
    &lt;div *ngIf="usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('minlength')"&gt;Username should be 3 characters min&lt;/div&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
    &lt;div *ngIf="passwordCtrl.dirty &amp;&amp; passwordCtrl.hasError('required')"&gt;Password is required&lt;/div&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_erreurs_et_soumission_dans_un_formulaire_piloté_par_le_template">18.5.2. Erreurs et soumission dans un formulaire piloté par le template</h4>
<div class="paragraph">
<p>Dans un formulaire piloté par le template, nous n&#8217;avons pas de champ dans notre composant référençant le <code>FormGroup</code>,
mais nous avons déjà déclaré une variable locale dans le template,
référençant l&#8217;objet <code>NgForm</code> exporté par la directive.
Une fois encore, cette variable permet de connaître l&#8217;état du formulaire et d&#8217;accéder aux champs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel required&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel required&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant il nous faut afficher les erreurs sur chaque champ.</p>
</div>
<div class="paragraph">
<p>Comme le formulaire, chaque contrôle expose son objet <code>FormControl</code>, on peut donc
créer une variable locale pour accéder aux erreurs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel required #username="ngModel"&gt;
    &lt;div *ngIf="username.dirty &amp;&amp; username.hasError('required')"&gt;Username is required&lt;/div&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel required #password="ngModel"&gt;
    &lt;div *ngIf="password.dirty &amp;&amp; password.hasError('required')"&gt;Password is required&lt;/div&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yeah&#160;!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_un_peu_de_style">18.6. Un peu de style</h3>
<div class="paragraph">
<p>Quelle que soit la façon que tu as choisie pour créer tes formulaires,
Angular réalise une autre tâche bien pratique pour nous&#160;:
il ajoute et enlève automatiquement certaines classes CSS sur chaque champ (et le formulaire)
pour nous permettre d&#8217;affiner le style visuel.</p>
</div>
<div class="paragraph">
<p>Par exemple, un champ aura la classe <code>ng-invalid</code> si un de ses validateurs échoue,
ou <code>ng-valid</code> si tous ses validateurs passent.
Cela signifie que tu peux facilement ajouter du style, comme la traditionnelle bordure rouge autour des champs invalides&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;style&gt;
  input.ng-invalid {
    border: 3px red solid;
  }
&lt;/style&gt;
&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel required&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel required&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ng-dirty</code> est une autre classe CSS utile, qui sera présente si l&#8217;utilisateur a modifié la valeur.
Son contraire est <code>ng-pristine</code>, présente si l&#8217;utilisateur n&#8217;a jamais modifié la valeur.
En général, je n&#8217;affiche une bordure rouge qu&#8217;une fois que l&#8217;utilisateur a modifié la valeur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;style&gt;
  input.ng-invalid.ng-dirty {
    border: 3px red solid;
  }
&lt;/style&gt;
&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register(userForm.value)" #userForm="ngForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input name="username" ngModel required&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" name="password" ngModel required&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et enfin, il y a une dernière classe CSS&#160;: <code>ng-touched</code>.
Elle sera présente si l&#8217;utilisateur est entré et sorti du champ au moins une fois (même s&#8217;il n&#8217;a rien modifié)
Son contraire est <code>ng-untouched</code>.</p>
</div>
<div class="paragraph">
<p>Quand tu afficheras un formulaire pour la première fois,
un champ portera généralement les classes CSS <code>ng-pristine ng-untouched ng-invalid</code>.
Ensuite, quand l&#8217;utilisateur sera rentré puis sorti du champ, elle basculeront à <code>ng-pristine ng-touched ng-invalid</code>.
Quand l&#8217;utilisateur modifiera la valeur, toujours invalide, on aura <code>ng-dirty ng-touched ng-invalid</code>.
Et enfin, quand la valeur deviendra valide&#160;: <code>ng-dirty ng-touched ng-valid</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_créer_un_validateur_spécifique">18.7. Créer un validateur spécifique</h3>
<div class="paragraph">
<p>Les courses de poneys sont très addictives (TRÈS), alors on ne peut s&#8217;inscrire que si on a plus de 18 ans.
Et on veut que l&#8217;utilisateur entre son mot de passe deux fois, pour éviter toute erreur de saisie.</p>
</div>
<div class="paragraph">
<p>Comment fait-on cela&#160;? En créant un validateur spécifique.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, il suffit de créer une méthode qui accepte un <code>FormControl</code>,
teste sa <code>value</code>, et retourne un objet avec les erreurs, ou <code>null</code> si
la valeur est valide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const isOldEnough = (control: FormControl) =&gt; {
  // control is a date input, so we can build the Date from the value
  const birthDatePlus18 = new Date(control.value);
  birthDatePlus18.setFullYear(birthDatePlus18.getFullYear() + 18);
  return birthDatePlus18 &lt; new Date() ? null : { tooYoung: true };
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre validation est plutôt simple&#160;: on prend la valeur du contrôle,
on crée une date, on vérifie si le 18ème anniversaire est avant aujourd&#8217;hui,
et on retourne une erreur avec la clé <code>tooYoung</code> ("trop jeune") sinon.</p>
</div>
<div class="paragraph">
<p>Maintenant il nous faut inclure ce validateur.</p>
</div>
<div class="sect3">
<h4 id="_utiliser_un_validateur_dans_un_formulaire_piloté_par_le_code">18.7.1. Utiliser un validateur dans un formulaire piloté par le code</h4>
<div class="paragraph">
<p>On doit ajouter un nouveau contrôle dans notre formulaire, via le <code>FormBuilder</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html'
})
export class RegisterFormComponent {
  usernameCtrl: FormControl;
  passwordCtrl: FormControl;
  birthdateCtrl: FormControl;
  userForm: FormGroup;

  static isOldEnough(control: FormControl) {
    // control is a date input, so we can build the Date from the value
    const birthDatePlus18 = new Date(control.value);
    birthDatePlus18.setFullYear(birthDatePlus18.getFullYear() + 18);
    return birthDatePlus18 &lt; new Date() ? null : { tooYoung: true };
  }

  constructor(fb: FormBuilder) {
    this.usernameCtrl = fb.control('', Validators.required);
    this.passwordCtrl = fb.control('', Validators.required);
    this.birthdateCtrl = fb.control('', [Validators.required, RegisterFormComponent.isOldEnough]);
    this.userForm = fb.group({
      username: this.usernameCtrl,
      password: this.passwordCtrl,
      birthdate: this.birthdateCtrl
    });
  }

  register() {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on a ajouté un nouveau contrôle <code>birthdate</code> ("date de naissance"),
avec deux validateurs combinés.
Le premier validateur est <code>required</code>, et le second est la méthode statique <code>isOldEnough</code> de notre classe.
Bien sûr, la méthode pourrait appartenir à une autre classe (<code>required</code> est statique par exemple).</p>
</div>
<div class="paragraph">
<p>N&#8217;oublie pas d&#8217;ajouter le champ et d&#8217;afficher les erreurs dans le formulaire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    &lt;div *ngIf="usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')"&gt;Username is required&lt;/div&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
    &lt;div *ngIf="passwordCtrl.dirty &amp;&amp; passwordCtrl.hasError('required')"&gt;Password is required&lt;/div&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Birth date&lt;/label&gt;&lt;input type="date" formControlName="birthdate"&gt;
    &lt;div *ngIf="birthdateCtrl.dirty"&gt;
      &lt;div *ngIf="birthdateCtrl.hasError('required')"&gt;Birth date is required&lt;/div&gt;
      &lt;div *ngIf="birthdateCtrl.hasError('tooYoung')"&gt;You're way too young to be betting on pony races&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Plutôt facile, non&#160;?</p>
</div>
<div class="paragraph">
<p>A noter qu&#8217;il est possible de créer et d&#8217;ajouter des validateurs asynchrones également
(pour vérifier auprès du backend si un nom d&#8217;utilisateur est disponible par exemple).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html'
})
export class RegisterFormComponent {
  usernameCtrl: FormControl;
  userForm: FormGroup;

  constructor(fb: FormBuilder, private userService: UserService) {
    this.usernameCtrl = fb.control('', Validators.required, control =&gt; this.isUsernameAvailable(control));
    this.userForm = fb.group({
      username: this.usernameCtrl
    });
  }

  isUsernameAvailable(control: AbstractControl) {
    const username = control.value;
    return this.userService.isUsernameAvailable(username).pipe(
      map(available =&gt; available ? null : { alreadyUsed: true })
    );
  }

  register() {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le validateur asynchrone n&#8217;est cette fois pas une méthode statique
car il accède au service du composant.</p>
</div>
<div class="paragraph">
<p>La méthode du service renvoie un <code>Observable</code> émettant soit <code>null</code>
si il n&#8217;y a pas d&#8217;erreur (le username est disponible),
soit un objet dont la clé sera le nom de l&#8217;erreur comme pour les validateurs synchrones.</p>
</div>
<div class="paragraph">
<p>Fonctionnalité intéressante, la classe <code>ng-pending</code> est ajoutée dynamiquement au champ
tant que le validateur asynchrone n&#8217;aura pas terminé son travail.
Cela permet par exemple d&#8217;afficher un spinner
pour indiquer que la validation est en cours.</p>
</div>
</div>
<div class="sect3">
<h4 id="_utiliser_un_validateur_dans_un_formulaire_piloté_par_le_template">18.7.2. Utiliser un validateur dans un formulaire piloté par le template</h4>
<div class="paragraph">
<p>Pour cela, on doit définir une directive custom qui s&#8217;applique sur un <code>input</code>,
mais franchement c&#8217;est beaucoup plus simple en utilisant l&#8217;approche pilotée par le code&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Ou tu peux combiner le meilleur des deux mondes&#160;!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_regrouper_des_champs">18.8. Regrouper des champs</h3>
<div class="paragraph">
<p>Jusqu&#8217;à présent, on n&#8217;avait qu&#8217;un seul groupe&#160;: le formulaire global.
Mais on peut déclarer des groupes au sein d&#8217;un groupe.
C&#8217;est très pratique si tu veux valider un groupe de champs globalement,
comme une adresse postale par exemple, ou, comme dans notre exemple, si tu veux
vérifier que le mot de passe et sa confirmation sont bien identiques.</p>
</div>
<div class="paragraph">
<p>la solution est d&#8217;utiliser un formulaire piloté par le code
(que l&#8217;on peut combiner avec un formulaire piloté par le template si besoin, comme au-dessus).</p>
</div>
<div class="paragraph">
<p>D&#8217;abord, on crée un nouveau groupe <code>passwordForm</code>, avec les deux champs, et
on l&#8217;ajoute dans le groupe <code>userForm</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';

@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html'
})
export class RegisterFormComponent {
  passwordForm: FormGroup;
  userForm: FormGroup;
  usernameCtrl: FormControl;
  passwordCtrl: FormControl;
  confirmCtrl: FormControl;

  static passwordMatch(group: FormGroup) {
    const password = group.get('password').value;
    const confirm = group.get('confirm').value;
    return password === confirm ? null : { matchingError: true };
  }

  constructor(fb: FormBuilder) {
    this.usernameCtrl = fb.control('', Validators.required);
    this.passwordCtrl = fb.control('', Validators.required);
    this.confirmCtrl = fb.control('', Validators.required);

    this.passwordForm = fb.group(
      { password: this.passwordCtrl, confirm: this.confirmCtrl },
      { validator: RegisterFormComponent.passwordMatch }
    );

    this.userForm = fb.group({ username: this.usernameCtrl, passwordForm: this.passwordForm });
  }

  register() {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, on a ajouté un validateur sur le groupe, <code>passwordMatch</code>,
qui sera appelé à chaque fois qu&#8217;un des champs est modifié.</p>
</div>
<div class="paragraph">
<p>Mettons à jour le template pour refléter le nouveau formulaire,
grâce à la directive <code>formGroupName</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    &lt;div *ngIf="usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')"&gt;Username is required&lt;/div&gt;
  &lt;/div&gt;
  &lt;div formGroupName="passwordForm"&gt;
    &lt;div&gt;
      &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
      &lt;div *ngIf="passwordCtrl.dirty &amp;&amp; passwordCtrl.hasError('required')"&gt;Password is required&lt;/div&gt;
    &lt;/div&gt;
    &lt;div&gt;
      &lt;label&gt;Confirm password&lt;/label&gt;&lt;input type="password" formControlName="confirm"&gt;
      &lt;div *ngIf="confirmCtrl.dirty &amp;&amp; confirmCtrl.hasError('required')"&gt;Confirm your password&lt;/div&gt;
    &lt;/div&gt;
    &lt;div *ngIf="passwordForm.dirty &amp;&amp; passwordForm.hasError('matchingError')"&gt;Your password does not match&lt;/div&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et voilà&#160;!</p>
</div>
</div>
<div class="sect2">
<h3 id="_réagir_aux_modifications">18.9. Réagir aux modifications</h3>
<div class="paragraph">
<p>Dernier bénéfice d&#8217;un formulaire piloté par le code&#160;: tu peux facilement
réagir aux modifications, grâce à l'<em>observable</em> <code>valueChanges</code>. La programmation réactive pour les champions&#160;!
Par exemple, disons que notre champ de mot de passe doit afficher un indicateur de sécurité.
On veut en calculer la robustesse lors de chaque changement du mot de passe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component } from '@angular/core';
import { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';
import { debounceTime, distinctUntilChanged } from 'rxjs/operators';

@Component({
  selector: 'ns-register',
  templateUrl: 'register-form.component.html'
})
export class RegisterFormComponent {
  userForm: FormGroup;
  usernameCtrl: FormControl;
  passwordCtrl: FormControl;
  passwordStrength = 0;

  constructor(fb: FormBuilder) {
    this.usernameCtrl = fb.control('', Validators.required);
    this.passwordCtrl = fb.control('', Validators.required);

    this.userForm = fb.group({
      username: this.usernameCtrl,
      password: this.passwordCtrl
    });

    // we subscribe to every password change
    this.passwordCtrl.valueChanges.pipe(
      // only recompute when the user stops typing for 400ms
      debounceTime(400),
      // only recompute if the new value is different than the last
      distinctUntilChanged()
    ).subscribe(newValue =&gt; this.passwordStrength = newValue.length);
  }

  register() {
    console.log(this.userForm.value);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant on a un attribut <code>passwordStrength</code> dans notre instance de composant,
qu&#8217;on peut afficher à notre utilisateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h2&gt;Sign up&lt;/h2&gt;
&lt;form (ngSubmit)="register()" [formGroup]="userForm"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;&lt;input formControlName="username"&gt;
    &lt;div *ngIf="usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')"&gt;Username is required&lt;/div&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label&gt;Password&lt;/label&gt;&lt;input type="password" formControlName="password"&gt;
    &lt;div&gt;Strength: {{ passwordStrength }}&lt;/div&gt;
    &lt;div *ngIf="passwordCtrl.dirty &amp;&amp; passwordCtrl.hasError('required')"&gt;Password is required&lt;/div&gt;
  &lt;/div&gt;
  &lt;button type="submit" [disabled]="userForm.invalid"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise les opérateurs RxJS pour ajouter quelques fonctionnalités bien cools&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>debounceTime(400)</code> émettra seulement des valeurs lorsque l&#8217;utilisateur arrête de taper pendant 400ms.
Cela évite de devoir calculer la force du mot de passe à chaque valeur entrée par l&#8217;utilisateur.
Cela peut être très intéressant si le calcul prend beaucoup de temps, ou lance une requête HTTP.</p>
</li>
<li>
<p><code>distinctUntilChanged()</code> émettra seulement des valeurs si la nouvelle valeur est différente de l&#8217;ancienne.
Très intéressant également&#160;: imagine que l&#8217;utilisateur entre <code>'password'</code> puis s&#8217;arrête.
On calcule la force du mot de passe. Puis il entre un nouveau caractère avant de l&#8217;effacer rapidement (en moins de 400ms).
Le prochain événement qui sortira de <code>debounceTime</code> sera à nouveau <code>'password'</code>.
Cela n&#8217;a pas de sens de recalculer la force du mot de passe à nouveau&#160;!
Cet opérateur n&#8217;émettra même pas la valeur, et nous économise un recalcul.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>RxJS peut faire une tonne de travail pour toi&#160;: imagine si tu devais recoder toi-même ce que l&#8217;on a fait en deux lignes.
Cela peut également se combiner facilement avec des requêtes HTTP, puisque le service <code>HttpClient</code> utilise des observables également.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mettre_à_jour_seulement_à_la_perte_de_focus_ou_à_la_soumission">18.10. Mettre à jour seulement à la perte de focus ou à la soumission</h3>
<div class="paragraph">
<p>Angular&#160;5.0 a introduit la possibilité d&#8217;attendre la perte de focus (<em>blur</em>) ou la soumission du formulaire (<em>submit</em>)
pour mettre à jour la valeur et la validité d&#8217;un champ.
Pour cela, le constructeur de <code>FormControl</code> accepte à présent un objet <code>options</code> comme second paramètre,
qui permet de définir les validateurs synchrones et asynchrones,
ainsi que l&#8217;option <code>updateOn</code>.
Sa valeur peut-être&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>change</code>, par défaut, la valeur et la validité sont mises à jour à chaque changement&#160;;</p>
</li>
<li>
<p><code>blur</code>, la valeur et la validité sont mises à jour uniquement quand le champ perd le focus&#160;;</p>
</li>
<li>
<p><code>submit</code>, la valeur et la validité sont mises à jour uniquement quand le formulaire parent est soumis.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">this.usernameCtrl = new FormControl('', Validators.required);
this.passwordCtrl = new FormControl('', {
  validators: Validators.required,
  updateOn: 'blur'
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il est aussi possible de configurer cette option sur tous les champs d&#8217;un groupe à la fois&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">this.userForm = new FormGroup({
  username: this.usernameCtrl,
  password: this.passwordCtrl
}, {
  updateOn: 'blur'
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>La même fonctionnalité existe aussi dans les formulaires pilotés par le template,
grâce à l&#8217;input <code>ngModelOptions</code> de la directive <code>NgModel</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">&lt;label&gt;Username&lt;/label&gt;
&lt;input name="username" #usernameCtrl="ngModel"
  [(ngModel)]="user.username" [ngModelOptions]="{ updateOn: 'blur' }" required&gt;
&lt;div *ngIf="usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')"&gt;Username is required&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou globalement sur un formulaire avec l&#8217;input <code>NgFormOptions</code> (apparu avec Angular&#160;5.0) de la directive <code>NgForm</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">&lt;form (ngSubmit)="register()" [ngFormOptions]="{ updateOn: 'blur' }"&gt;
  &lt;div&gt;
    &lt;label&gt;Username&lt;/label&gt;
    &lt;input name="username" #usernameCtrl="ngModel"
      [(ngModel)]="user.username" required&gt;
    &lt;div *ngIf="usernameCtrl.dirty &amp;&amp; usernameCtrl.hasError('required')"&gt;Username is required&lt;/div&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion_2">18.11. Conclusion</h3>
<div class="paragraph">
<p>Angular propose deux façons de construire un formulaire&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une en mettant tout en place dans le template.
Mais, comme tu l&#8217;as vu,
ça oblige à écrire des directives custom pour la validation, et c&#8217;est plus dur à tester.
Cette façon est donc plus adaptée aux formulaires simples, qui n&#8217;ont par exemple qu&#8217;un seul ou quelques champs,
et nous donne du binding bi-directionnel.</p>
</li>
<li>
<p>une en mettant quasiment tout en place dans le composant.
Cette façon est plus adaptée à la validation et au test, avec plusieurs niveaux de groupes si besoin.
C&#8217;est donc le bon choix pour construire des formulaires complexes.
Et tu peux même réagir aux changements d&#8217;un groupe, ou d&#8217;un champ.</p>
</li>
<li>
<p>combiner à la fois la verbosité réduite de l&#8217;approche pilotée par le template,
et la puissance de l&#8217;approche pilotée par le code pour la validation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>C&#8217;est peut-être l&#8217;approche la plus pragmatique&#160;:
commence avec une approche orientée template et le binding bi-directionnel si ça te plaît,
et dès que tu as besoin d&#8217;accéder à un champ ou un groupe de champs,
pour par exemple ajouter de la validation custom ou de la programmation réactive,
alors tu peux déclarer ce dont tu as besoin dans le composant,
et lier les inputs et divs à ces déclarations avec les directives adéquates.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Essaye nos exercices
<a href="https://angular-exercises.ninja-squad.com/exercises/11/register">Formulaire d&#8217;enregistrement</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>,
<a href="https://angular-exercises.ninja-squad.com/exercises/12/validation">Validateurs custom</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>
et
<a href="https://angular-exercises.ninja-squad.com/exercises/13/login">Formulaire de login</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span>.
Tu apprendras à construire un simple formulaire en utilisant la technique "pilotée par le code"
et un autre avec la technique "pilotée par le template".
Tu apprendras également à écrire des validateurs custom, comment tester les formulaires
et authentifier tes utilisateurs&#160;!</p>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="zones">19. Les Zones et la magie d&#8217;Angular</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Développer avec AngularJS&#160;1.X dégageait un sentiment de "magie",
et Angular procure toujours ce même effet&#160;:
tu entres une valeur dans un <code>input</code> et hop!, magiquement, toute la page se met à jour en conséquence.</p>
</div>
<div class="paragraph">
<p>J&#8217;adore la magie, mais je préfère comprendre comment fonctionnent les outils que j&#8217;utilise.
Si tu es comme moi, je pense que cette partie devrait t&#8217;intéresser&#160;:
on va se pencher sur le fonctionnement interne d&#8217;Angular&#160;!</p>
</div>
<div class="paragraph">
<p>Mais d&#8217;abord, laisse moi t&#8217;expliquer comment fonctionne AngularJS&#160;1.x,
ce qui devrait être intéressant, même si tu n&#8217;en as jamais fait.</p>
</div>
<div class="paragraph">
<p>Tous les frameworks JavaScript fonctionnent
d&#8217;une façon assez similaire&#160;: ils aident le développeur
à réagir aux événements de l&#8217;application, à mettre à jour son état
et à rafraîchir la page (le DOM) en conséquence.
Mais ils n&#8217;ont pas forcément tous le même moyen d&#8217;y parvenir.</p>
</div>
<div class="paragraph">
<p>EmberJS par exemple, demande aux développeurs d&#8217;utiliser des <em>setters</em>
sur les objets manipulés pour que le framework puisse "intercepter"
l&#8217;appel au setter et connaître ainsi les changements appliqués au modèle,
et pouvoir modifier le DOM en conséquence.
React, lui, a opté pour recalculer tout le DOM à chaque changement mais,
comme mettre à jour tout le DOM est une opération coûteuse,
il fait d&#8217;abord ce rendu dans un DOM virtuel, puis n&#8217;applique que la différence
entre le DOM virtuel et le DOM réel.</p>
</div>
<div class="paragraph">
<p>Angular, lui, n&#8217;utilise pas de <em>setter</em>, ni de DOM virtuel.
Alors comment fait-il pour savoir ce qui doit être mis à jour&#160;?</p>
</div>
<div class="sect2">
<h3 id="_angularjs1_x_et_le_digest_cycle">19.1. AngularJS&#160;1.x et le <em>digest cycle</em></h3>
<div class="paragraph">
<p>La première étape est donc de détecter une modification du modèle.
Un changement est forcément déclenché par un événement provenant
soit directement de l&#8217;utilisateur
(par exemple un clic sur un bouton, ou une valeur entrée dans un champ de formulaire)
soit par le code applicatif (une réponse HTTP, une exécution de méthode asynchrone après un <code>timeout</code>, etc.).</p>
</div>
<div class="paragraph">
<p>Comment fait donc le framework pour savoir qu&#8217;un événement est survenu&#160;?
Et bien c&#8217;est simple, il nous force à utiliser ses directives,
par exemple <code>ng-click</code> pour surveiller un clic, ou <code>ng-model</code> pour surveiller un input,
et ses services, par exemple <code>$http</code> pour les appels HTTP ou <code>$timeout</code> pour exécuter du code asynchrone.</p>
</div>
<div class="paragraph">
<p>Le fait d&#8217;utiliser ses directives et services permet au framework d&#8217;être parfaitement informé du fait qu&#8217;un
événement vient de se produire.
C&#8217;est ça la première partie de la magie&#160;!
Et c&#8217;est cette première partie qui va déclencher la seconde&#160;:
il faut maintenant que le framework analyse le changement qui vient de survenir,
et puisse déterminer quelle partie du DOM doit être mise à jour.</p>
</div>
<div class="paragraph">
<p>Pour cela, en version 1.x, le framework maintient une liste de <em>watchers</em> (des <em>observateurs</em>)
qui représente la liste de ce qu&#8217;il doit surveiller.
Pour simplifier, un <em>watcher</em> est créé pour chaque expression dynamique utilisée dans un template.
Il y a donc un <em>watcher</em> pour chaque petit bout dynamique de l&#8217;application,
et on peut donc avoir facilement plusieurs centaines de <em>watchers</em> dans une page.</p>
</div>
<div class="paragraph">
<p>Ces <em>watchers</em> ont un rôle central dans AngularJS&#160;1.x&#160;:
ils sont la mémoire du framework pour connaître l&#8217;état de notre application.</p>
</div>
<div class="paragraph">
<p>Ensuite, à chaque fois que le framework détecte un changement,
il déclenche ce que l&#8217;on appelle le <em>digest</em> (la <em>digestion</em>).</p>
</div>
<div class="paragraph">
<p>Ce <em>digest</em> évalue alors toutes les expressions stockées dans les <em>watchers</em>
et compare leur nouvelle valeur avec leur ancienne valeur.
Si un changement est constaté entre la nouvelle valeur d&#8217;une expression et son ancienne valeur,
alors le framework sait que l&#8217;expression en question doit être remplacée par sa nouvelle valeur dans le DOM
pour refléter ce changement.
Cette technique est ce que l&#8217;on appelle du <em>dirty checking</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag 2d570dcbc5913162e584d9fee5c36d9b" width="590" height="154">
</div>
</div>
<div class="paragraph">
<p>Pendant ce <em>digest</em>, AngularJS parcourt toute la liste des <em>watchers</em>,
et évalue chacun d&#8217;eux pour connaître la nouvelle valeur de l&#8217;expression surveillée.
Avec une subtilité de taille&#160;: ce cycle va être effectué dans son intégralité
tant que les résultats de tous les <em>watchers</em> ne sont pas stables,
c&#8217;est à dire tant que la dernière valeur calculée n&#8217;est pas la même que la nouvelle valeur.
Car bien sûr, un <em>watcher</em>, lorsqu&#8217;il détecte un changement de valeur de l&#8217;expression qu&#8217;il observe,
déclenche un callback.
Et ce callback peut lui-même modifier à nouveau le modèle,
et donc changer la valeur d&#8217;une ou plusieurs expressions surveillées&#160;!</p>
</div>
<div class="paragraph">
<p>Prenons un exemple minimaliste&#160;: une page avec deux champs à remplir par l&#8217;utilisateur,
son nom et son mot de passe, et un indice de robustesse du mot de passe. Un <em>watcher</em> est utilisé pour surveiller les
changements du mot de passe, et recalculer sa robustesse
chaque fois qu&#8217;il change.</p>
</div>
<div class="paragraph">
<p>Nous avons alors cette liste de <em>watchers</em> après la première
itération du cycle de <em>digest</em>,
lorsque l&#8217;utilisateur a saisi le premier caractère de son mot de passe&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">$$watchers (expression -&gt; value)
- "user.name" -&gt; "Cédric"
- "user.password" -&gt; "h"
- "passwordStrength" -&gt; 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction de callback du <em>watcher</em> qui observe le mot de
passe est alors appelée, et elle calcule la nouvelle valeur
de <code>passwordStrength</code>&#160;: 3.</p>
</div>
<div class="paragraph">
<p>Mais Angular n&#8217;a aucune idée des changements appliqués au modèle. Il lance donc une deuxième itération pour savoir si le
modèle est stable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">$$watchers
- "user.name" -&gt; "Cédric"
- "user.password" -&gt; "h"
- "passwordStrength" -&gt; 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce n&#8217;est pas le cas&#160;: la valeur de <code>passwordStrength</code> a
changé depuis la première itération. Une nouvelle itération
est donc lancée.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">$$watchers
- "user.name" -&gt; "Cédric"
- "user.password" -&gt; "h"
- "passwordStrength" -&gt; 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette fois, c&#8217;est stable.
C&#8217;est seulement à ce moment-là qu&#8217;AngularJS&#160;1.x applique les résultats sur le DOM.
Cette boucle de <em>digest</em> est donc jouée au moins 2 fois à chaque changement dans l&#8217;application.
Elle peut être jouée jusqu&#8217;à 10 fois mais pas plus&#160;: après 10 cycles,
si les résultats ne sont toujours pas stables,
le framework considère qu&#8217;il y a une boucle infinie et lance une exception.</p>
</div>
<div class="paragraph">
<p>Donc mon schéma précédent ressemble en fait plus à&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png;base64,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" alt="diag ac3a3e4916ea91c011acf26acb780f8d" width="590" height="182">
</div>
</div>
<div class="paragraph">
<p>Et j&#8217;insiste&#160;: c&#8217;est ce qui se passe après chaque événement de notre application.
Cela veut dire que si l&#8217;utilisateur entre 5 caractères dans un champ, le <em>digest</em> sera lancé 5 fois,
avec 3 boucles à chaque fois dans notre petit exemple, soit 15 boucles d&#8217;exécution.
Dans une application réelle, on peut avoir facilement plusieurs centaines de <em>watchers</em> et
donc plusieurs milliers d&#8217;évaluation d&#8217;expression à chaque événement.</p>
</div>
<div class="paragraph">
<p>Même si ça semble fou, cela marche très bien car les navigateurs modernes sont vraiment rapides,
et qu&#8217;il est possible d&#8217;optimiser deux ou trois choses si nécessaire.</p>
</div>
<div class="paragraph">
<p>Tout cela signifie deux choses pour AngularJS&#160;1.x&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>il faut utiliser les services et les directives du framework pour tout ce qui peut déclencher un changement&#160;;</p>
</li>
<li>
<p>modifier le modèle à la suite d&#8217;un événement non géré par Angular nous oblige à déclencher nous-même
le mécanisme de détection de changement (en ajoutant le fameux <code>$scope.$apply()</code> qui lance le <em>digest</em>).
Par exemple, si l&#8217;on veut faire une requête HTTP sans utiliser le service <code>$http</code>,
il faut appeler <code>$scope.$apply()</code> dans notre callback de réponse pour dire au framework&#160;:
"Hé, j&#8217;ai des nouvelles données, lance le <em>digest</em> s&#8217;il te plaît&#160;!".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Et la magie du framework peut être scindée en deux parties&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le déclenchement de la détection de changement à chaque événement&#160;;</p>
</li>
<li>
<p>la détection de changement elle-même, grâce au <em>digest</em>, et à ses multiples cycles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Maintenant voyons comment Angular fonctionne, et quelle est la différence.</p>
</div>
</div>
<div class="sect2">
<h3 id="_angular_et_les_zones">19.2. Angular et les zones</h3>
<div class="paragraph">
<p>Angular conserve les mêmes principes, mais les implémente d&#8217;une façon différente,
et on pourrait même dire, plus intelligente.</p>
</div>
<div class="paragraph">
<p>Pour la première partie du problème&#8201;&#8212;&#8201;le déclenchement de la détection de changement&#8201;&#8212;&#8201;l&#8217;équipe Angular a construit un petit projet annexe appelé <a href="https://github.com/angular/zone.js">Zone.js</a>.
Ce projet n&#8217;est pas forcément lié à Angular,
car les <em>zones</em> sont un outil qui peut être utilisé dans d&#8217;autres projets.
Les <em>zones</em> ne sont pas vraiment un nouveau concept&#160;:
elles existent dans le language Dart (un autre projet Google) depuis quelques temps déjà.
Elles ont aussi quelques similarités avec les <em>Domains</em> de Node.js (abandonnés depuis)
ou les <em>ThreadLocal</em> en Java.</p>
</div>
<div class="paragraph">
<p>Mais c&#8217;est probablement la première fois que l&#8217;on voit les <em>Zones</em> en JavaScript&#160;:
pas d&#8217;inquiétude, on va les découvrir ensemble.</p>
</div>
<div class="sect3">
<h4 id="_zones">19.2.1. Zones</h4>
<div class="paragraph">
<p>Une zone est un contexte d&#8217;exécution.
Ce contexte va recevoir du code à exécuter,
et ce code peut être synchrone ou asynchrone.
Une zone va nous apporter quelques petits bonus&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une façon d&#8217;exécuter du code avant et après le code reçu à exécuter&#160;;</p>
</li>
<li>
<p>une façon d&#8217;intercepter les erreurs éventuelles d&#8217;exécution du code reçu&#160;;</p>
</li>
<li>
<p>une façon de stocker des variables locales à ce contexte.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Prenons un exemple. Si j&#8217;ai du code dans une application qui ressemble à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">// score computation -&gt; synchronous
const score = computeScore();
// player score update -&gt; synchronous
updatePlayer(playerOne, score);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand on exécute ce code, on obtient&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">computeScore: new score: 1000
udpatePlayer: player 1 has 1000 points</code></pre>
</div>
</div>
<div class="paragraph">
<p>Admettons que je veuille savoir combien de temps prend un tel code.
Je peux faire quelque chose comme ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">startTimer();
const score = computeScore();
updatePlayer(playerOne, score);
stopTimer();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cela produirait ce résultat&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">start
computeScore: new score: 1000
udpatePlayer: player 1 has 1000 points
stop: 12ms</code></pre>
</div>
</div>
<div class="paragraph">
<p>Facile.
Mais maintenant, que se passe-t-il si <code>updatePlayer</code> est une fonction asynchrone&#160;?
JavaScript fonctionne de façon assez particulière&#160;:
les opérations asynchrones sont placées à la fin de la queue d&#8217;exécution,
et seront donc exécutées après les opérations synchrones.</p>
</div>
<div class="paragraph">
<p>Donc cette fois mon code précédent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">startTimer();
const score = computeScore();
updatePlayer(playerOne, score); // asynchronous
stopTimer();</code></pre>
</div>
</div>
<div class="paragraph">
<p>va en fait donner&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">start
computeScore: new score: 1000
stop: 5ms
udpatePlayer: player 1 has 1000 points</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mon temps d&#8217;exécution n&#8217;est plus bon du tout,
vu qu&#8217;il ne mesure que le code synchrone&#160;!
Et c&#8217;est par exemple là que les zones peuvent être utiles.
On va lancer le code en question en utilisant zone.js
pour l&#8217;exécuter dans une zone&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const scoreZone = Zone.current.fork({ name: 'scoreZone' });
scoreZone.run(() =&gt; {
  const score = computeScore();
  updatePlayer(playerOne, score); // asynchronous
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pourquoi est-ce que cela nous aide dans notre cas&#160;?
Hé bien, si la librairie zone.js est chargée dans notre navigateur,
elle va commencer par patcher toutes les méthodes asynchrones de celui-ci.
Donc à chaque fois que l&#8217;on fera un <code>setTimeout()</code>, un <code>setInterval()</code>,
que l&#8217;on utilisera une API asynchrone comme les Promises, XMLHttpRequest,
WebSocket, FileReader, GeoLocation&#8230;&#8203;
on appellera en fait la version patchée de zone.js.
Zone.js connaît alors exactement quand le code asynchrone est terminé,
et permet aux développeurs comme nous d&#8217;exécuter du code à ce moment là,
par le biais d&#8217;un <em>hook</em>.</p>
</div>
<div class="paragraph">
<p>Une zone offre plusieurs <em>hooks</em> possibles&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>onInvoke</code> qui sera appelé avant l&#8217;exécution du code encapsulé dans la zone&#160;;</p>
</li>
<li>
<p><code>onHasTask</code> qui sera appelé après l&#8217;exécution du code encapsulé dans la zone&#160;;</p>
</li>
<li>
<p><code>onHandleError</code> qui sera appelé dès que l&#8217;exécution du code encapsulé dans la zone lance une erreur&#160;;</p>
</li>
<li>
<p><code>onFork</code> qui sera appelé à la création de la zone.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On peut donc utiliser une zone et ses hooks
pour mesurer le temps d&#8217;exécution de mon code asynchrone&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const scoreZone = Zone.current.fork({
  name: 'scoreZone',
  onInvoke(delegate, current, target, task, applyThis, applyArgs, source) {
    // start the timer
    startTimer();
    return delegate.invoke(target, task, applyThis, applyArgs, source);
  },
  onHasTask(delegate, current, target, hasTaskState) {
    delegate.hasTask(target, hasTaskState);
    if (!hasTaskState.macroTask) {
      // if the zone run is done, stop the timer
      stopTimer();
    }
  }
});
scoreZone.run(() =&gt; {
  const score = computeScore();
  updatePlayer(playerOne, score);
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cette fois-ci ça marche&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">start
computeScore: new score: 1000
udpatePlayer: player 1 has 1000 points
stop: 12ms</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous voyez maintenant peut-être le lien qu&#8217;il peut y avoir avec Angular.
En effet, le premier problème du framework est de savoir quand
la détection de changement doit être lancée.
En utilisant les zones, et en faisant tourner le code que nous écrivons dans une zone,
le framework a une très bonne vue de ce qu&#8217;il est en train de se passer.
Il est ainsi capable de gérer les erreurs assez finement,
mais surtout de lancer la détection de changement dès qu&#8217;un appel asynchrone est terminé&#160;!</p>
</div>
<div class="paragraph">
<p>Pour simplifier, Angular fait quelque chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const angularZone = Zone.current.fork({
  name: 'angular',
  onHasTask: triggerChangeDetection
});
angularZone.run(() =&gt; {
  // your application code
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et le premier problème est ainsi résolu&#160;!
C&#8217;est pour cela qu&#8217;en Angular, contrairement à AngularJS&#160;1.x,
il n&#8217;est pas nécessaire d&#8217;utiliser des services spéciaux
pour profiter de la détection de changements.
Vous pouvez utiliser ce que vous voulez, les zones se chargeront du reste&#160;!</p>
</div>
<div class="paragraph">
<p>A noter que les zones sont en voie de standardisation,
et pourraient faire partie de la spécification officielle ECMAScript dans un futur proche.
Autre information intéressante, l&#8217;implémentation actuelle de zone.js
embarque également des informations pour WTF
(qui ne veut pas dire <em>What The Fuck</em> ici, mais <a href="https://google.github.io/tracing-framework/getting-started.html">Web Tracing Framework</a>).
Cette librairie permet de profiler votre application en mode développement,
et de savoir exactement quel temps a été passé dans chaque partie de votre application et du framework.
Bref, plein d&#8217;outils pour analyser les performances si besoin&#160;!</p>
</div>
</div>
<div class="sect3">
<h4 id="_la_détection_de_changement_en_angular">19.2.2. La détection de changement en Angular</h4>
<div class="paragraph">
<p>La seconde partie du problème est la détection de changement en elle-même.
C&#8217;est bien beau de savoir quand on doit la lancer, mais comment fonctionne-t-elle&#160;?</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, il faut se rappeler qu&#8217;une application Angular est un arbre de composants.
Lorsque la détection de changement se lance,
le framework va parcourir l&#8217;arbre de ces composants pour voir si
les composants ont subi des changements qui impactent leurs templates.
Si c&#8217;est le cas, le DOM du composant en question sera mis à jour
(seulement la petite portion impactée par le changement, pas le composant en entier).
Ce parcours d&#8217;arbre se fait de la racine vers les enfants,
et contrairement à AngularJS&#160;1.x, il ne se fait qu&#8217;une seule fois.
Car il y a maintenant une grande différence&#160;:
la détection de changement en Angular ne change pas le modèle de l&#8217;application,
là où un <em>watcher</em> en AngularJS&#160;1.x pouvait changer le modèle lors de cette phase.
Et en Angular, un composant ne peut maintenant modifier que le modèle de ses composants enfants
et pas de son parent.
Finis les changements de modèle en cascade&#160;!</p>
</div>
<div class="paragraph">
<p>La détection de changement est donc seulement là pour vérifier les changements
et modifier le DOM en conséquence.
Il n&#8217;y a plus besoin de faire plusieurs passages comme c&#8217;était le cas dans la version 1.x,
puisque le modèle n&#8217;aura pas changé&#160;!</p>
</div>
<div class="paragraph">
<p>Pour être tout à fait exact, ce parcours se fait deux fois lorsque l&#8217;on est en mode développement
pour vérifier qu&#8217;il n&#8217;y a pas d&#8217;effet de bords indésirables
(par exemple un composant enfant modifiant le modèle utilisé par son composant parent).
Si le second passage détecte un changement, une exception est lancée pour avertir le développeur.</p>
</div>
<div class="paragraph">
<p>Ce fonctionnement a plusieurs avantages&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>il est plus facile de raisonner sur nos applications,
car on ne peut plus avoir de cas où un composant parent passe des informations à un composant enfant
qui lui aussi passe des informations à son parent. Maintenant les données sont transmises dans un seul sens&#160;;</p>
</li>
<li>
<p>la détection de changement ne peut plus avoir de boucle infinie&#160;;</p>
</li>
<li>
<p>la détection de changement est bien plus rapide.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sur ce dernier point, c&#8217;est assez simple à visualiser&#160;:
là où précédemment la version effectuait (M watchers) * (N cycles) vérifications,
la version 2 ne fait plus que M vérifications.</p>
</div>
<div class="paragraph">
<p>Mais un autre paramètre entre en compte dans l&#8217;amélioration des performances d&#8217;Angular&#160;:
le temps qu&#8217;il faut au framework pour faire cette vérification.
Là encore, l&#8217;équipe de Google fait parler sa connaissance profonde
des sciences informatiques et des machines virtuelles.</p>
</div>
<div class="paragraph">
<p>Pour cela, il faut se pencher sur la façon dont sont comparées
deux valeurs en AngularJS&#160;1.x et en Angular.
Dans la version 1.x, le mécanisme est très générique&#160;:
il y a une méthode dans le framework qui est appelée pour chaque <em>watcher</em>
et qui est capable de comparer l&#8217;ancienne valeur et la nouvelle.
Seulement, les machines virtuelles, comme celle qui exécute le code JavaScript dans notre navigateur
(V8 si tu utilises Google Chrome par exemple),
n&#8217;aiment pas vraiment le code générique.</p>
</div>
<div class="paragraph">
<p>Et si tu le permets, je vais faire une petite parenthèse sur le fonctionnement des machines virtuelles.
Avoue que tu ne t&#8217;y attendais pas dans un article sur un framework JavaScript&#160;!
Les machines virtuelles sont des programmes assez extraordinaires&#160;:
on leur donne un bout de code et elles sont capables de l&#8217;exécuter sur n&#8217;importe quelle machine.
Vu que peu d&#8217;entres nous (certainement pas moi) sont capables de produire du code machine performant,
c&#8217;est quand même assez pratique.
On code avec notre language de haut niveau, et on laisse la VM se préoccuper du reste.
Evidemment, les VMs ne se contentent pas de traduire le code,
elles vont aussi chercher à l&#8217;optimiser.
Et elles sont plutôt fortes à ce jeu là,
à tel point que les meilleures VMs ont des performances aussi bonnes que du code machine optimisé
(voire bien meilleures, car elle peuvent profiter d&#8217;informations au runtime,
qu&#8217;il est plus difficile voire impossible de connaître à l&#8217;avance quand on fait l&#8217;optimisation à la compilation).</p>
</div>
<div class="paragraph">
<p>Pour améliorer les performances, les machines virtuelles,
notamment celles qui font tourner des languages dynamiques comme JavaScript,
utilisent un concept nommé <em>inline caching</em>.
C&#8217;est une technique très ancienne
(inventée pour SmallTalk je crois, soit près de 40 ans, une éternité en informatique),
pour un principe finalement assez simple&#160;:
si un programme appelle une méthode beaucoup de fois avec le même type d&#8217;objet,
la VM devrait se rappeler de quelle façon elle évalue les propriétés des objets en question.
Il y a donc un cache qui est créé, d&#8217;où le nom, <em>inline caching</em>.
La VM commence donc par regarder dans le cache si elle connaît le type d&#8217;objet qu&#8217;elle reçoit,
et si c&#8217;est le cas, utilise la méthode optimisée de chargement.</p>
</div>
<div class="paragraph">
<p>Ce genre de cache ne fonctionne vraiment que
si les arguments de la méthode ont la même forme.
Par exemple <code>{name: 'Cédric'}</code> et <code>{name: 'Cyril'}</code> ont la même forme.
Par contre <code>{name: 'JB', skills: []}</code> n&#8217;a pas la même forme.
Lorsque les arguments ont toujours la même forme,
on dit que le cache est <em>monomorphique</em>,
un bien grand mot pour dire qu&#8217;il n&#8217;a qu&#8217;une seule entrée,
ce qui donne des résultats très rapides.
Si il a quelques entrées, on dit qu&#8217;il est <em>polymorphique</em>,
cela veut dire que la méthode peut être appelée avec des types d&#8217;objets différents,
et le code est un peu plus lent.
Enfin, il arrive que la VM laisse tomber le cache s&#8217;il y a trop de types d&#8217;objet différents,
c&#8217;est ce qu&#8217;on appelle un état <em>mégamorphique</em>.
Et tu l&#8217;as compris, c&#8217;est le cas le moins performant.</p>
</div>
<div class="paragraph">
<p>Si j&#8217;en reviens à notre détection de changement en AngularJS&#160;1.x,
on comprend vite que la méthode générique utilisée n&#8217;est pas optimisable
par la machine virtuelle&#160;: on est dans un état mégamorphique,
là où le code est le plus lent.
Et même si les navigateurs et machines modernes permettent de faire plusieurs milliers
de vérification de watchers par seconde, on pouvait quand même atteindre les limites.</p>
</div>
<div class="paragraph">
<p>D&#8217;où l&#8217;idée de faire un peu différemment en Angular&#160;!
Cette fois, plutôt qu&#8217;avoir une seule méthode capable de comparer tous les types d&#8217;objet,
l&#8217;équipe Google a pris le parti de générer dynamiquement des comparateurs pour chaque type.
Cela veut dire qu&#8217;au démarrage de l&#8217;application,
le framework va parcourir l&#8217;arbre des composants et
générer un arbre de <em>ChangeDetectors</em> spécifiques.</p>
</div>
<div class="paragraph">
<p>Par exemple, pour un composant <code>User</code>
avec un champ <code>name</code> affiché dans le template,
on aura un <code>ChangeDetector</code> qui ressemble à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">class User_ChangeDetector {
  detectChanges() {
    if (this.name !== this.previousName) {
      this.previousName = this.name;
      hasChanged = true;
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un peu comme si on avait écrit le code de comparaison à la main.
Ce code est du coup très rapide (monomorphique si vous suivez),
permet de savoir si le composant a changé,
et donc de mettre à jour le DOM en conséquence.</p>
</div>
<div class="paragraph">
<p>Donc non seulement Angular fait moins de comparaison que la version 1.x
(une seule passe suffit) mais en plus ces comparaisons sont beaucoup plus rapides&#160;!</p>
</div>
<div class="paragraph">
<p>Depuis le début, l&#8217;équipe Google surveille d&#8217;ailleurs les performances,
avec des <a href="https://github.com/angular/angular/tree/master/modules/benchmarks_external">benchmarks</a>
entre AngularJS&#160;1.x, Angular et même Polymer et React
sur des cas d&#8217;utilisation un peu tordus afin de voir si la nouvelle version est toujours la plus rapide.
Il est même possible d&#8217;aller encore plus loin,
puisque la stratégie de <em>ChangeDetection</em> peut même être modifiée de sa valeur par défaut,
et être encore plus rapide dans certains cas.
Mais ça c&#8217;est pour un autre chapitre&#160;!</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="aot-compiler">20. Compilation Angular&#160;: JiT (<em>Just in Time</em>) et AoT (<em>Ahead of Time</em>)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_génération_de_code">20.1. Génération de Code</h3>
<div class="paragraph">
<p>Dans le chapitre précédent,
nous avons brièvement évoqué comment le framework <em>générait</em>
une fonction de détection de changement pour chaque composant.</p>
</div>
<div class="paragraph">
<p>C&#8217;est une caractéristique intéressante d&#8217;Angular,
que tu ne retrouveras pas dans d&#8217;autres frameworks&#160;:
Angular, au démarrage de ton application,
va <em>compiler</em> tes templates
et <em>générer</em> du code dynamique pour chaque composant.</p>
</div>
<div class="paragraph">
<p>Le HTML que tu écris dans tes templates n&#8217;est jamais lu directement par le navigateur.
À la place, Angular génère une classe pour chaque composant
qui représente exactement ce que tu as écrit dans ton template.
Cette classe est générée dans un fichier avec l&#8217;extension <code>ngfactory.js</code>,
tu peux le visualiser dans ton navigateur si tu ouvres l&#8217;onglet <code>Sources</code> dans la console.</p>
</div>
<div class="paragraph">
<p>Prenons par exemple notre fameux <code>PonyComponent</code>.
Le template est essentiellement une image avec une <code>source</code> dynamique,
et une légende avec interpolation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;figure&gt;
  &lt;img [src]="getPonyImageUrl()"&gt;
  &lt;figcaption&gt;{{ ponyModel.name }}&lt;/figcaption&gt;
&lt;/figure&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quand Angular le compile,
il commence par <em>parser</em> le template
pour générer un arbre de syntaxe abstraite (<em>Abstract Syntax Tree</em>, AST).
Un AST est un arbre représentant la structure du template,
que les compilateurs utilisent traditionnellement pour représenter la structure d&#8217;un programme.
C&#8217;est le résultat de la phase <em>d&#8217;analyse syntaxique</em> de la compilation.
Cet AST sera ensuite utilisé pour générer le code JS dynamique,
une "définition de vue" par composant (dans notre cas <code>View_PonyComponent</code>).
Une définition de vue contient les nœuds du template.
Les nœuds peuvent être de plusieurs types, par exemple un élément (<code>elementDef</code>),
avec ses noms et attributs, or un simple nœud texte (<code>textDef</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function View_PonyComponent() {
  return viewDef([
    elementDef('figure', [
      elementDef('img', ['src']),
      elementDef('figcaption', [
        textDef()
      ])
    ])
  ]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En fait, au lieu de générer la structure sous forme d&#8217;arbre,
le compilateur génère un tableau plat
(parcours préfixe, avec chaque nœud indiquant combien il a d&#8217;enfants),
pour des raisons de performance&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function View_PonyComponent() {
  return viewDef([
    elementDef(2, 'figure'),
    elementDef(0, 'img',['src']),
    elementDef(1, 'figcaption'),
    textDef()
  ]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec cette représentation,
Angular peut générer le DOM correspondant à notre <code>PonyComponent</code>&#160;:
il se contente d&#8217;ajouter un <code>HTMLElement</code> adéquat au DOM,
pour chaque élément du tableau.</p>
</div>
<div class="paragraph">
<p>Mais comment gère-t-il la détection de changement&#160;?
La définition de vue a en fait un dernier paramètre&#160;:
une fonction de détection de changement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">function View_PonyComponent() {
  return viewDef([
    elementDef(2, 'figure'),
    elementDef(0, 'img', ['src']),
    elementDef(1, 'figcaption'),
    textDef()
  ], (checkBinding, view) =&gt; {
    var component = view.component;
    const currVal_0 = component.getPonyImageUrl();
    checkBinding(view, 1, currVal_0);
    const currVal_1 = component.ponyModel.name;
    checkBinding(view, 4, currVal_1);
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette fonction de détection de changement réalise essentiellement
ce que tu aurais pu écrire à la main.
Elle est invoquée par le framework à chaque fois qu&#8217;il a besoin de vérifier
si un changement s&#8217;est produit (voir le chapitre précédent).
Elle récupère la valeur de ses parties dynamiques
(l&#8217;attribut <code>src</code> et son interpolation),
puis appelle une fonction du framework avec les données de la vue,
l&#8217;indice de l&#8217;élément à mettre à jour, et sa nouvelle valeur.
La fonction <code>checkBinding</code> n&#8217;a qu&#8217;un seul rôle&#160;:
elle compare la valeur stockée précédemment pour cet élément,
et si elle a changé, le met à jour, et le remplace avec sa nouvelle valeur.</p>
</div>
<div class="paragraph">
<p>Ce code généré est très rapide, et peut être optimisé par les moteurs JavaScript
(voir la partie sur le monomorphisme et le <em>inline caching</em> du chapitre précédent).
D&#8217;un autre côté, la génération de ce code prend du temps au démarrage de l&#8217;application.
Cette technique constitue la compilation Juste à Temps (<em>Just in Time</em>, JiT).</p>
</div>
<div class="paragraph">
<p>Pour résumer, quand tu utilises la compilation JiT&#160;:
tu écris du code TypeScript et des templates en HTML,
tu compiles le TypeScript en JavaScript,
et tu envoies du JS et du HTML à tes utilisateurs.
Et à l&#8217;exécution, le HTML est aussi compilé en JS.</p>
</div>
</div>
<div class="sect2">
<h3 id="_compilation_en_avance_ahead_of_time_aot">20.2. Compilation En Avance (<em>Ahead of Time</em>, AoT)</h3>
<div class="paragraph">
<p>Mais ne pourrait-on pas générer ce code <em>avant</em> le démarrage de l&#8217;application&#160;?
Tout à fait, grâce à un compilateur fourni par l&#8217;équipe Angular&#160;;
le compilateur <em>Ahead of Time</em> (AoT).
Tu peux l&#8217;invoquer manuellement dans ton projet (<code>ngc</code>),
ou si tu utilises la CLI (tu devrais),
c&#8217;est un simple flag à ajouter quand tu construis ou sers l&#8217;application&#160;:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ng build --aot</pre>
</div>
</div>
<div class="paragraph">
<p>Le build va désormais utiliser le compilateur Angular
pour compiler les templates en fichiers TypeScript.
En fichiers TypeScript&#160;?
Oui, en fichier TypeScript, parce que cela permet de vérifier
qu&#8217;on n&#8217;a pas fait d&#8217;erreur de syntaxe dans nos templates&#160;!
Le code TypeScript généré et notre code applicatif seront ensuite compilés
(<code>ngc</code> va appeler le compilateur TypeScript immédiatement)
et si tu as fait une faute dans un template,
tu verras une erreur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;figure&gt;
  &lt;!-- wrong method name --&gt;
  &lt;img [src]="getPonyImageUr()"&gt;
  &lt;figcaption&gt;{{ ponyModel.name }}&lt;/figcaption&gt;
&lt;/figure&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le compilateur Angular génère ensuite ce code TypeScript&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">(checkBinding, view) =&gt; {
  var component: PonyComponent = view.component;
  const currVal_0 = component.getPonyImageUr();
  checkBinding(view, 1, currVal_0);
  const currVal_1 = component.ponyModel.name;
  checkBinding(view, 4, currVal_1);
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et ce code lèvera une erreur de compilation TypeScript&#160;:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Property 'getPonyImageUr' does not exist on type 'PonyComponent'.</pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est plutôt cool,
parce que cela signifie que tu peux vérifier tous tes templates avant même
de démarrer l&#8217;application.
Ainsi, tes refactorings futurs seront sans douleur&#160;:
si tu renommes une méthode ou une propriété d&#8217;un composant,
tu sauras immédiatement si un template doit aussi être mis à jour,
parce qu&#8217;il cassera le build.</p>
</div>
<div class="paragraph">
<p>Cela signifie aussi que la compilation peut lever une erreur
alors que ton code semblait fonctionner en mode JiT.
Par exemple, si tu as une propriété privée d&#8217;un composant
utilisée dans un template, cela ne produira pas d&#8217;erreur en mode JiT
(parce que le JavaScript n&#8217;a pas la notion de propriété privée),
mais cela échouera en mode AoT
(parce que le code TypeScript de la ngfactory généré doit accéder à cette propriété).
Pour le moment, il n&#8217;y a pas vraiment de bonne documentation
sur les règles additionnelles à respecter pour être compatible AoT,
à l&#8217;exception de <a href="https://github.com/rangle/angular-2-aot-sandbox">ce repository</a> de Rangle.</p>
</div>
<div class="paragraph">
<p>Compiler ton application avant de l&#8217;envoyer à tes utilisateurs
va aussi grandement améliorer le temps de démarrage de ton application,
puisque la compilation sera déjà faite&#160;!</p>
</div>
<div class="paragraph">
<p>Pour résumé, en mode AoT&#160;:
tu écris toujours du TypeScript et du HTML,
tu compiles le HTML en TypeScript, puis tout le code TypeScript en JavaScript,
puis tu envoies tout le code JS à tes utilisateurs.</p>
</div>
<div class="paragraph">
<p>L&#8217;inconvénient sera la taille de tes modules JavaScript à envoyer à tes utilisateurs&#160;:
le code généré est plus large que les templates non compilés.
Cela est partiellement compensé par le fait que tu n&#8217;as plus besoin
d&#8217;envoyer le compilateur Angular à tes utilisateurs,
puisque les templates sont déjà compilés.
Et le compilateur est un bon gros morceau de code,
alors le gain n&#8217;est pas négligeable.
Sur des applications de taille moyenne ou large,
cela ne compense cependant pas, en général, l&#8217;augmentation de la taille par
les <em>factories</em> générées.
Si tu veux avoir les bénéfices de la compilation AoT
ET conserver des modules de taille raisonnable,
il te faudra creuser les fonctionnalités de <em>lazy-loading</em> que nous avons
expliquées dans le chapitre sur le Routeur.</p>
</div>
<div class="paragraph">
<p>Si tu veux creuser plus profondément le sujet de la compilation des templates,
il y a eu <a href="https://www.youtube.com/watch?v=RXYjPYkFwy4">une chouette conférence à ng-conf 2017</a>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-observables">21. Observables&#160;: utilisation avancée</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Il me faut confesser une erreur&#160;: j&#8217;ai sous-estimé la valeur de RxJS et des Observables.
Et c&#8217;est triste, parce que j&#8217;avais déjà fait la même erreur avec AngularJS 1.x et les <em>promises</em> ("promesses").
Les <em>promises</em> sont très utiles en AngularJS 1.x&#160;: une fois qu&#8217;on les maîtrise,
on peut gérer les parties asynchrones de nos applications très élégamment.
Mais cela demande du temps, et il y a quelques pièges à connaître
(jette un œil à l&#8217;article de blog que nous avons écrit sur le sujet&#160;:
<a href="http://blog.ninja-squad.com/2015/05/28/angularjs-" class="bare">http://blog.ninja-squad.com/2015/05/28/angularjs-</a><em>promises</em>/[Traps, anti-patterns and tips about AngularJS <em>promises</em>],
si tu veux en savoir plus).</p>
</div>
<div class="paragraph">
<p>Angular s&#8217;appuie sur RxJS, et expose des Observables dans certaines de ses APIs (Http, Forms, Router&#8230;&#8203;).
Après avoir codé plus longuement avec RxJS,
je me suis dit que cet ebook méritait un chapitre plus poussé sur les Observables,
leur création, l&#8217;abonnement, les opérateurs disponibles, et leur utilisation possible avec Angular.
J&#8217;espère que cela te donnera quelques idées, ou au moins l&#8217;envie de t&#8217;y plonger plus sérieusement,
car RxJS pourrait jouer un grand rôle dans l&#8217;orchestration de ton application,
et probablement te simplifier la vie.</p>
</div>
<div class="sect2">
<h3 id="_subscribe_unsubscribe_et_pipe_async">21.1. subscribe, unsubscribe et <em>pipe</em> <code>async</code></h3>
<div class="paragraph">
<p>Pour synthétiser ce qu&#8217;on a appris dans le chapitre sur la Programmation Réactive,
un Observable représente une séquence d&#8217;événements à laquelle tu peux t&#8217;abonner.</p>
</div>
<div class="paragraph">
<p>Ce flux d&#8217;événements peut survenir à tout moment,
et il pourrait n&#8217;y avoir qu&#8217;un seul événement, ou dix mille d&#8217;entre eux.
Mais il y a une subtile distinction à percevoir entre deux familles d&#8217;Observables&#160;:
les Observables "chauds" (<em>"hot"</em>), et les Observables "froids" (<em>"cold"</em>).</p>
</div>
<div class="paragraph">
<p>Les observables froids vont émettre des événements uniquement quand on s&#8217;y est abonné.
Tu peux faire l&#8217;analogie avec le visionnage d&#8217;une vidéo sur Youtube&#160;:
le flux vidéo ne démarrera qu&#8217;après avoir appuyé sur lecture.
Par exemple, les observables retournés par la classe <code>HttpClient</code> sont des observables froids&#160;:
ils ne déclenchent une requête que quand on invoque <code>subscribe</code>.</p>
</div>
<div class="paragraph">
<p>Les observables chauds sont un peu différents&#160;:
ils émettent des événements dès leur création.
L&#8217;analogie serait celle de la télévision&#160;:
si tu allumes la TV, tu tombes au milieu d&#8217;une émission,
qui a pu démarrer il y a quelques minutes comme quelques heures.
L&#8217;observable <code>valueChanges</code> dans un <code>FormControl</code> est un observable chaud&#160;:
tu ne recevras pas les valeurs émises avant ton abonnement,
mais seulement celles émises après.</p>
</div>
<div class="paragraph">
<p>Quand tu t&#8217;abonnes à un observable, tu peux passer trois paramètres&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une fonction pour gérer le prochain événement&#160;;</p>
</li>
<li>
<p>une fonction pour gérer une erreur&#160;;</p>
</li>
<li>
<p>une fonction pour gérer la terminaison.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La première est plutôt évidente.
L&#8217;observable est un flux d&#8217;événements,
et tu définis donc que faire quand un tel événement survient.</p>
</div>
<div class="paragraph">
<p>La deuxième permet de gérer une hypothétique erreur.
Ce paramètre est facultatif.
Dans un flux d&#8217;événements représentant des clics,
il n&#8217;y a aucune erreur possible,
même si ton utilisateur/utilisatrice se pète les doigts.
(cette blague n&#8217;est pas de moi, elle est tirée d&#8217;une <a href="https://www.youtube.com/watch?v=uQ1zhJHclvs">chouette présentation de André Staltz</a>
sur RxJS à NgEurope 2016).
Mais dans la plupart des cas, c&#8217;est pertinent d&#8217;avoir une gestion d&#8217;erreur.
Cela te permet par exemple de définir quoi faire si tu reçois une erreur en réponse du serveur HTTP.</p>
</div>
<div class="paragraph">
<p>Il faut retenir un point important sur ce sujet&#160;:
une erreur est un événement terminal, l&#8217;observable n&#8217;émettra plus aucun autre événement ensuite.
Alors si c&#8217;est important pour toi de continuer à écouter,
il te faudra gérer correctement ce cas (on y reviendra dans une minute).</p>
</div>
<div class="paragraph">
<p>La troisième fonction que tu peux passer en paramètre permet de gérer la terminaison&#160;:
en effet, un observable peut se terminer (une vidéo Youtube par exemple).
Et parfois, tu veux réaliser une action spéciale, comme prévenir ton utilisateur-trice, ou calculer une valeur.</p>
</div>
<div class="paragraph">
<p>Dans notre application Ponyracer, une course est représentée par un observable,
qui émet la position des poneys.
Quand la course se termine, l&#8217;observable arrête d&#8217;émettre des événements.
A ce moment, on veut alors calculer quel poney a gagné la course,
et modifier l&#8217;interface en conséquence, etc.</p>
</div>
<div class="paragraph">
<p>Mais peut-être que l&#8217;utilisateur-trice ne va pas regarder la course jusqu&#8217;au bout.
Que se passe-t-il alors&#160;? Le composant va être détruit.
Mais, si on s&#8217;est abonné à l&#8217;observable dans ce composant avant sa destruction,
alors la fonction <code>next</code> va continuer à faire son travail à chaque événement.
Même si le composant n&#8217;est plus affiché&#160;!
Cela peut conduire à des fuites mémoire et toute sorte de problème&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>La bonne pratique est donc de stocker cet abonnement retourné par la fonction <code>subscribe</code>,
et à la destruction du composant, appeler <code>unsubscribe</code> sur cet abonnement
(typiquement dans la méthode <code>ngOnDestroy</code>).
Enveloppe le <code>unsubscribe</code> dans un test pour vérifier si l&#8217;abonnement est bien présent
(il se peut que l&#8217;abonnement n&#8217;ait pas encore été initialisé, et tu aurais dans ce cas
une erreur en appelant <code>unsubscribe</code> sur un objet <code>undefined</code>).</p>
</div>
<div class="paragraph">
<p>Cette règle générale de désabonnement présente quelques exceptions.
Cela n&#8217;est pas nécessaire pour les observables qui n&#8217;émettent
qu&#8217;un seul événement puis se terminent, comme une requête HTTP.
Et elle n&#8217;est définitivement pas nécessaire non plus pour les observables du routeur,
comme les observables <code>params</code>&#160;: le routeur s&#8217;en chargera pour toi, youpi&#160;!</p>
</div>
<div class="paragraph">
<p>Enfin, un dernier sujet, et non des moindres&#160;: le <em>pipe</em> <code>async</code>.
Angular fournit un <em>pipe</em> spécial, appelé <code>async</code>.
Tu peux l&#8217;utiliser dans tes templates pour t&#8217;abonner directement à un observable.</p>
</div>
<div class="paragraph">
<p>Cela présente quelques avantages&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>tu peux stocker l&#8217;observable directement dans ton composant, sans avoir à t&#8217;y abonner manuellement,
puis stocker ensuite la valeur émise dans un attribut de ton composant.</p>
</li>
<li>
<p>le <em>pipe</em> <code>async</code> va s&#8217;occuper du désabonnement pour toi à la destruction du composant.</p>
</li>
<li>
<p>il peut être utilisé pour améliorer magiquement les performances (on y reviendra).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mais ce <em>pipe</em> présente aussi un inconvénient&#160;:
il te faudra être prudent quand tu utiliseras plusieurs fois cette syntaxe dans un template.</p>
</div>
<div class="paragraph">
<p>Permet-moi d&#8217;illustrer ce dernier point, dans un <code>RaceComponent</code>,
qui afficherait les caractéristiques d&#8217;une course&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-race',
  template: `&lt;div&gt;
    &lt;h2&gt;{{ (race | async)?.name }}&lt;/h2&gt;
    &lt;small&gt;{{ (race | async)?.date }}&lt;/small&gt;
  &lt;/div&gt;`
})
export class RaceComponent implements OnInit {

  race: Observable&lt;RaceModel&gt;;
  error: boolean;

  constructor(private raceService: RaceService) {
  }

  ngOnInit() {
    this.race = this.raceService.get().pipe(
    // the `catchError` operator allows to handle a potential error
    // it must return an observable (here an empty one).
      catchError(error =&gt; {
        this.error = true;
        console.error(error);
        return EMPTY;
      })
    );
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce bout de code suppose que la méthode <code>raceService.get()</code>
retourne un Observable émettant un <code>RaceModel</code>.
On stocke cet observable dans un champ nommé <code>race</code>
(tu verras parfois le nom <code>race$</code> dans certains articles de blogs,
car d&#8217;autres frameworks utilisent cette convention pour les variables de type Observable).
Ensuite on utilise l&#8217;observable <code>race</code> deux fois dans le template avec le <em>pipe</em> <code>async</code>&#160;:
une première fois pour afficher le nom de la course, et une seconde pour sa date.
Le code du composant est plutôt élégant&#160;:
il n&#8217;est pas nécessaire de s&#8217;abonner à l&#8217;observable.</p>
</div>
<div class="paragraph">
<p>Mais tu as peut-être déjà repéré le problème.
On appelle deux fois le <em>pipe</em> <code>async</code>,
ce qui veut dire qu&#8217;on s&#8217;y abonne deux fois.
Si la méthode <code>raceService.get()</code> déclenche une requête HTTP
pour obtenir les détails de la course,
cette requête sera déclenchée deux fois&#160;!</p>
</div>
<div class="paragraph">
<p>Une première solution consisterait à modifier l&#8217;observable
pour le partager entre les différents abonnés.
Cela peut se faire avec l&#8217;opérateur <code>publishReplay</code> par exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component, OnInit } from '@angular/core';
import { Observable, EMPTY } from 'rxjs';
import { catchError, publishReplay, refCount } from 'rxjs/operators';
import { RaceService, RaceModel } from './race.service';

@Component({
  selector: 'ns-race',
  template: `&lt;div&gt;
    &lt;h2&gt;{{ (race | async)?.name }}&lt;/h2&gt;
    &lt;small&gt;{{ (race | async)?.date }}&lt;/small&gt;
  &lt;/div&gt;`
})
export class RaceComponent implements OnInit {

  race: Observable&lt;RaceModel&gt;;
  error: boolean;

  constructor(private raceService: RaceService) {
  }

  ngOnInit() {
    this.race = this.raceService.get().pipe(
      // the `catchError` operator allows to handle a potential error
      // it must return an observable (here an empty one).
      catchError(error =&gt; {
        this.error = true;
        console.error(error);
        return EMPTY;
      }),
      // will share the subscription between the subscribers
      publishReplay(),
      refCount()
    );
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais, même si cela est désormais correct et ne produit pas deux requêtes HTTP différentes,
je n&#8217;aime pas trop le template.
La plupart du temps, le composant a aussi besoin d&#8217;accéder à la course pour implémenter des détails de présentation.
Et il lui faut aussi gérer les erreurs.
Un abonnement, et des opérateurs <code>do()</code> et/ou un <code>catch()</code> dans le composant sont donc souvent nécessaires.
Alors stocker la course dans un champ n&#8217;est pas un poids trop lourd, et rend le template plus simple.</p>
</div>
<div class="paragraph">
<p>Note que la version 4.0 a introduit la syntaxe <code>as</code>
qui permet de résoudre le problème en ne s&#8217;abonnant qu&#8217;une seule fois
et en stockant le résultat dans une variable du template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component, OnInit } from '@angular/core';
import { Observable, EMPTY } from 'rxjs';
import { catchError } from 'rxjs/operators';
import { RaceService, RaceModel } from './race.service';

@Component({
  selector: 'ns-race',
  template: `&lt;div *ngIf="race | async as raceModel"&gt;
    &lt;h2&gt;{{ raceModel.name }}&lt;/h2&gt;
    &lt;small&gt;{{ raceModel.date }}&lt;/small&gt;
  &lt;/div&gt;`
})
export class RaceComponent implements OnInit {

  race: Observable&lt;RaceModel&gt;;
  error: boolean;

  constructor(private raceService: RaceService) {
  }

  ngOnInit() {
    this.race = this.raceService.get().pipe(
      // the `catchError` operator allows to handle a potential error
      // it must return an observable (here an empty one).
      catchError(error =&gt; {
        this.error = true;
        console.error(error);
        return EMPTY;
      })
    );
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est assez élégant.</p>
</div>
<div class="paragraph">
<p>Une autre solution possible est de couper notre composant en deux&#160;:
un intelligent (<em>"smart component"</em>) qui se chargera de la récupération de la course,
et un plus bête (<em>"dumb component"</em>) qui se contentera simplement d&#8217;afficher la course reçue en entrée.</p>
</div>
<div class="paragraph">
<p>Cela ressemblerait à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-racecontainer',
  template: `&lt;div&gt;
    &lt;div *ngIf="error"&gt;An error occurred while fetching the race&lt;/div&gt;
    &lt;ns-race *ngIf="race | async as r" [raceModel]="r"&gt;&lt;/ns-race&gt;
  &lt;/div&gt;`
})
export class RaceContainerComponent implements OnInit {

  race: Observable&lt;RaceModel&gt;;
  error: boolean;

  constructor(private raceService: RaceService) {
  }

  ngOnInit() {
    this.race = this.raceService.get().pipe(
      // the `catchError` operator allows to handle a potential error
      // it must return an observable (here an empty one).
      catchError(error =&gt; {
        this.error = true;
        console.error(error);
        return EMPTY;
      })
    );
  }
}

@Component({
  selector: 'ns-race',
  template: `&lt;div&gt;
    &lt;h2&gt;{{ raceModel.name }}&lt;/h2&gt;
    &lt;small&gt;{{ raceModel.date }}&lt;/small&gt;
  &lt;/div&gt;`
})
export class RaceComponent {

  @Input() raceModel: RaceModel;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce modèle peut être utile dans certaines parties de ton application,
mais, comme tout modèle, tu n&#8217;as pas à l&#8217;utiliser systématiquement.
C&#8217;est parfois satisfaisant de n&#8217;avoir qu&#8217;un seul composant qui se charge de ces deux aspects.
D&#8217;autres fois, tu auras besoin d&#8217;extraire un composant tout bête pour le réutiliser ailleurs
dans ton application, et dans ce cas construire deux composants fera sens.</p>
</div>
</div>
<div class="sect2">
<h3 id="_le_pouvoir_des_opérateurs">21.2. Le pouvoir des opérateurs</h3>
<div class="paragraph">
<p>On a déjà croisé quelques opérateurs,
mais j&#8217;aimerais prendre un peu de temps pour en décrire quelques autres dans un exemple pas à pas.
On va coder un champ de saisie <em>typeahead</em>.
Un champ typeahead permet à ton utilisateur-trice de saisir du texte dans un champ,
puis l&#8217;application propose quelques suggestions basées sur cette saisie
(comme la boîte de recherche Google).</p>
</div>
<div class="paragraph">
<p>Un bon typeahead a quelques particularités&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>il affiche des propositions qui correspondent à la recherche (évidemment)&#160;;</p>
</li>
<li>
<p>il permet de n&#8217;afficher les résultats que si la saisie contient déjà quelques caractères&#160;;</p>
</li>
<li>
<p>il ne chargera pas les résultats pour chaque frappe de l&#8217;utilisateur-trice,
mais attendra un peu pour être sûr qu&#8217;il/elle a fini de taper&#160;;</p>
</li>
<li>
<p>il ne déclenchera pas deux fois la même requête si l&#8217;utilisateur-trice saisit la même recherche.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tout cela peut se faire à la main, mais c&#8217;est loin d&#8217;être trivial.
Heureusement, Angular et RxJS se combinent plutôt bien pour résoudre ce problème&#160;!</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, regardons à quoi ressemblerait un tel composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Component, OnInit } from '@angular/core';
import { FormControl } from '@angular/forms';
import { PonyService, PonyModel } from './pony.service';

@Component({
  selector: 'ns-typeahead',
  template: `&lt;div&gt;
    &lt;input [formControl]="input"&gt;
    &lt;ul&gt;
      &lt;li *ngFor="let pony of ponies"&gt;{{ pony.name }}&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;`
})
export class PonyTypeAheadComponent implements OnInit {
  input = new FormControl();
  ponies: Array&lt;PonyModel&gt; = [];

  constructor(private ponyService: PonyService) {}

  ngOnInit() {
    // todo: do something with the input
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans la méthode <code>ngOnInit</code>,
on commence par s&#8217;abonner à l&#8217;observable <code>valueChanges</code> exposé par le <code>FormControl</code>
(relit le chapitre sur les formulaires si tu as besoin de te rafraîchir la mémoire).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">this.input.valueChanges
  .subscribe(value =&gt; console.log(value));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensuite, on veut utiliser cette saisie pour trouver les poneys correspondant.
Notre service <code>PonyService</code> possède justement une méthode <code>search()</code> dont c&#8217;est exactement le travail&#160;!
On peut supposer que cette méthode réalise une requête HTTP pour obtenir les résultats du serveur,
alors elle retourne un <code>Observable&lt;Array&lt;PonyModel&gt;&gt;</code>, un observable qui émet des tableaux de poneys.</p>
</div>
<div class="paragraph">
<p>Abonnons-nous à cette méthode pour mettre à jour le champ <code>ponies</code> de notre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">this.input.valueChanges
  .subscribe(value =&gt; {
    this.ponyService.search(value)
      .subscribe(results =&gt; this.ponies = results);
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cool, ça fonctionne.
Mais quand je vois un truc comme ça,
cela me rappelle les <em>promises</em> et les invocations de <code>then</code> imbriquées,
qui pourraient être mises à plat.
Et effectivement, tu peux faire de même avec les Observables,
grâce à l&#8217;opérateur <code>concatMap</code> par exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">this.input.valueChanges.pipe(
  concatMap(value =&gt; this.ponyService.search(value))
).subscribe(results =&gt; this.ponies = results);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voilà, c&#8217;est bien plus élégant&#160;!
<code>concatMap</code> "aplatit" notre code.
Il remplace chaque événement émis par l&#8217;observable source
(i.e. le nom de poney saisi) par les événements émis par l&#8217;observable de poneys.
Mais ce n&#8217;est pas encore l&#8217;opérateur idéal dans cette situation.
Comme notre méthode <code>search</code> déclenche une requête par recherche,
on peut rencontrer quelques problèmes si une requête est trop longue.
Notre utilisateur-trice pourrait rechercher <code>n</code> puis <code>ni</code>,
et la réponse pourrait mettre beaucoup de temps à venir pour <code>n</code>,
et moins pour <code>ni</code>.
Cela signifie que notre code ci-dessus n&#8217;affichera les seconds résultats qu&#8217;une fois les premiers affichés,
alors qu&#8217;on s&#8217;en moque désormais&#160;!
Cela pourrait être traité manuellement, mais ça serait vraiment pénible.</p>
</div>
<div class="paragraph">
<p>RxJS propose un opérateur super pratique pour ce cas d&#8217;utilisation&#160;: <code>switchMap</code>.
À la différence de <code>concatMap</code>, <code>switchMap</code> ne se préoccupera que de la dernière valeur émise,
et ignorera les valeurs précédentes.
Ainsi, nous sommes sûrs que les résultats d&#8217;une recherche précédente ne seront jamais affichés.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">this.input.valueChanges.pipe(
  switchMap(value =&gt; this.ponyService.search(value))
).subscribe(results =&gt; this.ponies = results);</code></pre>
</div>
</div>
<div class="paragraph">
<p>OK, maintenant ignorons les recherches de moins de trois caractères.
Trop facile&#160;: il nous suffit d&#8217;utiliser l&#8217;opérateur <code>filter</code>&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">this.input.valueChanges.pipe(
  filter(query =&gt; query.length &gt;= 3),
  switchMap(value =&gt; this.ponyService.search(value))
).subscribe(results =&gt; this.ponies = results);</code></pre>
</div>
</div>
<div class="paragraph">
<p>On ne veut également pas que notre recherche se déclenche immédiatement après la frappe&#160;:
on aimerait la déclencher seulement quand l&#8217;utilisateur-trice s&#8217;est arrêté-e de taper pendant 400ms.
Oui, tu l&#8217;as deviné&#160;: il y bien a un opérateur pour cela,
et il s&#8217;appelle <code>debounceTime</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">this.input.valueChanges.pipe(
  filter(query =&gt; query.length &gt;= 3),
  debounceTime(400),
  switchMap(value =&gt; this.ponyService.search(value))
).subscribe(results =&gt; this.ponies = results);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Donc maintenant un-e utilisateur-trice peut saisir une recherche,
corriger quelques caractères, puis en ajouter d&#8217;autres,
et la requête se déclenchera uniquement quand 400ms se seront écoulées depuis la dernière frappe.
Mais que se passe-t-il si l&#8217;utilisateur-trice saisit "Rainbow",
attend 400ms (ce qui déclenchera donc une requête),
puis saisit "Rainbow Dash" et immédiatement supprime "Dash" pour revenir à "Rainbow"&#160;?
Cela déclencherait deux requêtes successives pour "Rainbow"&#160;!
Pourrait-on déclencher une requête seulement si la recherche est différente de la précédente&#160;?
Bien sûr, avec <code>distinctUntilChanged</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">this.input.valueChanges.pipe(
  filter(query =&gt; query.length &gt;= 3),
  debounceTime(400),
  distinctUntilChanged(),
  switchMap(value =&gt; this.ponyService.search(value))
).subscribe(results =&gt; this.ponies = results);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une dernière chose&#160;: il nous faut encore gérer proprement les erreurs.
On sait déjà que <code>valueChanges</code> ne va jamais émettre d&#8217;erreur,
mais notre observable <code>ponyService.search()</code> le pourrait tout à fait car il dépend du réseau.
Et le problème avec les observables c&#8217;est qu&#8217;une erreur va définitivement stopper le flux&#160;:
si la moindre requête échoue, le composant ne fonctionnera plus du tout&#8230;&#8203;
Ce n&#8217;est évidemment pas ce que l&#8217;on souhaite, alors attrapons ces maudites erreurs&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">this.input.valueChanges.pipe(
  filter(query =&gt; query.length &gt;= 3),
  debounceTime(400),
  distinctUntilChanged(),
  switchMap(value =&gt; this.ponyService.search(value).pipe(
    catchError(error =&gt; of([])))
  )
).subscribe(results =&gt; this.ponies = results);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Plutôt cool, tu ne trouves pas&#160;?
On ne déclenche une recherche que si l&#8217;utilisateur saisit un texte de plus de 3 caractères
et attend au moins 400ms.
On garantit qu&#8217;on ne déclenchera pas deux fois la même requête,
et les suggestions sont toujours en accord avec la recherche&#160;!
Et le tout avec 5 lignes de code seulement.
Bonne chance pour implémenter la même chose à la main sans introduire de problèmes&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Bon, d&#8217;accord, c&#8217;est le cas d&#8217;utilisation idéal pour RxJS,
mais il faut retenir qu&#8217;il propose une tonne d&#8217;opérateurs,
dont certains sont de véritables pépites.
Apprendre à les maîtriser demande du temps,
mais cela vaut le coup car ils peuvent être d&#8217;une aide précieuse pour ton application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_construire_son_propre_observable">21.3. Construire son propre Observable</h3>
<div class="paragraph">
<p>Parfois, malheureusement, il te faudra utiliser des bibliothèques qui produisent des événements
mais sans utiliser un Observable.
Tout espoir n&#8217;est pas perdu, car tu peux évidemment créer tes propres Observables,
en utilisant, par exemple, la méthode <code>Observable.create(observer &#8658; {})</code>.</p>
</div>
<div class="paragraph">
<p>La fonction passée en paramètre est appelée la fonction <code>subscribe</code>&#160;:
elle sera en charge d&#8217;émettre les événements et les erreurs, et de terminer le flux.</p>
</div>
<div class="paragraph">
<p>Par exemple, si tu veux créer un Observable qui émettra 1, puis 2, puis se termine, tu pourrais écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const numbers = Observable.create(observer =&gt; {
  observer.next(1);
  observer.next(2);
  observer.complete();
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>On pourrait alors s&#8217;abonner à un tel observable&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">numbers.subscribe(
  number =&gt; console.log(number),
  error =&gt; console.log(error),
  () =&gt; console.log('Complete!')
);
// Will log:
// 1
// 2
// Complete!</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant, disons qu&#8217;on veut émettre 'hello' toutes les deux secondes, sans jamais se terminer.
On pourrait faire cela facilement avec des opérateurs fournis,
mais essayons de le faire nous-même, pour l&#8217;exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Observable } from 'rxjs';

export class HelloService {
  get(): Observable&lt;string&gt; {
    return Observable.create(observer =&gt; {
      const interval = setInterval(() =&gt; observer.next('hello'), 2000);
    });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction callback passée à <code>Observable.create()</code>
peut aussi retourner une fonction qui sera appelée lors du désabonnement.
C&#8217;est très pratique si tu as du nettoyage à réaliser.
Et c&#8217;est le cas dans notre <code>HelloService</code>,
parce qu&#8217;il nous faut stopper le <code>setInterval</code> au désabonnement de l&#8217;observable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { Observable } from 'rxjs';

export class HelloService {
  get(): Observable&lt;string&gt; {
    return Observable.create(observer =&gt; {
      const interval = setInterval(() =&gt; observer.next('hello'), 2000);
      return () =&gt; clearInterval(interval);
    });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme l&#8217;interval ne sera pas créé avant l&#8217;abonnement,
nous venons donc de créer un observable "froid".</p>
</div>
<div class="paragraph">
<p>J&#8217;espère que tu as apprécié ce court chapitre sur les observables.
Ils peuvent aussi servir à séquencer tes requêtes HTTP,
ou à communiquer entre tes composants (on y reviendra bientôt).
Mais tu as désormais un bon aperçu de ce qui est possible&#160;!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Mise en pratique</div>
</td>
<td class="content">
<div class="paragraph">
<p>Nous avons de nombreux exercices qui utilisent RxJS et te permettent de découvrir les opérateurs&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/14/display-user">Afficher l&#8217;utilisateur</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span></p>
</li>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/15/logged-home">Page d&#8217;accueil connecté</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span></p>
</li>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/16/remember-me">Remember me</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span></p>
</li>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/17/logout">Logout</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span></p>
</li>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/23/advanced-observables">Astuces sur les Observables</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span></p>
</li>
<li>
<p><a href="https://angular-exercises.ninja-squad.com/exercises/24/boost-pony">Booster un poney</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACACAMAAADnN9ENAAACSVBMVEVMaXH7whr7whr7whr7whr7whr7whr7whr7whr7whr7whr7whp4o614o614o614o637whr7whp4o614o614o614o614o614o614o614o62EoKN4o614o637whqFXFKFXFKQnZm4kni0k3vA1Njr8fLd5+myytB/qLGFXFKFXFKcmY98oqp4o63V4uWFXFKFXFKoloWgmIx4o62Hpqu+nofCpI/b08yFXFKAoaaMnpzYzcSFXFKFXFKUnJaYm5O7mIDl5eOGrbaFXFKGk5Kfd2WSalyYcGClfmqhlIZ6lpx+hIWDaWOFXFKFXFJ/gICkl4nFqpeFXFKFXFKCamSDZV2EYFiDaWOCbmne2dTk7O77whqOZE6Ad3TIsJ6jwMflryWbb0h/gIDo6+rH2dz0vB58jZGIn6Cxgj17kZbOvK2FXFL7whq5iTqVt75/e3rPnC/eqSiMYk+FXFKjdkS4p6Ll6OjLtqbSwrXFubacu8PstSGynZiOsrqLZVzauj/013mrlI56mqLCtFrt69fY1dSApaTrvizz2oafgXqSb2aqxcuhrX/11GvO3uGQeHG5z9T20V7e3t7s7uX4y0P6xSjv5byYeHC+sKyli4TSzMrIzc28wcGwtLVHR0c8OztIR0c1NTWNkJEvLy+NioqTkJCHhISlqKnU2dpCQUGBhIRnZmZeYGBqbGyZnJ07Ozvf5ebLwsCmqapfYGFiYmLAw8Tw9fXs8vNqjZVBTE9PYmY4Pj9deH5mho5GU1Y9RUdhf4ZznKVKW140Njdz5u6AAAAAf3RSTlMAMIBQ7/+fEI/PYL8QcIBAIK+v/7+fz+8wUP/fYEAgEP//////////32D//yD//7///4//////UP///zDv///////P//////////+vj3Ag//+fQJ/////////fz///////////////////gHD///////+v//////////////9AWHP9fwAABxxJREFUeAHs1IVy5DAQBNBZ0DJ3mJUonGiPmZmZmZmZPv6ssb2oFFqHeYUq7LJ7mlatWhWVWDxBf4SkEHH6EwhPKk2/X0Z4sn9AknRSeJIx+u0SguXot8sLliG7QrFUKtOvUEkKVrUXpQZPT6EZrBdAX7FA0YsLX7ZCFv0w+gco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" alt="Pro" width="18px" title="Pro"></span></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-components">22. Composants et directives avancés</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_requêtes_de_vue_viewchild">22.1. Requêtes de vue&#160;: <code>ViewChild</code></h3>
<div class="paragraph">
<p>Dans le chapitre sur les templates,
on a mentionné les "variables locales",
une chouette fonctionnalité qui permet d&#8217;obtenir dans le template une référence
vers un élément du DOM.
Par exemple, tu peux facilement donner le focus à un champ grâce à un bouton&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;input #myInput&gt;
&lt;button (click)="myInput.focus()"&gt;Focus&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a aussi rencontré cette fonctionnalité dans le chapitre sur les Formulaires,
quand on voulait obtenir une référence vers une directive précise&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;input name="login" [(ngModel)]="user.login" required #loginCtrl="ngModel"&gt;
&lt;div *ngIf="loginCtrl.dirty &amp;&amp; loginCtrl.hasError('required')"&gt;
  The login field is required
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais comment faire si on a besoin de ces même références dans le code de
notre composant, et pas seulement dans son template&#160;?
C&#8217;est là que les requêtes de vue (<em>view queries</em>) arrivent à la rescousse.</p>
</div>
<div class="paragraph">
<p>Par exemple, tu pourrais vouloir donner le focus à un champ dès que le
composant est affiché.
Pour ce faire, il nous faut obtenir une référence vers l&#8217;input,
grâce au décorateur <code>ViewChild</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-login',
  template: `
    &lt;input #loginInput name="login" [(ngModel)]="credentials.login" required&gt;
  `
})
export class LoginComponent implements AfterViewInit {

  credentials = { login: '' };

  @ViewChild('loginInput') private loginInput: ElementRef&lt;HTMLInputElement&gt;;

  ngAfterViewInit() {
    this.loginInput.nativeElement.focus();
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On déclare un attribut nommé <code>loginInput</code>, que l&#8217;on décore avec <code>ViewChild</code>.
Ce décorateur a besoin d&#8217;un sélecteur en paramètre&#160;:
ici on utilise la variable locale déclarée dans notre template.
Le décorateur indique ainsi au framework qu&#8217;il veut requêter la vue pour y
trouver un élément avec ce nom de variable locale.
L&#8217;attribut sera initialisé avec cet élément, de type <code>ElementRef&lt;T&gt;</code>.
Ce type n&#8217;a qu&#8217;un seul attribut, <code>nativeElement</code> de type <code>T</code>, qui est une référence
à l&#8217;élément du DOM sous-jacent.</p>
</div>
<div class="paragraph">
<p>Cet exemple montre aussi une utilisation intéressante du cycle de vie avec
l&#8217;usage de la méthode <code>ngAfterViewInit</code>.
Cette méthode est appelée dès que la vue est créée,
ainsi nous sommes sûrs que l&#8217;élément qu&#8217;on attend sera effectivement présent.
Si tu essaies de faire la même chose dans <code>ngOnInit</code>,
cela ne fonctionnera pas.
Il y a aussi une autre méthode nommée <code>ngAfterViewChecked</code>,
qui est appelée à chaque fois que la vue est vérifiée (après chaque
détection de changement).</p>
</div>
<div class="paragraph">
<p>Si tu veux implémenter cette fonctionnalité de focus dans plusieurs
composants différents, tu pourrais créer une directive pour cela,
au lieu de dupliquer ce code dans chaque composant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[nsFocus]'
})
export class FocusDirective implements AfterViewInit {

  ngAfterViewInit(): void {
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette directive ne fait rien pour le moment,
mais elle serait utilisée comme suit dans un template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;input nsFocus&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette directive doit accéder à son élément hôte pour lui donner le focus.
C&#8217;est alors que <code>ElementRef</code> devient très intéressant,
puisqu&#8217;il peut être injecté dans notre directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[nsFocus]'
})
export class FocusDirective implements AfterViewInit {

  constructor(private element: ElementRef&lt;HTMLElement&gt;) { }

  ngAfterViewInit(): void {
    this.element.nativeElement.focus();
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et voilà&#160;: grâce à cette directive, nous donnerons le focus à son
élément hôte&#160;!</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Accéder directement au <code>nativeElement</code> comme dans ces exemples
ne fonctionnera pas si tu décides de faire tourner ton application sur une autre
plateforme qu&#8217;un navigateur, comme dans des Web Workers, ou sur le serveur.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Retournons à notre décorateur <code>ViewChild</code>&#160;:
il peut aussi accepter un <em>type</em> comme sélecteur.</p>
</div>
<div class="paragraph">
<p>Par exemple, dans le chapitre sur les formulaires,
on a vu que pour soumettre un formulaire avec la façon pilotée par le template,
on peut utiliser du binding bi-directionnel,
ou on peut obtenir une référence vers le formulaire et passer sa valeur
à la méthode submit&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;form (ngSubmit)="authenticate(form.value)" #form="ngForm"&gt;
  &lt;!-- ... --&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais on pourrait aussi utiliser <code>ViewChild</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-login',
  template: `
    &lt;form (ngSubmit)="authenticate()"&gt;
      &lt;!-- ... --&gt;
    &lt;/form&gt;
  `
})
export class LoginFormComponent {

  @ViewChild(NgForm) credentialsForm: NgForm;

  authenticate() {
    console.log(this.credentialsForm.value);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le truc cool avec <code>ViewChild</code> c&#8217;est que c&#8217;est une requête dynamique&#160;:
il sera toujours à jour du template.
Si l&#8217;élément requêté est détruit,
l&#8217;attribut deviendra <code>undefined</code>.</p>
</div>
<div class="paragraph">
<p>Ce décorateur a aussi un frère jumeau nommé <code>ViewChildren</code>.
À la différence de <code>ViewChild</code> qui permet d&#8217;obtenir la référence vers un seul
élément satisfaisant le sélecteur (le premier s&#8217;il y en a plusieurs),
<code>ViewChildren</code> permet d&#8217;obtenir une référence vers tous les éléments.
Il retourne une <code>QueryList</code>, un type avec quelques attributs bien pratiques&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>first</code> retourne le premier élément satisfaisant la requête&#160;;</p>
</li>
<li>
<p><code>last</code> retourne le dernier élément satisfaisant la requête&#160;;</p>
</li>
<li>
<p><code>length</code> retourne le nombre d&#8217;éléments satisfaisant la requête&#160;;</p>
</li>
<li>
<p><code>changes</code> retourne un observable qui émet la nouvelle <code>QueryList</code>
chaque fois qu&#8217;un élément satisfaisant la requête est ajouté, enlevé, ou déplacé.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Supposons que nous avons un <code>RaceComponent</code> affichant une collection de <code>PonyComponent</code>.
On peut facilement être notifié chaque fois qu&#8217;un <code>PonyComponent</code> est ajouté ou
supprimé&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-race',
  templateUrl: './race.component.html'
})
export class RaceComponent implements AfterViewInit {

  @Input() raceModel: RaceModel;

  @ViewChildren(PonyComponent) ponies: QueryList&lt;PonyComponent&gt;;

  ngAfterViewInit() {
    this.ponies.changes
    // this will log how many ponies are displayed in the component
      .subscribe(newList =&gt; console.log(newList.length));
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>QueryList</code> propose aussi plein d&#8217;autres méthodes comme
<code>toArray()</code>, <code>map()</code>, <code>filter()</code>, <code>find()</code>&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_contenu_content">22.2. Contenu&#160;: <code>Content</code></h3>
<div class="paragraph">
<p>Un autre besoin récurrent des développeurs est la capacité de construire des
composants graphiques dont le contenu serait dynamique.</p>
</div>
<div class="paragraph">
<p>Par exemple, supposons que tu veuilles construire
<a href="https://getbootstrap.com/docs/4.0/components/card/">un composant "carte"</a>
à l&#8217;aide du framework CSS Bootstrap 4.
Le template d&#8217;une telle carte ressemblerait à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div class="card"&gt;
  &lt;div class="card-body"&gt;
    &lt;h4 class="card-title"&gt;Card title&lt;/h4&gt;
    &lt;p class="card-text"&gt;Some quick example text&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tu pourrais évidemment dupliquer ce code HTML chaque fois que tu en as
besoin dans ton application.
Mais à ce point de la lecture, tu penses déjà probablement à créer
un composant.
Il y a deux parties dynamiques dans cette carte (le titre et le contenu),
alors tu arriverais probablement à quelque-chose comme&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">@Component({
  selector: 'ns-card',
  template: `&lt;div class="card"&gt;
    &lt;div class="card-body"&gt;
      &lt;h4 class="card-title"&gt;{{ title }}&lt;/h4&gt;
      &lt;p class="card-text"&gt;{{ text }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;`
})
export class CardComponent {

  @Input() title: string;
  @Input() text: string;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu l&#8217;utiliserais comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-card title="Card title" text="Some quick example text"&gt;&lt;/ns-card&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela fonctionne parfaitement.
Mais en regardant plus précisément le besoin,
tu te rends compte que le contenu de la carte peut aussi être du HTML complexe,
et pas seulement du texte, ce que supporte Bootstrap&#160;!</p>
</div>
<div class="paragraph">
<p>Heureusement, Angular va encore une fois te sauver la mise&#160;:
il est facile de "passer" du HTML à un composant enfant,
grâce à <code>&lt;ng-content&gt;</code>.
C&#8217;était ce qu&#8217;on appelait la <em>transclusion</em> en AngularJS 1.x.</p>
</div>
<div class="paragraph">
<p><code>ng-content</code> est un tag spécial que tu peux utiliser dans tes templates
pour inclure le HTML fourni par le composant parent&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div class="card"&gt;
  &lt;div class="card-body"&gt;
    &lt;h4 class="card-title"&gt;{{ title }}&lt;/h4&gt;
    &lt;p class="card-text"&gt;
      &lt;ng-content&gt;&lt;/ng-content&gt;
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et tu peux désormais utiliser ce composant comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-card title="Card title"&gt;
  Some quick &lt;strong&gt;example&lt;/strong&gt; text
&lt;/ns-card&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Plus tard, tu te rends compte que le titre peut aussi contenir du HTML.
Et bien sûr, il y a une solution pour passer plusieurs contenus au composant
carte, en utilisant plusieurs <code>ng-content</code> avec un sélecteur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div class="card"&gt;
  &lt;div class="card-body"&gt;
    &lt;h4 class="card-title"&gt;
      &lt;ng-content select=".title"&gt;&lt;/ng-content&gt;
    &lt;/h4&gt;
    &lt;p class="card-text"&gt;
      &lt;ng-content select=".content"&gt;&lt;/ng-content&gt;
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>et tu l&#8217;utiliseras comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-card&gt;
  &lt;p class="title"&gt;Card &lt;strong&gt;title&lt;/strong&gt;&lt;/p&gt;
  &lt;p class="content"&gt;Some quick &lt;strong&gt;example&lt;/strong&gt; text&lt;/p&gt;
&lt;/ns-card&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela produira le résultat suivant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div class="card"&gt;
  &lt;div class="card-body"&gt;
    &lt;h4 class="card-title"&gt;
      &lt;p class="title"&gt;Card &lt;strong&gt;title&lt;/strong&gt;&lt;/p&gt;
    &lt;/h4&gt;
    &lt;p class="card-text"&gt;
      &lt;p class="content"&gt;Some quick &lt;strong&gt;example&lt;/strong&gt; text&lt;/p&gt;
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_requêtes_de_contenu_contentchild">22.3. Requêtes de contenu&#160;: <code>ContentChild</code></h3>
<div class="paragraph">
<p>Quand tu utilises ces tags <code>ng-content</code>,
le contenu projeté ne sera pas requêtable par <code>ViewChild</code> ou <code>ViewChildren</code>.
Pour ces contenus, il te faut utiliser deux autres décorateurs&#160;:
<code>ContentChild</code> et <code>ContentChildren</code>.</p>
</div>
<div class="paragraph">
<p>Disons que tu es en train de créer un autre composant graphique en Bootstrap 4,
cette fois-ci <a href="https://getbootstrap.com/docs/4.0/components/navs/#tabs">un composant "onglet"</a>.
D&#8217;après la documentation, le HTML doit ressembler à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ul class="nav nav-tabs"&gt;
  &lt;li class="nav-item"&gt;
    &lt;a class="nav-link"&gt;Races&lt;/a&gt;
  &lt;/li&gt;
  &lt;li class="nav-item"&gt;
    &lt;a class="nav-link"&gt;About&lt;/a&gt;
  &lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais on voudrait proposer un composant plus agréable d&#8217;utilisation à notre équipe,
qui ressemblerait à&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-tabs&gt;
  &lt;ns-tab title="Races"&gt;&lt;/ns-tab&gt;
  &lt;ns-tab title="About"&gt;&lt;/ns-tab&gt;
&lt;ns-tabs&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On a aussi besoin d&#8217;un composant <code>Tabs</code> englobant,
qui doit découvrir combien de directives <code>ns-tab</code> sont embarquées dans le
template du composant,
doit itérer sur chacune d&#8217;elles, et générer le balisage adéquat.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, commençons par créer une directive <code>TabDirective</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: 'ns-tab'
})
export class TabDirective {
  @Input() title: string;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette directive ne fait pas grand-chose&#160;:
elle n&#8217;a qu&#8217;une seule entrée pour le titre de l&#8217;onglet.
Note qu&#8217;on utilise un élément comme sélecteur&#160;: <code>ns-tab</code>.</p>
</div>
<div class="paragraph">
<p>Maintenant il nous faut construire le <code>TabsComponent</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">@Component({
  selector: 'ns-tabs',
  template: `
  &lt;ul class="nav nav-tabs"&gt;
    &lt;li class="nav-item" *ngFor="let tab of tabs"&gt;
      &lt;a class="nav-link"&gt;{{ tab.title }}&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;`
})
export class TabsComponent {
  @ContentChildren(TabDirective) tabs: QueryList&lt;TabDirective&gt;;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu le vois, le template itère sur un tableau d&#8217;onglets <code>tabs</code> et génère
un élément <code>li</code> pour chacun.
Mais d&#8217;où provient ce tableau <code>tabs</code>&#160;?
Comment le composant peut-il connaître les deux directives <code>ns-tab</code> imbriquées
dans le composant <code>ns-tabs</code>&#160;?
C&#8217;est ce que permet la directive <code>ContentChildren</code>.</p>
</div>
<div class="paragraph">
<p>Pour récupérer la liste des onglets,
on doit utiliser <code>ContentChildren</code>,
ici avec <code>TabDirective</code>.
Cela nous fournit une liste d&#8217;onglets, que l&#8217;ont peut parcourir avec un <code>NgFor</code>.
Chaque élément dans cette liste est une <code>TabDirective</code>,
on peut donc accéder à sa propriété <code>title</code>,
et afficher le titre de l&#8217;onglet&#160;!</p>
</div>
<div class="paragraph">
<p>Note que si, pour n&#8217;importe quelle raison,
tu avais un template comme celui-ci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ns-tabs&gt;
  &lt;div&gt;
    &lt;ns-tab title="Races"&gt;&lt;/ns-tab&gt;
  &lt;/div&gt;
  &lt;ns-tabgroup&gt;
    &lt;ns-tab title="About"&gt;&lt;/ns-tab&gt;
  &lt;/ns-tabgroup&gt;
&lt;ns-tabs&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>alors le <code>QueryList</code> dans <code>TabComponent</code> ne contiendrait que la première
<code>TabDirective</code>.
<code>ContentChild</code> et <code>ContentChildren</code> ne recherchent en effet que les descendants
directs, et stopperaient leur recherche sur le composant <code>ns-tabgroup</code>.</p>
</div>
<div class="paragraph">
<p>Si tu voulais que ton composant fonctionne malgré cela,
il te faudrait ajouter une option à ton décorateur&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-tabs',
  template: `
  &lt;ul class="nav nav-tabs"&gt;
    &lt;li class="nav-item" *ngFor="let tab of tabs"&gt;
      &lt;a class="nav-link"&gt;{{ tab.title }}&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;`
})
export class TabsWithDescendantsComponent {

  @ContentChildren(TabDirective, { descendants: true })
  tabs: QueryList&lt;TabDirective&gt;;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et maintenant, il trouverait de nouveau toutes les <code>TabDirective</code>&#160;!</p>
</div>
<div class="paragraph">
<p>Le champ <code>tabs</code> est une <code>QueryList</code>,
donc tu peux aussi t&#8217;abonner à ses changements,
comme on l&#8217;a vu pour <code>ViewChildren</code>.
Encore une fois, cette <code>QueryList</code> n&#8217;est pas accessible dans le constructeur du composant,
ni-même dans <code>ngOnInit</code>.
Pour être sûr que le contenu puisse être requêté (i.e. que la <code>QueryList</code> soit correctement peuplée)
tu dois utiliser la méthode <code>ngAfterContentInit</code> du cycle de vie.
Tu peux aussi utiliser <code>ngAfterContentChecked</code>, qui est appelée à chaque fois que la détection de changement
est lancée.</p>
</div>
</div>
<div class="sect2">
<h3 id="_à_lécoute_de_lhôte_hostlistener">22.4. À l&#8217;écoute de l&#8217;hôte&#160;: <code>HostListener</code></h3>
<div class="paragraph">
<p>Quand on écrit une directive,
on a souvent envie d&#8217;interagir avec l&#8217;élément hôte.</p>
</div>
<div class="paragraph">
<p>Prenons un exemple simple&#160;:
notre client voudrait rapidement vider le contenu de certains champs texte
en double-cliquant dessus.
C&#8217;est typiquement le genre de comportement que tu peux encapsuler dans une
directive custom, que nous appellerons <code>InputClearDirective</code>.
Son sélecteur sera un attribut, disons <code>nsInputClear</code>.
Quand cet attribut sera ajouté sur un élément,
on voudra écouter les double-clics sur cet élément hôte.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Cet exemple est certes simple, mais pas vraiment réaliste.
Une application plus réaliste (mais aussi plus complexe) de cette fonctionnalité
serait, par exemple, d&#8217;afficher une bulle d&#8217;aide (<em>tooltip</em>) quand un élément
est survolé ou cliqué.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Créons cette directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[nsInputClear]'
})
export class InputClearDirective {

  constructor(private element: ElementRef&lt;HTMLInputElement&gt;) {}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilisera notre directive comme cela&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;input nsInputClear&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il nous faut maintenant réagir à l&#8217;événement 'dblclick' sur notre élément
hôte (ici, le <code>&lt;input&gt;</code>) pour y vider sa valeur.</p>
</div>
<div class="paragraph">
<p>C&#8217;est là que nous pouvons utiliser le décorateur <code>HostListener</code>&#160;!
Ce décorateur peut être ajouté sur une méthode d&#8217;une directive,
pour indiquer au framework que cette méthode doit être appelée
si l&#8217;événement passé en paramètre au décorateur est déclenché sur l&#8217;élément
hôte.</p>
</div>
<div class="paragraph">
<p>Dans notre cas, nous pourrions écrire&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[nsInputClear]'
})
export class InputClearDirective {

  constructor(private element: ElementRef&lt;HTMLInputElement&gt;) {}

  @HostListener('dblclick')
  clearContent() {
    this.element.nativeElement.value = '';
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Désormais, chaque fois qu&#8217;un événement 'dblclick' est déclenché sur l&#8217;élément
hôte, la directive va vider la valeur de l&#8217;input.</p>
</div>
<div class="paragraph">
<p>Note qu&#8217;il est aussi possible de se mettre à l&#8217;écoute d&#8217;événements globaux,
comme <code>window:resize</code> par exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[nsWindowResize]'
})
export class WindowResizeDirective {

  @HostListener('window:resize', ['$event'])
  resize(event) {
    console.log(`The screen is being resized to ${event.target.innerWidth}`);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note également que tu peux accéder à l&#8217;événement dans la méthode,
en indiquant <code>['$event']</code> comme second paramètre du décorateur.</p>
</div>
</div>
<div class="sect2">
<h3 id="_binding_sur_lhôte_hostbinding">22.5. Binding sur l&#8217;hôte&#160;: <code>HostBinding</code></h3>
<div class="paragraph">
<p>Un autre décorateur disponible pour la création de directives et composants
avancés est <code>HostBinding</code>.
Alors que <code>HostListener</code> permet d&#8217;interagir avec les événements sur
l&#8217;élement hôte, <code>HostBinding</code> permet d&#8217;interagir avec ses propriétés.</p>
</div>
<div class="paragraph">
<p>Supposons qu&#8217;on veuille ajouter une classe CSS particulière (<code>is-required</code>)
à un input s&#8217;il fait l&#8217;objet d&#8217;une erreur de validation donnée (<code>required</code>).
Cette classe pourrait ajouter une jolie bordure autour du champ,
ou un petit astérisque, peu importe.
Cela ne validera en aucune façon la saisie, on se contentera de consommer
le résultat de la validation native de formulaires en Angular, et d&#8217;utiliser
ce résultat pour styler le champ.</p>
</div>
<div class="paragraph">
<p>C&#8217;est de nouveau un travail idéal pour une directive&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[nsAddClassIfRequired]'
})
export class AddClassIfRequiredDirective {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On pourra l&#8217;utiliser dans un formulaire Angular piloté par le code&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">&lt;input formControlName="firstName" nsAddClassIfRequired&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou dans un formulaire piloté par le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">&lt;input [(ngModel)]="user.name" required nsAddClassIfRequired&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il nous faut ensuite, dans cette directive, une référence à l&#8217;état du champ.
Angular valide automatiquement les champs,
et ajoute l&#8217;erreur <code>required</code> si un champ est requis mais vide.
Le puissant système d&#8217;injection de dépendances va encore une fois pouvoir
nous aider&#160;!
On peut en effet demander à Angular d&#8217;injecter dans une directive une autre
directive appliquée au même hôte, ou à un des ses ascendants.</p>
</div>
<div class="paragraph">
<p>Comme nous voulons que notre directive fonctionne avec <code>FormControlName</code> ou <code>NgModel</code>,
on pourrait demander à Angular de nous injecter les deux.
Mais ces injections ne fonctionneraient pas, car seulement une seule des deux
serait disponible (on utilise généralement soit l&#8217;une, soit l&#8217;autre,
sur un input donné),
et Angular lève une erreur si une dépendance ne peut être injectée.
Il existe une astuce qui permet de demander à Angular de continuer même si une
dépendance s&#8217;avère manquante&#160;: le décorateur <code>Optional</code>.</p>
</div>
<div class="paragraph">
<p>Ainsi, un tel code pourrait fonctionner&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">constructor(
  @Optional() private formControl: FormControlName,
  @Optional() private ngModel: NgModel
) {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais on peut faire mieux.
En fait, ces deux directives héritent de la même classe de base&#160;: <code>NgControl</code>.
Alors, au lieu d&#8217;injecter l&#8217;une ou l&#8217;autre, on peut lui demander de nous fournir
le <code>NgControl</code> commun&#160;!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[nsAddClassIfRequired]'
})
export class AddClassIfRequiredDirective {

  constructor(private control: NgControl) {}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maintenant qu&#8217;on a une référence au <code>NgControl</code>,
il est facile de savoir si le champ présente l&#8217;erreur <code>required</code>,
en utilisant sa méthode <code>hasError()</code>.
La dernière étape est d&#8217;ajouter la classe <code>is-required</code> à l&#8217;élément hôte si
c&#8217;est le cas.
C&#8217;est alors que le décorateur <code>HostBinding</code> entre en scène&#160;!
Ce décorateur permet de binder une propriété de l&#8217;élément hôte sur un attribut
de notre directive.
On l&#8217;utilise généralement comme ceci&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@HostBinding('value') innerValue;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et cela mettrait à jour automatiquement la valeur de l&#8217;hôte lors de chaque
modification de la propriété <code>innerValue</code> de la directive.</p>
</div>
<div class="paragraph">
<p>Dans notre cas, nous n&#8217;avons pas de propriété sur laquelle se binder.
Mais on peut définir un accesseur qui retourne <code>true</code> ou <code>false</code>, selon
si le champ est en erreur, et décorer cet accesseur avec <code>HostBinding</code>
pour automatiquement ajouter ou enlever la classe <code>is-required</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Directive({
  selector: '[nsAddClassIfRequired]'
})
export class AddClassIfRequiredDirective {

  constructor(private control: NgControl) {}

  @HostBinding('class.is-required')
  get isRequired() {
    return this.control.hasError('required');
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces quelques lignes de code sont vraiment puissantes&#160;:
à chaque fois que cette directive sera utilisée dans un formulaire,
Angular ajoutera ou enlèvera automatiquement notre classe spécifique
selon la saisie utilisateur&#160;!</p>
</div>
<div class="paragraph">
<p>Cela peut être utilisé pour binder d&#8217;autres types de caractéristiques,
et pas uniquement des classes CSS.
Par exemple, certaines bibliothèques de composants l&#8217;utilisent pour ajouter
les attributs d&#8217;accessibilité (<code>aria.xxx</code>) à l&#8217;élément hôte.</p>
</div>
<div class="paragraph">
<p>Note que notre directive utilise un sélecteur spécifique.
Mais si tu veux l&#8217;appliquer absolument partout,
tu peux simplement changer son sélecteur pour <code>input</code>,
et tous les champs de ton application en bénéficieront.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="internationalisation">23. Internationalisation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>So you want to internationalize your application, huh?</em></p>
</div>
<div class="paragraph">
<p>Bon, ne te tracasse pas si ton niveau d&#8217;anglais est si bas que tu n&#8217;as pas pu comprendre
cette petite introduction. Ton rôle de développeur n&#8217;est pas de traduire ton application
en anglais, espagnol, ou quelque autre dialecte exotique. Ce que tu peux faire par contre,
c&#8217;est rendre cette traduction possible. Ce chapitre explique comment y arriver.</p>
</div>
<div class="sect2">
<h3 id="_la_locale">23.1. La <em>locale</em></h3>
<div class="paragraph">
<p>On a déjà évoqué l&#8217;internationalisation auparavant, dans le chapitre sur les <em>pipes</em>.
Quatre des <em>pipes</em> fournis par Angular concernent l&#8217;internationalisation.
Ces <em>pipes</em> sont les <em>pipes</em> <code>number</code>, <code>percent</code>, currency` et <code>date</code>.
Jusqu&#8217;à Angular&#160;5, ils utilisaient l&#8217;API JavaScript standard <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Intl"><em>Internationalization</em></a>,
censée être fournie par le navigateur.
Mais cette API n&#8217;étant pas toujours fournie par le navigateur et parfois source de de bugs et d&#8217;incohérences entre navigateurs,
ces <em>pipes</em> ont été complètement réécrits en Angular&#160;5.0.</p>
</div>
<div class="paragraph">
<p>Ce que nous ne savons pas encore, c&#8217;est comment ces <em>pipes</em> décident de formater les nombres et les dates.
Doivent-ils utiliser le point ou la virgule comme séparateur décimal&#160;? Doivent-ils utiliser <em>January</em> ou
<em>Janvier</em> pour désigner le premier mois de l&#8217;année&#160;? Tu pourrais penser que la décision est basée sur
la langue préférée configurée dans le navigateur. En réalité, ce n&#8217;est pas le cas. La décision est basée sur une
valeur injectable nommée <code>LOCALE_ID</code>. Et la valeur par défaut de <code>LOCALE_ID</code> est <code>'en-US'</code>.</p>
</div>
<div class="paragraph">
<p>Voici un exemple qui montre comment obtenir la valeur de <code>LOCALE_ID</code>. Comme tu peux le voir, il s&#8217;agit d&#8217;une simple
chaîne de caractères. Pour l&#8217;injecter dans tes composants ou services, tu ne peux pas compter sur son type (<code>string</code>).
Il est nécessaire d&#8217;indiquer à Angular le <em>token</em> qui identifie cette valeur, en utilisant <code>@Inject(LOCALE_ID)</code>.
Ceci peut être utile si la logique du composant ou du service dépend de la locale que l&#8217;application utilise.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-locale',
  template: `
    &lt;p&gt;The locale is {{ locale }}&lt;/p&gt;
    &lt;!-- will display 'en-US' --&gt;

    &lt;p&gt;{{ 1234.56 | number }}&lt;/p&gt;
    &lt;!-- will display '1,234.56' --&gt;
  `
})
class DefaultLocaleComponent {
  constructor(@Inject(LOCALE_ID) public locale: string) { }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tout ça est bien beau, mais comment peut-on faire pour <em>changer</em> la locale&#160;? En fait, on ne peut pas. La
locale est une constante, qu&#8217;on ne peut changer pendant l&#8217;exécution de l&#8217;application. Mais on peut en revanche
fournir une autre valeur que <code>'en-US'</code> <em>avant</em> que l&#8217;application ne démarre. Ceci est possible, simplement
en fournissant une autre valeur pour le token <code>LOCALE_ID</code>, dans le module Angular principal.
Attention cependant&#160;: il faut également faire en sorte que les données nécessaires à la locale
(les traduction des mois, les règles de formattage des nombres, etc.) soient livrées avec l&#8217;application.
En effet, Angular ne contient par défaut que les données de <code>en-US</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">import { registerLocaleData } from '@angular/common';
import localeFr from '@angular/common/locales/fr';

registerLocaleData(localeFr);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici un exemple, qui montre l&#8217;effet que cela produit sur notre composant&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@NgModule({
  imports: [BrowserModule],
  declarations: [CustomLocaleComponent], // and other components
  providers: [
    { provide: LOCALE_ID, useValue: 'fr-FR' }
  ]
  // ...
})
export class AppModule { }

@Component({
  selector: 'ns-locale',
  template: `
    &lt;p&gt;The locale is {{ locale }}&lt;/p&gt;
    &lt;!-- will display 'fr-FR' --&gt;

    &lt;p&gt;{{ 1234.56 | number }}&lt;/p&gt;
    &lt;!-- will display '1 234,56' --&gt;
  `
})
class CustomLocaleComponent {
  constructor(@Inject(LOCALE_ID) public locale: string) { }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tous les <em>pipes</em> qui gèrent l&#8217;internationalisation peuvent aussi prendre comme dernier paramètre la locale.
Il est donc possible de la changer dynamiquement si besoin&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">@Component({
  selector: 'ns-locale',
  template: `
    &lt;p&gt;The locale is {{ locale }}&lt;/p&gt;
    &lt;!-- will display 'en-US' --&gt;

    &lt;p&gt;{{ 1234.56 | number:'1.0-3':'fr-FR' }}&lt;/p&gt;
    &lt;!-- will display '1 234,56' --&gt;
  `
})
class DefaultLocaleOverriddenComponent {
  constructor(@Inject(LOCALE_ID) public locale: string) { }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si tu veux créer une application entièrement francophone (par exemple), c&#8217;est tout ce dont tu as
besoin. Mais bien souvent, les utilisateurs de ton application parlent diverses langues, et il faut donc aller plus loin,
et réellement internationaliser l&#8217;application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_traduire_du_texte">23.2. Traduire du texte</h3>
<div class="paragraph">
<p>Si tu as utilisé AngularJS 1.x pour construire une application internationalisée, tu sais qu&#8217;AngularJS ne propose
pas de solution pour afficher du texte traduit dans la langue de préférence de l&#8217;utilisateur.</p>
</div>
<div class="paragraph">
<p>Ce manque est comblé pas des librairies externes au framework, dont l&#8217;une, très populaire, est
<a href="https://angular-translate.github.io/">angular-translate</a>. La stratégie qu&#8217;elle utilise est assez commune&#160;:
le template HTML contient des clés (comme par exemple <code>'home.welcome'</code>), qui sont traduites grâce à une directive
ou un filtre. Chaque clé identifie donc un message, et chaque message est traduit dans chacune des langues
que l&#8217;application supporte (par exemple&#160;: 'Welcome' et 'Bienvenue'). A l&#8217;exécution, la directive ou le filtre
utilise la langue préférée pour obtenir la traduction adéquate, et met à jour le DOM avec le message traduit.
Tu peux changer de langue préférée à l&#8217;exécution, et tous les messages de la page sont immédiatement traduits dans
cette nouvelle langue.</p>
</div>
<div class="paragraph">
<p>Avec Angular, l&#8217;internationalisation est à présent directement supportée, sans avoir à recourir à des librairies
externes (bien que cette fonctionnalité ne soit vraiment utilisable que depuis la version 4.0, et qu&#8217;il reste encore
du chemin à parcourir). Angular utilise la même stratégie basée sur des clés, mais avec une différence importante&#160;:
le remplacement des clés par les messages traduits est effectué pendant la phase de compilation plutôt qu&#8217;à l&#8217;exécution.
Lorsque l&#8217;application démarre, ou, si tu utilises la compilation <em>AOT</em>, lorsque tu construis l&#8217;application,
Angular analyse les templates HTML de tous les composants, et les compile en code JavaScript qui, essentiellement,
analyse les changements dans le modèle et modifie le DOM en conséquence. C&#8217;est pendant cette phase de compilation
du HTML en JavaScript que la traduction est réalisée. Cela a des conséquences importantes&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on ne peut pas changer la locale (et donc le texte affiché dans l&#8217;application) pendant l&#8217;exécution. L&#8217;application
entière doit être rechargée et redémarrée pour changer de langue&#160;;</p>
</li>
<li>
<p>une fois démarrée, l&#8217;application est plus rapide, parce qu&#8217;elle ne doit pas traduire les clés encore et encore&#160;;</p>
</li>
<li>
<p>si tu utilises la compilation <em>AOT</em> (et tu devrais, au moins en production), tu dois construire et servir autant
de versions de l&#8217;application que de locales supportées.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_processus_et_outillage">23.3. Processus et outillage</h3>
<div class="paragraph">
<p>Dans la suite de ce chapitre, nous supposerons que tu utilises Angular CLI pour construire ton application.
Les outils sont en fait utilisables sans Angular CLI, parce qu&#8217;ils font partie de <code>ngc</code>, le compilateur Angular.
Mais comme ils sont bien intégrés et simples à utiliser dans Angular CLI, et que c&#8217;est l&#8217;outil recommandé pour
construire ton application, c&#8217;est ce que nous utiliserons.</p>
</div>
<div class="paragraph">
<p>Nous utiliserons aussi la compilation <em>AOT</em> pour construire et servir notre application internationalisée. C&#8217;est en effet
le moyen le plus simple d&#8217;y parvenir. Si tu veux tester l&#8217;internationalisation en mode <em>JIT</em> (i.e.
sans précompiler les templates), cela nécessite des modifications substantielles du code utilisé pour lancer
l&#8217;application. Réfère-toi à <a href="https://angular.io/docs/ts/latest/cookbook/i18n.html">l&#8217;internationalization cookbook</a>
de la documentation officielle pour plus de détails.</p>
</div>
<div class="paragraph">
<p>Enfin, nous supposerons que tu es en fait un parfait anglophone qui a écrit son application en anglais et qui
désire la traduire en français, langue que tu ne maîtrises que de façon parcellaire.</p>
</div>
<div class="paragraph">
<p>Cela étant dit, comment procède-t-on. Tu devrais à présent savoir comment écrire des composants et leurs templates.
Va-t-il falloir tous les réécrire pour les internationaliser&#160;? Heureusement non. La procédure est la suivante&#160;:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>tu marques les parties des templates qui doivent être traduites en utilisant un attribut <code>i18n</code>&#160;;</p>
</li>
<li>
<p>tu exécutes une commande permettant d&#8217;extraire ces parties marquées vers un fichier, par exemple <code>messages.xlf</code>.
Deux formats de fichiers, des standards de l&#8217;industrie basés sur XML, sont supportés&#160;;</p>
</li>
<li>
<p>tu demandes à un traducteur compétent de fournir une version traduite de ce fichier, par exemple <code>messages.fr.xlf</code>&#160;;</p>
</li>
<li>
<p>tu construis l&#8217;application en fournissant la locale (<code>'fr'</code> par exemple) et ce fichier contenant les traductions françaises.
(<code>messages.fr.xlf</code>). Le compilateur Angular et la CLI remplacent les parties marquées via l&#8217;attribut i18n par les
traductions trouvées dans le fichier, et configurent l&#8217;application avec le <code>LOCALE_ID</code> fourni.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Examinons ces différentes étapes en détail.</p>
</div>
<div class="sect3">
<h4 id="_marquer_le_texte_à_traduire_et_lextraire">23.3.1. Marquer le texte à traduire et l&#8217;extraire</h4>
<div class="paragraph">
<p>Commençons avec un template d&#8217;exemple&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h1&gt;Welcome to Ponyracer&lt;/h1&gt;
&lt;p&gt;Welcome to Ponyracer {{ user.firstName }} {{ user.lastName }}!&lt;/p&gt;
&lt;img src="/img/pony.gif" alt="running pony" title="Ponies are cool, aren't they?" /&gt;
Let's start playing.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cinq morceaux de texte doivent être traduits dans ce template. Bien sûr, on pourrait considérer tout le
template comme un seul long bloc à traduire. Mais dans un exemple plus réaliste, cela exposerait beaucoup de code HTML
aux traducteurs. Et devoir retraduire tout à chaque fois que la structure du HTML change n&#8217;est vraiment pas
acceptable. Il faut donc traduire les 5 morceaux séparément.</p>
</div>
<div class="paragraph">
<p>L&#8217;un d&#8217;eux, le contenu de l&#8217;élément <code>h1</code>, est du texte purement statique. L&#8217;un d&#8217;eux est du texte contenant
deux expressions interpolées. Deux d&#8217;entre eux sont des attributs d&#8217;un élément HTML. Le dernier est du texte statique
qui n&#8217;est contenu dans aucun élément.</p>
</div>
<div class="paragraph">
<p>Voici comment les marquer. Commençons avec le plus simple, le premier&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h1 i18n&gt;Welcome to Ponyracer&lt;/h1&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A présent qu&#8217;on a ajouté l&#8217;attribut <code>i18n</code> sur l&#8217;élément, utilisons la commande <code>xi18n</code> fournie par Angular CLI&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">ng xi18n --output-path locale/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela va générer un fichier <code>messages.xlf</code> dans le répertoire <code>src/locale</code>. Voici ce qu&#8217;il contient&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2"&gt;
  &lt;file source-language="en" datatype="plaintext" original="ng2.template"&gt;
    &lt;body&gt;
      &lt;trans-unit id="5e3335d7f1a430ef14a91507531838c57138b7f2" datatype="html"&gt;
        &lt;source&gt;Welcome to Ponyracer&lt;/source&gt;
        &lt;context-group purpose="location"&gt;
          &lt;context context-type="sourcefile"&gt;app/app.component.ts&lt;/context&gt;
          &lt;context context-type="linenumber"&gt;2&lt;/context&gt;
        &lt;/context-group&gt;
      &lt;/trans-unit&gt;
    &lt;/body&gt;
  &lt;/file&gt;
&lt;/xliff&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, cela génère une <code>trans-unit</code> contenant, comme valeur source, notre texte statique.
Le rôle du traducteur francophone est de fournir un fichier <code>messages.fr.xlf</code> qui ressemble à ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2"&gt;
  &lt;file source-language="en" datatype="plaintext" original="ng2.template" target-language="fr"&gt;
    &lt;body&gt;
      &lt;trans-unit id="5e3335d7f1a430ef14a91507531838c57138b7f2" datatype="html"&gt;
        &lt;source&gt;Welcome to Ponyracer&lt;/source&gt;
        &lt;target&gt;Bienvenue dans Ponyracer&lt;/target&gt;
      &lt;/trans-unit&gt;
    &lt;/body&gt;
  &lt;/file&gt;
&lt;/xliff&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela est relativement simple, parce que le message source est facile à comprendre. Il n&#8217;y a pas besoin de beaucoup
d&#8217;informations contextuelles supplémentaires pour comprendre de quoi il s&#8217;agit, et comment traduire ce message.
Néanmoins, cette façon de faire a un gros inconvénient. Si tu changes le code source du template pour y ajouter
des sauts de lignes insignifiants par exemple, ou un point à la fin du titre, voici ce qui se produit lorsqu&#8217;on extrait
à nouveau les messages&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h1 i18n&gt;
  Welcome to Ponyracer.
&lt;/h1&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">      &lt;trans-unit id="6e37e34598c734b3649ba478cac5f2d29e67c331" datatype="html"&gt;
        &lt;source&gt;
  Welcome to Ponyracer.
&lt;/source&gt;
        &lt;context-group purpose="location"&gt;
          &lt;context context-type="sourcefile"&gt;app/app.component.ts&lt;/context&gt;
          &lt;context context-type="linenumber"&gt;5&lt;/context&gt;
        &lt;/context-group&gt;
      &lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Non seulement le nouveau message source a changé, reflétant la nouvelle valeur dans le template, ce qui est normal.
Mais l&#8217;identifiant du message a aussi changé. Cela rend la maintenance des traductions plus pénible et complexe
que nécessaire. Heureusement, il y a un meilleur moyen. Tu peux fournir l&#8217;identifiant unique du message de manière
explicite&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h1 i18n="@@home.title"&gt;Welcome to Ponyracer&lt;/h1&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>qui produit&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;trans-unit id="home.title" datatype="html"&gt;
  &lt;source&gt;Welcome to Ponyracer&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;app/app.component.ts&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;10&lt;/context&gt;
  &lt;/context-group&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>En fait, afin de fournir plus de contexte aux traducteurs, tu peux même aller plus loin et indiquer une signification
et une description en plus de l&#8217;identifiant du message&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;h1 i18n="welcome title|the title of the home page@@home.fullTitle"&gt;Welcome to Ponyracer&lt;/h1&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;trans-unit id="home.fullTitle" datatype="html"&gt;
  &lt;source&gt;Welcome to Ponyracer&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;app/app.component.ts&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;13&lt;/context&gt;
  &lt;/context-group&gt;
  &lt;note priority="1" from="description"&gt;the title of the home page&lt;/note&gt;
  &lt;note priority="1" from="meaning"&gt;welcome title&lt;/note&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Passons à présent au second morceau de texte&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p i18n="@@home.welcome"&gt;Welcome to Ponyracer {{ user.firstName }} {{ user.lastName }}!&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici ce que l&#8217;extraction produit pour ce message&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;trans-unit id="home.welcome" datatype="html"&gt;
  &lt;source&gt;Welcome to Ponyracer &lt;x id="INTERPOLATION" equiv-text="{{ user.firstName }}"/&gt; &lt;x id="INTERPOLATION_1" equiv-text="{{ user.lastName }}"/&gt;!&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;app/app.component.ts&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;16&lt;/context&gt;
  &lt;/context-group&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme tu peux le voir, ce format a des caractéristiques intéressantes&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le traducteur n&#8217;est pas confronté aux expressions interpolées. Il ne peut pas malencontreusement traduire le contenu
des expressions, qui doivent rester telles quelles, puisqu&#8217;elles sont clairement indiquées&#160;;</p>
</li>
<li>
<p>en revanche, si ce que ces deux expressions représentent est clair pour les développeurs, cela peut ne pas l&#8217;être pour les traducteurs. Dans ce cas, ce serait donc une
bonne idée d&#8217;expliquer cela dans la description du message&#160;;</p>
</li>
<li>
<p>si, dans certaines langues, le nom de famille doit venir avant le prénom, le traducteur est libre de réordonner
les deux interpolations&#160;;</p>
</li>
<li>
<p>si le développeur choisit de renommer l&#8217;attribut <code>user</code> du composant, ou les attributs <code>firstName</code> et <code>lastName</code>
de l&#8217;utilisateur, le message extrait reste identique (à part les indications des interpolations), et rien ne doit être re-traduit.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Passons maintenant aux deux attributs de l&#8217;élément <code>img</code>. La syntaxe pour traduire des attributs est la suivante&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;img src="/img/pony.gif"
     alt="running pony" i18n-alt="@@home.ponyImage.alt"
     title="Ponies are cool, aren't they?" i18n-title="@@home.ponyImage.title"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela génère les <code>trans-unit</code> suivantes&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;trans-unit id="home.ponyImage.alt" datatype="html"&gt;
  &lt;source&gt;running pony&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;app/app.component.ts&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;20&lt;/context&gt;
  &lt;/context-group&gt;
&lt;/trans-unit&gt;
&lt;trans-unit id="home.ponyImage.title" datatype="html"&gt;
  &lt;source&gt;Ponies are cool, aren&amp;apos;t they?&lt;/source&gt;
  &lt;context-group purpose="location"&gt;
    &lt;context context-type="sourcefile"&gt;app/app.component.ts&lt;/context&gt;
    &lt;context context-type="linenumber"&gt;21&lt;/context&gt;
  &lt;/context-group&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, comment traduire le dernier morceau de texte&#160;? Il n&#8217;y a aucun élément qui puisse porter l&#8217;attribut
<code>i18n</code>. Une solution est possible&#160;: utiliser un élément <code>ng-container</code>, qui ne fera
pas partie du HTML généré par le template&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;ng-container i18n="@@home.startMessage"&gt;Let's start playing.&lt;/ng-container&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_traduire_construire_et_servir_lapplication">23.3.2. Traduire, construire et servir l&#8217;application</h4>
<div class="paragraph">
<p>Maintenant que le fichier <code>messages.xlf</code> est extrait et contient tous les messages à traduire,
quelqu&#8217;un doit s&#8217;en charger.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Attention</div>
</td>
<td class="content">
Une erreur classique est de simplement remplacer le message source dans le fichier par sa traduction.
Cela ne fonctionnera pas. Les traductions doivent être saisies dans l&#8217;élément <code>&lt;target&gt;</code> de chaque élément <code>trans-unit</code>.
Le contenu de l&#8217;élément <code>&lt;source&gt;</code> doit être conservé tel quel&#160;: il fournit le message original qui doit être
traduit. Voici un exemple de message correctement traduit&#160;:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;trans-unit id="home.welcome" datatype="html"&gt;
  &lt;source&gt;Welcome to Ponyracer &lt;x id="INTERPOLATION" equiv-text="{{ user.firstName }}"/&gt; &lt;x id="INTERPOLATION_1" equiv-text="{{ user.lastName }}"/&gt;!&lt;/source&gt;
  &lt;target&gt;Bienvenue dans Ponyracer &lt;x id="INTERPOLATION" equiv-text="{{ user.firstName }}"/&gt; &lt;x id="INTERPOLATION_1" equiv-text="{{ user.lastName }}"/&gt;&amp;nbsp;!&lt;/target&gt;
&lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour exécuter ou construire l&#8217;application en français, tu dois indiquer la locale, ainsi que l&#8217;emplacement du fichier
de messages à utiliser, à la commande <code>ng serve</code> ou <code>ng build</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">ng build --aot --i18n-locale fr --i18n-file src/locale/messages.fr.xlf</code></pre>
</div>
</div>
<div class="paragraph">
<p>ou tu peux définir une <code>configuration</code> pour cette locale dans <code>angular.json</code>&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">"fr": {
  "aot": true,
  "i18nFile": "src/locale/messages.fr.xlf",
  "i18nLocale": "fr"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>et ensuite lancer&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">ng build --configuration=fr</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le compilateur AOT invoqué par ces commandes va localiser tous les morceaux de texte marqués par l&#8217;attribut <code>i18n</code>
dans les templates, trouver les traductions correspondantes dans le fichier XLF, et transformer le texte des templates
en texte traduit. Ensuite, il va transformer comme d&#8217;habitude ces templates HTML traduits en code JavaScript, et
construire le <em>bundle</em> de l&#8217;application.</p>
</div>
<div class="paragraph">
<p>Si tu veux supporter l&#8217;anglais, le français et l&#8217;espagnol, par exemple, il te faudra construire ton application trois
fois (une pour chaque langue), et déployer ces trois applications sur ton serveur web de production. Tu devras aussi
décider quelle application est servie à quel utilisateur. Cela peut être fait côté serveur, en détectant
la locale préférée dans le header de la requête HTTP et en servant la page <code>index.html</code> adéquate. Si l&#8217;utilisateur est
authentifié, sa langue préférée peut aussi être stockée avec le reste de ses informations dans la base de données.
Cette détection peut aussi être réalisée côté client, en servant les trois applications sur trois URLs différentes
(<code>ponyracer.com</code>, <code>ponyracer.fr</code> et <code>ponyracer.es</code>,
ou bien <code>ponyracer.com/en</code>, <code>ponyracer.com/fr</code> et <code>ponyracer.com/es</code>), et en redirigeant de <code>ponyracer.com</code> vers
l&#8217;une des trois URLs en fonction de la langue configurée dans le navigateur.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_traduire_les_messages_dans_le_code">23.4. Traduire les messages dans le code</h3>
<div class="paragraph">
<p>Parfois, le texte à traduire n&#8217;est pas dans les templates, mais dans le code TypeScript. Par exemple, les trois états
PENDING, RUNNING et FINISHED d&#8217;une course de poneys devraient être traduits d&#8217;une manière ou d&#8217;une autre.
Le plan actuel est de pouvoir utiliser quelque chose comme ça&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-javascript" data-lang="javascript">const RaceStatus = {
  PENDING: __('pending'),
  RUNNING: __('running'),
  FINISHED: __('finished')
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Malheureusement, cette fonctionnalité n&#8217;est pas encore implémentée. Une solution temporaire peut être, par exemple,
de charger des fichiers de traductions en JSON depuis le serveur, en se basant sur le LOCALE_ID pour télécharger
le fichier approprié.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pluralisation">23.5. Pluralisation</h3>
<div class="paragraph">
<p>Parfois, le message à afficher dépend du nombre d&#8217;éléments dans une collection, ou d&#8217;un nombre quelconque
stocké dans une propriété.</p>
</div>
<div class="paragraph">
<p>Par exemple, supposons que notre page d&#8217;accueil affiche le nombre de courses prévues pour la journée. On pourrait
simplement afficher <em>"Nombre de course(s) prévue(s)&#160;: 4"</em>. Mais la page serait plus accueillante si elle affichait
plutôt <em>"Aucune course n&#8217;est prévue"</em>, ou <em>"Seule une course est prévue"</em>, ou encore <em>"N courses sont prévues"</em>
dans les autres cas.</p>
</div>
<div class="paragraph">
<p>Angular, en fait, a une syntaxe spécifique pour faire cela. Elle est assez difficile à lire, sauf peut-être pour
les programmeurs LISP, mais elle fait le boulot et est relativement simple à comprendre à partir de l&#8217;exemple suivant.
Supposons que notre composant ait une propriété <code>racesPlanned</code>, contenant le nombre de courses prévues.
On peut l&#8217;afficher, en anglais, de la manière suivante&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p&gt;Hello, {racesPlanned, plural, =0 {no race is planned}
                                 =1 {only one race is planned}
                                 other {{{ racesPlanned }} races are planned}}.&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour internationaliser un tel message, on utilise l&#8217;attribut <code>i18n</code>, comme d&#8217;habitude&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;p i18n="@@home.racesPlanned"&gt;
  Hello, {racesPlanned, plural, =0 {no race is planned}
                                =1 {only one race is planned}
                                other {{{ racesPlanned }} races are planned}}.
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;extraction de ce message génère deux éléments <code>trans-unit</code>&#160;:
l&#8217;un pour le message lui-même, et l&#8217;autre pour l&#8217;expression contenue dans le message.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">      &lt;trans-unit id="home.racesPlanned" datatype="html"&gt;
        &lt;source&gt;
  Hello, &lt;x id="ICU" equiv-text="{racesPlanned, plural, =0 {...} =1 {...} other {...}}"/&gt;.
&lt;/source&gt;
        &lt;context-group purpose="location"&gt;
          &lt;context context-type="sourcefile"&gt;app/app.component.ts&lt;/context&gt;
          &lt;context context-type="linenumber"&gt;27&lt;/context&gt;
        &lt;/context-group&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id="963d1c0d7d9c63f9e7ba6c048709604b484b79ac" datatype="html"&gt;
        &lt;source&gt;{VAR_PLURAL, plural, =0 {no race is planned} =1 {only one race is planned} other {&lt;x id="INTERPOLATION" equiv-text="{{ racesPlanned }}"/&gt; races are planned} }&lt;/source&gt;
        &lt;context-group purpose="location"&gt;
          &lt;context context-type="sourcefile"&gt;app/app.component.ts&lt;/context&gt;
          &lt;context context-type="linenumber"&gt;28&lt;/context&gt;
        &lt;/context-group&gt;
      &lt;/trans-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Malheureusement, la deuxième <code>trans-unit</code> a un identifiant auto-généré,
et la syntaxe de pluralisation doit être comprise et respectée par le traducteur.
Il est possible de traduire ces deux <code>trans-unit</code>, cependant, et la traduction fonctionne correctement&#160;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">      &lt;trans-unit id="home.racesPlanned" datatype="html"&gt;
        &lt;source&gt;
  Hello, &lt;x id="ICU" equiv-text="{racesPlanned, plural, =0 {...} =1 {...} other {...}}"/&gt;..
&lt;/source&gt;
        &lt;target&gt;Bonjour, &lt;x id="ICU" equiv-text="{racesPlanned, plural, =0 {...} =1 {...} other {...}}"/&gt;.&lt;/target&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id="963d1c0d7d9c63f9e7ba6c048709604b484b79ac" datatype="html"&gt;
        &lt;source&gt;{VAR_PLURAL, plural, =0 {no race is planned} =1 {only one race is planned} other {&lt;x id="INTERPOLATION" equiv-text="{{ racesPlanned }}"/&gt; races are planned} }&lt;/source&gt;
        &lt;target&gt;{VAR_PLURAL, plural, =0 {aucune course n'est planifiée} =1 {seule une course est planifiée} other {&lt;x id="INTERPOLATION" equiv-text="{{ racesPlanned }}"/&gt; courses sont planifiées} }&lt;/target&gt;
      &lt;/trans-unit&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bonnes_pratiques">23.6. Bonnes pratiques</h3>
<div class="paragraph">
<p>Ces bonnes pratiques, acquises par des années d&#8217;expérience de développement d&#8217;applications internationalisées,
ne sont pas nécessairement liées à Angular, mais à l&#8217;internationalisation en général.</p>
</div>
<div class="paragraph">
<p>Spécifie toujours un identifiant unique, de manière explicite, pour les messages. Si tu choisis un identifiant clair,
qui a du sens, il est souvent inutile de fournir une description pour le message, parce que l&#8217;identifiant est suffisant.
Préfixer les identifiants avec le nom du composant dans lequel ils sont utilisés (comme je l&#8217;ai fait dans tous les
exemples précédents avec le préfixe <code>home.</code> permet de savoir où ils sont utilisés, et de les retrouver rapidement
dans le code. Compter sur des identifiants auto-générés ne permet pas d&#8217;avoir des traductions différentes pour deux
messages identiques utilisés dans deux contextes différents. Faire la différence entre les messages d&#8217;une précédente
version de l&#8217;application et la version actuelle est aussi bien plus difficile.</p>
</div>
<div class="paragraph">
<p>Même si les traducteurs ne sont pas toujours des développeurs, stocke les fichiers de messages dans ton système de
gestion des sources (Git, etc.). Cela permet à chaque branche d&#8217;avoir ses propres modifications dans les fichiers de
messages, qui peuvent n&#8217;être intégrées dans la branche principale que lorsque la branche est prête. Cela rend aussi
la comparaison entre branches ou releases plus aisée.</p>
</div>
<div class="paragraph">
<p>La duplication n&#8217;est pas nécessairement une mauvaise chose. Tu pourrais penser que deux pages partageant un même
libellé "Enregistrer" ou "OK" devraient utiliser le même identifiant de message. Mais peut-être devront-ils être
renommés respectivement "OK, je vais le faire" et "OK, j&#8217;accepte". Ou peut-être ces termes assez vagues nécessitent-ils
d&#8217;être différenciés dans certaines langues étrangères. Il est d&#8217;autant plus important d&#8217;utiliser des identifiants
distincts lorsqu&#8217;un même mot est utilisé, mais avec des significations différentes. Par exemple, "Valider" peut
vouloir dire "vérifier la cohérence des données" mais aussi "accepter la proposition". Ce même mot serait
traduit en anglais par "Validate" dans le premier cas, et "Accept" dans le deuxième.</p>
</div>
<div class="paragraph">
<p>Ne confond pas <em>langue</em> et <em>pays</em>. N&#8217;utilise pas des drapeaux de pays pour représenter une langue. Certaines
langues sont parlées dans de nombreux pays (comme le français ou l&#8217;anglais), et certains pays utilisent plusieurs
langues (comme la Belgique, qui utilise le français, le néerlandais et l&#8217;allemand).</p>
</div>
<div class="paragraph">
<p>Évite d&#8217;utiliser la concaténation pour traduire des messages paramétrés. Par exemple, pour traduire <em>"Bonjour, je
m&#8217;appelle X et j&#8217;ai Y ans"</em>, n&#8217;utilise pas une première clé pour <em>"</em>"Bonjour, je m&#8217;appelle "<em>, une seconde clé pour
_" et j&#8217;ai "</em> et une troisième pour <em>" ans"</em>. Utilise une clé unique, contenant des expressions interpolées.</p>
</div>
<div class="paragraph">
<p>Tu devrais à présent être prêt à conquérir le monde avec ta splendide application multilingue.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ending">24. Ce n&#8217;est qu&#8217;un au revoir</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Merci d&#8217;avoir lu ce livre&#160;!</p>
</div>
<div class="paragraph">
<p>Quelques chapitres seront ajoutés dans des versions ultérieures&#160;:
l&#8217;utilisation du routeur (qui n&#8217;était pas finalisé pour cette première version),
des sujets avancés, et d&#8217;autres surprises.
Ils ont encore besoin d&#8217;être fignolés, mais je pense que tu les apprécieras.
Et bien sûr, nous tiendrons à jour ce contenu avec les nouvelles versions du framework,
pour que tu ne rates pas les nouvelles fonctionnalités à venir.
Et toutes ces révisions du livres seront gratuites, bien évidemment&#160;!</p>
</div>
<div class="paragraph">
<p>Si tu as aimé cette lecture, parles-en à tes amis&#160;!</p>
</div>
<div class="paragraph">
<p>Et si tu ne l&#8217;as pas déjà, sache qu&#8217;on propose une version "pro" de cet ebook.
Cette version donne accès à toute une série d&#8217;exercices
qui permettent de construire un projet complet pas à pas, en partant de zéro.
Pour chaque étape on fournit les tests unitaires nécessaires à une couverture de code de 100%,
des instructions détaillées (qui ne sont pas un simple copier/coller, elles te feront réfléchir et comprendre ce que tu utilises)
et une solution (qui sans trop se vanter est probablement la plus élégante, ou en tout cas celle conforme à l&#8217;état de l&#8217;art).
Un outil maison calcule ton score pour l&#8217;exercice, et ta progression est visible sur un tableau de bord.
Si tu cherches des exemples de code concrets, toujours à jour,
qui peuvent te faire gagner des heures de développement,
cette version pro est là pour toi{nbs)}!
Tu peux même <a href="https://angular-exercises.ninja-squad.com">essayer gratuitement les premiers exercices</a>, pour te faire une idée concrète.
Et vu que tu es déjà le possesseur de cet ebook, on te remercie de ton soutien historique
avec un généreux code de réduction pour le pack pro que tu peux aller chercher <a href="https://books.ninja-squad.com/discount">à cette adresse</a>.</p>
</div>
<div class="paragraph">
<p>On a essayé de te donner toutes les clés,
mais l&#8217;apprentissage du web se passe souvent comme ça&#160;:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="http://oktop.tumblr.com/post/15352780846"><img src="data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAK8AYUDASIAAhEBAxEB/8QAHQABAAIDAQEBAQAAAAAAAAAAAAYHBAUIAwIBCf/EAFoQAAEDBAADAwgGBQYKBggHAQIAAwQBBQYSBxEiEyEyCBQxQUJSYoIVI1FhcpIWcYGRoiQzlqGywjRDU1djc6Oxs9IXJYOTwdE1N0RkdeHi8EdUVXbD0/Hy/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAIBA//EABwRAQEBAQEBAQEBAAAAAAAAAAACEiJCMgNiUv/aAAwDAQACEQMRAD8A7LREQEREBERAREQEREBERAREQEREBERARebhi22RuFQRGnOta+ii+WXW3WgdacEwMeYmJc6Vp9qD2REQEREBFiXCZFt8J6dMfbYjMATjrp11EBHxVqsawXm1X+0s3Wyz2J8J+mzTzJ7CX/39iDaIiICL59Hetd9PWPtux+mLf2vuedBt+7mg2aKLcScvgYPiEvI58d+QzHqA9kzy2MiKgjQefd61GeGXGvDs8mUtcU5VtuhCVQiTRESd5enQhqQl+HxfcmTSz0WNMkx4UV2VKfBmOyFTccMtRAR9Na1X5AlxZsVuXBkMSY7o7A8y5QwOn2iQ+lBlIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiIC464k5/kuM+UndJkO8Shix5kdl2KLpdk6wIBsBB4faLq8S7FXA/HzZ7jflDZF4p4h/AC6fmmnRflQZ1brfwznWez32AdznmEY2GJQk6LJfzhaiWw01pr8yjPkrZS3Y+DeU3C5yHDhWSSTwtbc9Q7IS0H7Ni/tKCcW+BrXDvAvp88hK5SPOmmCbCH2LY0Pbq8RF4v962PAiyTsi4F8RrPbQI5jxNdgFPE4YDv2fza6/Ms5yz00sHOOM2dXm9ZBjVzuTYQA84dhw3Ro1Ha9kRAuky5CXskRakrc8nzi1c+IUS4YxfH2Y18bikcedHbpSroeGrmnh3EipXu6S+xUz5P/E2Hw0cyGtxgSJNZjLdGmWx5F24EXSe3hp1lt7XT4Vv/JFtlxu/FibkwsdnEisvduYjyDd3wtj/ABFy+FVUslicLc+yjhRxFfxTLJr7trGXVme2/XYWDL0SGql4R7xrqPSQl7y+uPHFXJC4tvFjd9lwYdlLzeL2DvQ6ftmQ+ExqXT37dwqeeWFgLtwgRM4tMWrj8MfN7iLTfMiZ9hzp9wudK/CXwqkeBWMRsy4nWyzzm+2gmLrsrUvYEC9r8Wq3n6P5WDxL4wHmvAJiC+QR707cwjXNlnuF1oAI+0GnukVA6ftElOvIiJ2uDX4S59kN16Of+qDmueeKmBXjh5kx2e6kLzTuzsOSBdMhrbXbX2S94fe+HVdTeSFbig8HI8lxvsynzX5H6x20p/YU18k/S4kRFzdHMXlT8O8rlTLjnMW9g7ZmmAJ+CTptkxQB12EedRPb5f2qmOFHDO58R7pLg2l+2xKwwF185O3hItekREuZflXWvlRTfMuCF+L2nuwZH5nw/u81U/kORtrvlEz3WGGvzEZf3V0muXPPTXeUVOueD4Zi/CyHdn34zcLtp7x+KR1loH4KVE+n7h91QjM+HtxwTBMay2RcXGLtcZe7TbNdaxQ7PtALb3+7+ui6F8qDhjJzmxMXixtdrerWBUpH5/4UwXeQU+MfEP6yH2lzXlGRZ1xDullxi4MOPzoADEiwWmCaPbpEiMfe6R2Lp119lbJTqGI1J40eTqyxLk+Y3C5Rhobwj0ecNOekhH2CIO8fdJRvyVcQzvDrjkNuyKE9EtZaebUJ8TaJ4SLY2xpX0FQh6u7b5Vts+x7KsN8nNiwYe4+5c4LIUmOxOdHagVSJ8mvXz2r6urkvnyTb3mN2xG4NZVW5PtR3w8wlzQLd0CHvESLxiPLxfEo8q9LtREUqEREBERAREQEREBERAREQEREBERAREQEREBEXL/lc5XmNgy+1Q7VkMu22+RC7UWYp1AiMTLYjL2vZ6fQqmdJqnUCLmDhJ5R7vnDVo4hgAifKjd2ZDTX/XBT2fjH8vtLphl1t9oXmTE2zGhAYlzoVK+uiVOSa090VH8UPKCt2F5ZLxtrHJdxlRNaOuE+LIcyES6ekiLxD7K0+NeVDYp12Zi3zHZNniulqUsJVJAtU94x0EuX4dkzRqXRCLFiyWJcZuTGeB5l0BNt1othMa+itK09NFDOOGcSeH+EFfodubnPVkAxRt09Qptz6q/uUqT1FEOFOYxs7weDkTDQsG9sEhnbbsnRLkQ8/4qfcQqtPLHev0DDLLcrRPlwmGbhpJrGdJotiAtC2Hv5dJD81FWU6X0oLkXCvBMiyhvJLrYWnrk3USJzcqC7y8O4c9S/bRRryWs1mZfgTjF2muzLnbX+yeedLY3ALqAiL2vaH5VWHEfjNmWMcdLjFauIlZIEhqOUAmhqBNaiRl72/UXft7qZrRp0tlNhteS2OTZr3EblQZA6utlT9xUr6ip9qwsEwzHsJtBWvHIPmrJnu4VTqZmXvERelZ2N3u25HY4l9tEgZMGUG7TnKo7U/UXorz7lXnlCcV3+GzNoat0CPOnzzM6g84QiDQctvR7RVIRH5k/kSbJOGOA5HOO4XjFLe/Ld6nHxCrTh1+Ig1Iv2rf2Gx2iwWtu2WW3xoENrwssN0Aaff+v71i4Df/ANKMNtOQ9hSN5/GF6rW22la+rmt+pULV2uyWe2POv2202+E6/XZ048cGycr8VRp3raLAk3K3RpkeHKnxWJEkq0jtOu0Fx0qemgDXxfsQaHiBgWM53b2IeRwfOKRzqbDwHUHWi9epD9uvfRbnHLPbsfssWzWmP5vBiN9my3zqWo/rqtoiAiLDhzIs1ursKSxJbE6gRtHQ6UKniHu9aD4vNrt95tj9susNiZCkBo6w8OwGP6loeHuB43gsaXGxyEcYJbnavbukZfcOxdWo9Wv66rIvWaYvZcggWO63yJDuNwrWkdlw9d6/+HP1c/T6lJUBYvmkfzusukdrzio61d7Om/L7Oayl5uGIBUzKgiNOda19SD0Xzy5dwqqbr5QPDGBdHIB3qRJJquhPRojjrW33GNOr5VOsTyrHstt1Z2N3eNcY411Imi6gL7CGvUNf10TI3yItXfL3a7DbHLnerjGt8Nr+cekOUAf/APfuQbRFFsMzrEsxrJHG72xcDj8u3AKEBhQvXqVBLX71l5jlNhxK0Fc8iujVvjc9RI+dSMvdER6ir+pBvkVKS/KX4cNlyZC9yae81DoP9shU24bcSMW4gRpDmPynTei1Ht477ejobegtfWPxUTKdJqiIihERAREQEREBERAREQEREBERAXLnlv2tzz7Gbxu32Oj0aoc+rbYT2/V6V1GucvLhCv6P4y9T0UmPh+YBr/dVT9Jr5afC+H0fiX5NVvFgGRyC1uyhgP8AhKvJ0iqwZe6XP5S1Ja/yeOL7+KPsYDl7MhuMMzzeO87XU4BF09kYl6t+X4di9lTXyPb1GjcJr2c18WmLbcXXnXT8IN9kBEX9RKgOKecyeIGcVvQW6PD1MQig20PakAl0bl4jL+z4VX1yxLPK/geZ8ZHpI/8AttvYf+Ydg/uCojxO/wCj9sLO1g7EvtSii9c3nnyMRdMR+qES93q2IenqU88s7evEu1EY9X0K1t+LtXVVONwrY3kNpHLRnRLJKIXXXY4dZMbEOw/DsJCRD1dJa9S2flNfTsPyU6zi4JWek2h6i6+Efan+Ko6Wv7PSsXyvxGvBaVt6p0fl+dWhYGbWxYoDNmFgLYDAeaCx/N9ly6dfu5KmvLPuLbHDODb9w7WXcwrpz6iAAMiry/Fp+9RP0vyo/gNxYncOrvWNL3l45Ld2mR6dRMF4e1a+LXXYfaEfeXVHFS2w864OXdm2OszGpkDzuC6HeLhj9Y3Uf11Gn71x3BjWU+DVyffuEJu9he2jixyMe3NjstT1H3djEvkV/eRdlT1wxe54pLc2K0ui9F2L/Eu8+Y/KYl+dVU+kz/lWvkgZFS1cTvox0xGPd4pM9Xvj1h/eH5lD+PZ9pxnysv8A38qflER/urM4lWyVw242S/MdmhiTwnwSEv8AFEW4j8vUHyrT8TJrF/4m3q4QS2ZuM4nWiL3T8K31pi9vIsysnYN1w2Q71MF57DGvLwl0uD+/kXzVUR8tOZ23E+3xKeiPaQ/MTjhf3RVecM8ilYBxJg3V8HGyhSCYnM+1p4DH/wC/aFS/yuZLUvi2Mlg6Gy7aYpgdPCQl2hCSejy6i4FUoPB3FKU//TGv7KmqhHAmvPg9iv8A8Oa/sqbrkuRcK+Uze5l44z3lt93otphEi8u7QRES6fi3IiXdS/nlxYlfSHFLKJIlsJ3aQI/hEyEf7K6fmU6h8lTiHMy3FpVnvckpF2tJDTt3C5m+yXPUq/aQ61Gtf1K7FxB5Kl++huMUGM4ZUj3Ro4R+7sQ7B/EAj8y7fU1JLVZNEeuGN3KDGcJt+REdaaMK8iEiAqDWi5I8kHK5Nm4iDjjrpDBvLRBVsirqMgB2EvxEIkP5V2Yv5+YXJG08a7a+OrYRchEC9kRAX9S/hVSUsjy2YwhxEs8n/L2nT8jp/wDOrmw3PXGvJzjZvOLzuTCtRk7uX8681sHV+Ihp+ZUt5ZF6sl6yWwFZ7tBuDkWO+1JpGfF3siJwNaFr835Vn47M08iq+ALm1W5vYfh2ktFr/Gs8s9K8tmRcXsvv8m92W55JOnMEJu+YOHowJbaj2Q9Ij4unVXFwu4tyOJliufDrJahBvlwtz8eHcGegJBEBD1Up4T9rp6S1Lw+FeXkOAHmOUn/jO1i0L9WrqqG17Yl5Q7Ql4YWTE18hP6/2SVDD4YYdbMi4i/obkNzk2p6pux2jYbE9pDZdTZbeHwl+X4lLc+sN28n/AD20T8YyA5ZTGCMgeDQXQbIRq06Il1CW3i6dfZ8Kj3FSS7jXlAXu4RR0dhXvz0ORa7FsLv8AeWqzPJck4n5zSY9HOTPlkMeFDjiRCAbdIAPzERF+IkS7jwDKYeXYTbsnit1jsTGtzBwu9ohrUTEq/CQl3rjDifmN/wCK/EAGItH34pSewtFubLpEdtRLX3y8RF/dFdg8JcUriHDa041Kq24+0zWsrl3jVwyqR0/VzLkuZ79iOU8CuIDWXW61tXmzMOOebSCEqgAHQh0d5dQHQa+Lw/2VktpcHBXgXFwi4xciuN1fk3ujBAYMlowG3ip7x/N0/Con5coHWLiR0/mhcmUL8WrWv+4lZvCbjBi3EGlIsUyt95oNSct0guuoj4ibL0GP6ur3hFV75cQ8sZxkqenz92n+y/8Akk/TfKvuDHA5niDiv6Qu5KUFoZBxyZCHuWw6+1sPve6r64R8GLBw8uj11jXCdcLg61VsXXq0AQCvpEQH8I+LmuW+H/FvLcGxt6xY8UFpl6UUo3XmO1MSIRHUerXXpH2VLuHvGPjFe8whwIMn6eJ18e1h+ZtUpQPXzMBppTl7XNbU0yal2Si+R2IaVrTWvrovpcnQREQEREBERAREQEREBERAREQFQfltMifDq0P+tu7iP5mXf+VX4qt8o7Bbzn+ER7dY5DAS4cykkWXq6i9yAh129mvWqn6TTjy25Xc7fg9zxSGVWol0lA9KMS7zEBIdPwl0kX4RU88l/AHctzdq8zGv+p7MYvu1r6HX/EAf3i+H8S8cO4C53d8lj2+92p+yQOo5Mt2oFqIlqQhqRbEXs/mXYWG43Z8Sx6NY7FFpHhRx6aekjL2jKvtFX7VdUmZc1eW9GIMwx6Zr0vwDa2/A5t/fWfYMDY4leTDZvo5kP0gs1ZVIZ+Gp8nTrVgi90hKnzcvvW58tu1yH8ZsN2ZiuONQpDoPuCPS0JiOtS+weYUWX5EtxN/ALzbnP/ZbnuH4TaD+8JKfLfSCeT/xpbwuFTDcvYl+ZtyqNx3+XfC5lyJsxLv1Eu/4epbvy3W7e4xiswCE5TvnAgYnzEmvq6/h9NfEp5x14MQ88cZuln81tt7EtX5NQ6X2/jEfEQ+yXpVYeVfit/g2rEXhYfnWq0WukJ+YFNtXekdjH2RLUeRLZzo8opwv4H3vPMWHIot4gworhugAGBk4ZB3fqpTb2ua+PJjv7mL8ZYkOZsw1cd7ZJCvsOkXRt8W4CPzLp3yeLU/ZuDtghSor0ST2JuutOhqYkbhF1U+Zc/eU/w8udl4hHk2Pw5T0S5l52XmrREUaSPiLp94uvb3tk1rlmU58tDESmWO3ZnFa2dtxeazK0/wAiZdBV/Cfd865XEyExISISH2l/Qq3R3cs4cMRcotxMPXK30anxjoPOhkGp/d6e+n7FyJaOAvEe4X6TbCtIwWI5kHn0t0aNHqXiDXqLb4R/Ktmipe3lG2DsbhY84i0EoWTW5qQ6Q06RlC2O/wCYdS/Xuq6v14l3gbf54WxwoIQgL2iACLT8u2vyrtLiPw1auvBCmGQyJ+Ta4oHb3T7iJ5oen81Nh+ZcNlQgIhcEhIekhIdSEkmmU794C/8AqcxX/wCHApwoPwF1rwcxXXw/RwKcLlTrIv5ySpgxs5kXB+N52AXM3zZIte1+tIiH5l/Rtfz3xevZcYbfqXgyEB/LJ1XT83Omig3Z+1ZGxfLYHYPRZQyowEW2hCewj8Xur+jFok+eWuJM2CvbsA7sHh6hpXu+5cr+WfijkDLLfl8dovNbk0MWQQ+y8Hh/MH9hWz5LGVjknCuHDedrWbZi8yf5+5Tvar+TWny1Sup0Std7tOyPsqDVzl08/RzX847xGuD+VzokuMLFydnug6z4dHSMth/Mv6QrgXjvFds3GzJqN00Ok/zpv5xF3+0SfmU/OJfDC/8ADy3WqTf34fbXInRBmOZGTWmviLXX2/ZU+w1spXkdZe03QebN1F0vioJxiLb5VJPLKfG4YZhd1GndIcMqf9o0Bf8AgvryS7bHyLhRmONzv8HlySaP7hcYEdv4VuuTLF8huUNJ+VQfaJqK6P4RJ0f7yrPyigG28ecgdgn1jKYkCQ+yZNNEX8SyccuGWcBOIUs7pZ6uk5Hdit0OpAxLHxAYHr1U2Gha+LxD0rx4UY3euK3FcrhcBJ5kpnn12k66gI7bdn+IvCI+7+FPWmfy9PKfjk1xgnSnA7Mp8OLK1/E0IF/EBL3itZLwXu+PZpZXWLlZ73BadAzapqYmIkcY/FoY+yQ+L8wqZeW7bCZyXHLwIDQJEN2KRfEB7CP+1JTvgta7ZxH8m2Hjt4b2aa7WJvSnU0YGVWjH4hEhTXLc9LN4e5VaM1xiNkFne3Ye6TAvGydPE2fxD/8AP1qQOALoVAxEgKnIhrTnStFxtiF2yfyfeIkm2ZFCfkWed0u1Y8EoR8D7HPu3H2hr72peySnPFR7ifk8mNnHC/ILhcMdlxwBuLb3uzdjnTx7td2xc/wARU9CjKtI35U2CxsJyG15pitStQS5OtQjfV0jyh6hca18O1BLp94fiWJxxzUs74J4ZeJIiM4bi+zNoI6j2oNdRDT3SEqF8yiF6sPGPLZbUe9WfMLkbRFpSZHd7MC+HcdRW24wYjNwPhnhthuToFcJUqbOltgWwslUWAEBr7XIafv5q0Jv5IeHYvkmO3udf7JBuL0ecIMFIa30HsxL+8ulrTarZamas222w4Qe7HYFqn8K5K8nTixjPDvHLtDvUa5vvy5lHwpEaAqai2I95EY+6rNb8qLBydoJWPIhD3+yY/wD7VlTWlzUr4RQ7h1xExXO4r72O3AnnI+vbx3Wyada29HMa+r4qdymK5qEREBERAREQEREBERAREQEREBERAREQeLzTbrRtOtiYGPIgIedK0+xYVjstqscHzGz26Lb425H2MdoQDYq8y6RWzRAXwYiYVExpUa+mlV9ogJyREBERAVAcU/J1iZLkf0xjlyjWPzgjOa0bBO0Nwi23CglTl+pX+iayZaHBMfjYtiVsx6K6461AYo1Q3C2I6+sv381vkRAVYM8E+H7eaDlTVqfbmBIKVVjzgiYJ4urtNK+vbq7q8uas9EGnyjH7Lk1pra77bmrhCIxcJp3nrUh8Ne5fOL47ZsXtTdqsFuagwwKpUab9HOvpKta99VukQFzb5RHBfKsszksmxvzF9qQw02+y692ZiQd2/h5EOuvr27l0D9K26l7pY/PmPpKsfzmkXfr7LbXfl7u3ctiqmsn0508qHH5kLgJjoTnWn5VkkRmpLzY1EKj2RNVL82i1PkPXEaS8mtBF3k3Hkh8pGJf2hXTUlliSwbL7QOtHTkQGO1K/sWvsdgslho/9C2iDbvOD3dpFYFqhl71dU1zlOemVc7fAukQolygxpkcvE1IaEwr+wl52W0Wuyw/M7RbYdvj8+fZRWRaHn+oVsUUqaXJ8csmTWsrZfrXHuMUu/R4eetftGvpGv30XxiOMWTE7O3aLDb24UUa8+Q051IveIvSVfvqvcr9Yxu42U7xbxuhdQw6yQ7etPT4Oey2yDU5BYbNkFuK3Xy1xLlEKvOrMhoTHb7e/1r3stqt9mtbNstcRqJEYHRppoeQjRZ6ICq7jjwojcS4MN2lyct11gA4MVzTdoqHrtQ6eL2adVK933q0UQcu475LchyBvf8oGNMIi5txGO1AR/EVR/srbU8ley0Hry66c/gjNj/5roxFWqTmVUcIuC1k4d3yRd412uFwlutdg3V3UBAK151HUfF4R8Xuq10RSoREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQc2cbcrzXEuItyCz5NkDpnbmbjbbczBafjV+sIHQdppvQBENtttur8KlOZ3C928A4tYpKDIbRKsHm9xiMSC1bbHYxlR9vdIi3EurX71veKOCZDfcigZJiWQs2a7MwXra4chmrg1YdqJEQ8q9xjrzH1LZFgzNs4MS+H9ic58rO/CjOv1583HALrP8AWZbKkvTge5cHuEWLP3WU7Kmu2xo3X3S2M9h2Eq19fTyU3Wjwe1vWTC7HZpFWyfgW9iM6QV6dgbES5fdzot4pUKvuI+X3HCsls9zuFWf0SlgcSYevXFlF1NOEXuFqQfiIVYK0mY2C3ZRjc/H7s0TkOc1VpzSvIqfZUa+ohryKn30Qc75XxDziJ5N+G5F9OPt365XQqm+IiBOtAT5CJa0111ANveFT7jNndzj8GLLmuITasyJUyE61SmpC6J+Jo9vZ9RevuXhmvCpqXc+Gdkh2xy5WCxk6zcHJDg69gLY67t9wluY+yP8ACt3XhFazxCdiB3mcNkO7BcrdHboNSt+rgnVoCLbYN9/F4dlXKekfxzJYuS8b8OyiABttXfGJsV1k/Gw6w+BGBfEJEQq8VC7dw5xm38Q382hsSWrm+BiYUc+o3PXd2geoy1psXrU0U0Kn4oZnmls4hWzGcMg2yc79FSLrMjzKODV0AIREAMfCRdVKdJd/JQ9rjIzByO75BV2XLhXzHYE2w2siIiKURutEwA+otx6tfd2VmcQsFkZFdoV+smRSccv0SO7EGYwwD1DjueJswL76bDXn01Vc3Hg5dbHl2CUxG5T4zVutz8J+6UaaeKOY7GB1ad6dTI3RLXq8P4lU5G64mDxStnDZnLomVnButttjbl2t0WCw606Q12fMCMSqJCNa/D0KE5BOy+x5JDnQuJFxuDUPF3MiiHcSBqNdPrKbx6gGo8uy118RCRUJXpa7bkVww+ZZ8ykWx+ZIadjE/b2zFt1oh1odQP0F3948yFae08L8fd4d2LEctiQ8kGzsC0y9IY5d49Ow9XMe7lTlz9lNGVFcRbMNz4lNXay4y5eJWd46E21sk/Rh23TNW/rxd9WgiJdPvF7K6gxVm6MYzbGL4+2/dWojQTHQ8LjoiO5U+bmtVf8ACrXdr5i92Enob2Nvk5DGPyoFQJvQmqj7uvL0e6pYlUTIiIpUIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiLGlVeCM6TDQuvCBVbCpa0IvVTn6kGSiq39L+Mev/AKn4nP8A/czH/In6X8Yv8z8T+kzH/ImU6Wkiq39L+Mn+aCH/AElY/wCVP0u4y/5oYP8ASZn/AJEyaWkiqosu4z+zwgg/0kY/5V5Fl/G7n08ILf8A0iYRWltIqj/S7jh/mit39IGl+/pdxx/zRW3+kLKrKdLbRVJ+l3HH/NFbf6Qsp+l3HH/NFbf6Qspk0ttFUX6Xcc/80Vs/pC0v39LuOf8Amjtn9IWkyaW4iqP9LuOf+aO2f0haQMv44+1wgt37MiZTKtLcRVKOX8bva4QQf6RML6HMONftcH4P9JGP+VTlOlsIqp/TDjT/AJnYX9JGP+VfDmacZx//AAajF+rJGP8AlVZNLZRebRVJqhGOhVHnWn2L0UqEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQERYN2uEK0WyTc7jJbjQorROvvGXIWwHvIqoF2uMG0WyRcrnLYhw44bvPPHqAD9taqqbjL4g8TZAjiVwexDD/VdnGK+fXEfeZAupoPdItSr4vhWdj1ln8RLlHy7MIrzVjbco7Y7E9TlSg+zKkD7TpekQr3BT4layr5SryJwzONEAWuIWeecj6ZB3ftalX8BiQfwr9i3bIsPu8S35fcG7vZ57wxol57CjDrD5eBqQA9Gp16RcHXq1Eh6qErCWoyezw8gsM6yXBveNNZq05T1jQvap9hU9NK/bRSpt0UT4S3aXfOGuPXW4H2suRAaJ93/KHryI/m5bftUsQEREBERAREQEREBERAREQFiXGZFgQnZs6S1GjMhu688dAbClPWVa+he7hi2FXHCoIjTnWtfUqptURzizdvpy7UKuDwn/8Aqm318N1dAv8ACnqe01z8AegvEXsoPi6zst4pjSPh1wl4xiNalR291b1lXEfsjAXUDf8ApS1qXs93i2Vk4I8PbXDo0dsl3CT4jmy5rpSTL7dxIdfl1VkiIiNBGnKlPRRfSrRlWtyx6+YTHrdsQn3W7QI3XKsc6UcntWh9Pm7p8zB2g07hIiEvD016lOrJc4V6s8S7W2QMmHMaF5hyntCVOdFsFWHBG7A7OzXHK9gw5acjkUaiNO7iwy7q4PLpHpI6ulr7PePsqUrPRERQiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICrfiWFMoy+wcPx6oRl9L3ofejMOD2TRfc47r+wCVkKv7LRuPxzyUJVKDInWeA7CrX22mjfF2g/hMw2/GKJpYCIiKFA+Ld6kxLM3jFjKpZFkO8K3hT/EjUfrZJfYDQFt+LUfaWbmmZ2+wSWbSxHkXi/yh5xLVC5Vfc+M6+Fprn6XD5D+v0LHwLGrhFnS8qyd5qVk1zAW3aM97UJgS5jGZ29mniIvbLq+xEpLj9ri2WyW+ywh1iwIzcdka+oAGgj/uWyWBd7pbbREKXdLjEgRx9Lkl8Wg/MSh1eKdinO9lituveVuc9alaYREyJfe+5o1/GilgIqZLjvF+lZFuYwPK50mLXV8bY2zNo0Xu1Jpwh2+Hmt7C4xYu6xRy42zK7M562puPyuY/MAEP9aZTpZKKLYxxAwzJZNYtlyKDIl09MYnOzfp/2R8j/qUpRQiIgIiICIiAiIgr/jRKlO2ODiNsdcan5RMpbRcDxMx9SOQ78rQn8xCppbIUW326LbobIsxorYssNh4QAR1Gn7lCeIhhbeIeEZBM5Dbmn5UB16vhYdkgFGir7okQVDn7xirCQERRPMMytuNOsW6jMm6XuYNawrVDpvIf5e1r6ACnrMuQig/eIOXRsWs9XGg8/u8ghYttubL62U+deQDy931kXsiJVVeSsdk8MLbj+bk/SVJiOEzljwU/wlqU7u6/X7eydPanwbLMuOFZnLuQ8R3pcOmaQqfyC2t98MIvVzhkdabEblKls73anryHXxSKRnODXzh4U6/3SHbrdcmXYcqNcHRadA+oHWSAu/cS2HVUlPhISHahc6L6VGcKOJc93F2cWtWPXbKb1Z9orkgCCMwbAkQsPmbpCQ7gIl4Sr4llz+KmdBfXrLa+HkO/TY9dZTdsu5uhEL3HXSYFsT+HbmmTS6EVX2niHm3I/p7hBkcQh5a1gy40oS/MYcv61nDxUsUUueQ2jJMaa25dtdLW4DH7XQ2AfmJTlWlhIsK2XCBcoTcy2zo02MdOh6O6LgF+oh7lmoCIiAiIgIiICIiAiIgIiICIiAiIgIiICimd4zW/sw5sCcVtvlsdJ63TKBuIFUdSAw9tsx7iH8PrGilaIIGzkubwQ7G98Ppcx0O6sizT2HWHfipR82jH8NRr+Kq8SDiTlFajXzbBrcXd3EE24nT/AIDX+1r+FWEiCN4hiFlxZl6ttZdclyi3mTpLlXZUo/eddLqL9Xhp6qUURLJskz6W9CwN4LTYGnCak5I+xvV8hLkQRGi6T+ztS6fdoSlnFOY/A4Z5ROic+2j2eU63y94WirRe3D6BGtWB2G2w6CMePbmAb5e7Rse9EtNZuGGG2+SNwl2077c6em4Xpwpr9S96lXOYh8lBopn2TXYdh2Y9lrrrr3cvsXsiKYFnttus9vat9rgxoMRoeTTMdoQAP1DRZ6Ig0WTYvj+TRfNb9ZYVyb9nt2RIg+8S9I1+8VE52L3/ABJgrhhV0uVyjs97thuUopAPN+sWXT5uNOcvDzIgr6CH2lZKINLi19t2S2aPeLW+TsZ7nTkdNTaMS1Jsx9ImJcxIa+itFulXuP8AOycaL7aRpQIt9tzV3aCncPbtF2D9eXvVEo9aqwkBERAREQEREGqyO0wL9ZpVnukUJMKY0TLzZU586V/3V+yvqqooxB4kY9yiQJlqyu3hyoyV1fOJNEfdN0AMHfxaDX7dvErARBXz8HiTkL/Zz7pbsSt3PrbtZ+dzHfu7Z0BBr9gFVb3EMRsuNUdctsMqy5Vdpc6Q8T8qQX2m6fMi/Dz1p6lJEQVresgyTKr9cMXwZwbdEtzvm92v74dp2LuokTEcPbdoJDzIukfvqsrCeFmN4rkU2+Re3nTJbQUdeuHJ9+rokVSd7UqbUI9qbCOo9I9y+OAgjXBpD7n+Fv3u6HL29Pa+eOjXn+wRVhqksAbfBbuDtxCFGCY63RtyQLVO1MB9AkXprT7llgABzqAiOxcy5euq9EUqF8kIkNRIdqV9NF9Iggl44Z449KdudiZcxq816wn2n6kt/jAeh2n2iYlssnBMjnT35WP5Ey3DyW10Hzttv+alNFtpJZ94D1Lp8QEJCXxTJV7xFGtpz3CMnDnRus12zyqjTxNSg6Of3Udaa/eiVhIiIoREQEREBERAREQEREBERAREQEREBERAREQYl0iMXK2S7dJpzZlMGy5T4SHWv+9Q/gfNekcOLZb5lf8ArGy7WicPrF6OXZV/MIif6iop2q2yiPMwjKJWb2qI/LtE8QpkUFkKkYVCnIZjVPWQj0mNPEI0r6R6gslFh2u4Qrrbo9xt8pqVEkN0dZeaLYHBL0FSqzEBERARF8GQgNSKtBGneVaoIDej864+Y5FaoNCgWGfIfr8LrsYA/ibL9ysFVnwrd/SXM8nz8KUK3TCatdpcr/jY8bfd0fhN0z5fcCsxAREQEREBERAREQEREFeYAX0LxAy/FH+nzmX9OwP9Iy+Ii7y/C+B7f60ftVhqHZ7jc27BCvNjeaiZHZzJ23vO/wA25QvGw7y/xTg91fdrQSp4VkYVlsPJWX2iact93glQLha3y+viH8XvBX0idOkhQSlERAREQFXnGFwnJWF2drqfm5PDOlPgY2fOv5Wv61Yaqmz3OFnnGt2db5TT9qwyOcYTAqF2s2R0nWnwgAVHn7xF7qJpayIiKEREBERAREQEREBERAREQEREBERAREQEREBERBA5eA1hS352FX6TjD77lXX4gtDIgunWvOpEwfgKvrq0Qbe1svz6Q4qW2vKXj2OZA179vnnEd/7t0SH/AGinqIIIHEJ6NWoXfA8ygmPp7K3UmB+wo5GhcTbP7FizNwvdHGpnP/hKdoggFc3yedTWw8M789/pbo8zAb/iIj/gWHKxHMsvGjGc32JBs51+ts1j3oMgfcekHyMh+0QFvZWWiJYduhxoEJiDDYbjxo4C0002OoAA05UGlPsWYiIoREQEREBERAREQEREBUxneNwrtxvMnqSWZj2JG7Dlw5BsPsvMSPFQwIfU9TpLpryVzqu8np5vx4wuTtr51abpFL79SjOD/ZJVIg0G+cRrZwLicRIuYMXXS1tTpEK52oCr6B7URdaqFfe8QkSkt5znPLJOsMadiNpubd3lEyw9bLr1PfUOOjQRfAKCXRz7y5L04RW1q4cJLzhMnXs4U66WU/X0dq5r/AYqLWy5PzeFfCO7S+VZNvyGJBlVr6jEX4ZbfNyRKZ33iTc7DZZN0vHDjJ4saKOzrvbwibCm2vio/wDf9iwr5nPEJm/2O0RcHg2o7u+6w0d2uYlsYNE7/wCz78ukC/F8Km/ES0jf8Ev1kqNC8+t77A/iICpT+vkq1nXal4w/g3lhc9yu0Kj1fdq/FdaL+MhFB5ZzbMzO8Yqxm2VNuWS73X6Om26yNnCDrZcqFKu7k6YkYUEuofEt9i1st2NccZdltMNqDb5WLR3WmGQ0bEmJJh6Pt1dBbPj3Cfk8MLnOgiRT7OTV2i6+LeM4Lv8AEIEP7Vrsmmxi4mcNsril/JLq1Kt/ae8L7AvtfxMfxILPREUqEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAVecS6Ui57w5u3LpC8Pwir/r4bvL+IBVhqtvKGerb8IhZCLfaVsd7gXAh5+yL4gX8JkklPvhtzgcS+Itl517P6Ri3QKfdJjCJfxskq7uQDB4UZswNKiWOZ152NB9kPPGJG35HSVhkI23yixIh1C+Y1WlK+87Ff/wCSR/CtPc8Vl3DJ+KGNnCfG35LaWJMWTQPqqSOyNgx297mDRclSVvrniYBQOAeRwR22w3KTNjXp5NMTgkD/ALI1bXCe/Fk3DqyXd2hDKcii3KAvEEgOh0a/qMSUM+jGpmbcVMFdGghf7cxcI4F4S7Vgo7hfnaD96SLYksszYjjDo0Nl4KgVPeEqKg4sh2JwNxx18q+d4Rk8aJLpUvDRiV5uX+ydEv2q0uDN9/SHhfj1yIqk/wCZAzLpXxA+0Ojo1+/cSWnn8NnrhTP7c7cQj2rKeyeYFoKkcWR2Qg651dxbVAC/YgspF4RwNtgG3DJ0wGlKnWnir9q91KhERAREQEREBERAREQEREBFosxyCDi+MTr9ce0JmK3zFtvvN069wNh9pERCNPvqoNb8y4jWZit4z/DYEeyl9Y67aZZPP24PeebLxiPTsTfo6q6oLWRYsKSxNisSojwPMPAJtugWwmNac6FSvrospAREQEREBERAREQEREBERAREQERanJbm3ZMfuN4fqxRqFHN8u2d7JvkNOfUffr+vkg2yKoMdyjjTkNqi3eNhuLWyJKqJNMz7i/R8Wy9BkIt9P6vF9ykNnzG9xL3EsmdWFmzyJ7lWoM6HL84hSneW3ZbEIk24Q0LUSHq1LlXn0plOk+RERQiIgIiIC1GUWO25Lj82xXdgn4M1qrTzYmQ1IfxU76Lbog1b1nt71zgXJ6KBzLcBtxXzpzJoToND1/FqP7ltERBp7FY7XY25bdqiUjBLmOzH6CVdSecLYy7/AEc6/Yvb6Itn6QfpB5o19Jea+Z+c+12O2+n4du9bJEGssdotlkiFEtcRmFHN9x8m2h1EnHCIzL9pEVVs0WHPmxYEJ2bNktRozAEbrzx0AAGnpIir6EGYi02MZHYsmglcMfuka5RQPsidYPYaFy58v4qLcoCIiAiIgIiICIiAiIgIiIK94mtDOzPh9aHq8ojt5dmOh75R4zrrf8epfKvWU64fHmBHI61aaxiUfZ7d3MpTA8+X6hWVxOtlxkw7VfbJFOXdbBPGcxGGtKFIDUmn2qVLu2Jpw9fioKit9y+TkU0YuBYvd2smkM1huXW5Wh2K1amSLmZGTojuQkO1AHbYlSW74P0ZjHlllt9a1s9qv7kWAPstDVppxxofhB0zGn2eH2VDpV6y7C8pzSc9kr95s9kKPPegXEA3rCfEiImXREdTAgdERLYSERHpKuytPB8bg4hjESw26rhtRxrVx52vNx50i2N06+siKtSqtLlvDTGcoyRu+Xrz+RUWAYfhDJKkWSLZEbfatU8etTKtB8PV30qmhArdxSyaFxldxLIZFjciPyxaitRGHR0aNhx1p0nzLWpdACQa+I+nwrU4Dxhv7mPRHbrPiXWTDaaulyIIhA4cA66v0EeQiLsepAZa8xIOXtbK3p+D2e4X653G5N0nRblbmbe/AeASY1aNwgOlNfF9aX6vUshnDceYjWOMFuCjNiGoW4dq/VBUKtVH4qVCtaVpXnz7k1Iq64cRrhcxvuJx7vVu80yyHDtz7OoEcJ59s9g18YiAuiVfd129KvhRix4RiVmKPW241bYxRX3ZEcm49ObBueOoV9jb7BUnUqVZmPEXIbReXii4mFLHCuMe3vTJ0qrTst11wB1itUGu+u/PYiGldS91WmofxEw6mXR7dUbvPtMq2yvOo0mIIEQHoQeExIfCZcq+zXvW8x22BZrNFtYTJ84WB184nSCffc9exnXxVQam4ZHIZzq14rBg+cuyYz02W+Tmgx44VoFK0p7RE4QjQfs2rzWHk2YuQjyu2wofO4WixfSkcnC5hI2o/SlOXwmzyL8SzMuxJu/SYlwjXa4Wa7QwNti4QSDtaNny3bITEgMK6jXkQ9xCNaclg4/w4sNkjC1EdmG59FO2x5157cpAuOE6Zn7x7m4W3xkiVc4zmGdU4WX/ACV25zJrcgYTFlnXGGDNSffMWnXQaAR+oE3QqG3eWherkrIza5XfFsPthR5nn0+txt0J2VIbHm6LslpozIR1pStaEXoWDjHCuxWfEa445KuEyDItoQ5bBSTow6YjQavgFSLsjLlz6K0ovn/oyCWzObv+W5JeTfpHCO85JFk4gsOC6BB2QiPabiJEdR2rqqGi403S4M5vZbRDuWYAw/bZj8mJY+yaI9Ca0Mn3R1Aeo9i3HXp9G3Vh8QbnfGMcsL91hX6JiDFsKTdq2W4tPSa6a6NuyCMC7LTYiMOoq923vS248JcLuEK1QJ0efKj22joiLk90vORdMTd7fq+t2MaEWy3GQYVZL9ItX0k28dttfexahKgwzIddCNqlOvTl0jXpp9iDd2UoZ2eGcGh0i1YCrO+22mvTz26vR9qz0RSoUC46gB8PH6SOXmlLjbqy6ersfPGO02+HXnt8Knq199tkK92abaLi1R6JNYOO+HvAQ6kgi/GV60x+HlyevUSXOY6BahxpJsuSnycEWmaEBCXWdRH9SgBDbYfkx3a1Vug3CbYGjBx9oiIWbiB0dBtoy8XZumADyrX0ar2zKFen8VYwzNrTllwZhyWnYV/x1sX3ZAtF0E4Hjad17i6ajt1UJbDFsclZIVntjeOTMUwSwk29GtksKBJuT4FsBOhzro0JdepdRn1F6FSWdxwtjUqXhst243K21K9DCdfhTzZIBdad1LpLWtRdFou8S8OvhIlVmdcS8jcg4pLcvM5th9m5RHJVrlDFalS4zotBK3Iaj2BdxkPhESLxaroLOMPsWaWtm2ZHEclw2pIyKM0fMBIx58ttSpsPf6F+SsPsD9xx6YEEYzmPGZW5uP8AVNtCYaEOo92uvq+5NGVZ5bxWuOLO4qT92x24wztPnt5lNH0ydXWmj81IS1ItjM9eXeIKSZ/xNC02KLLsMUJLl0tz8i1vyqG20b4G0ANkFaCfV2u3q6QJSGRg2PP5XGv5wGCciwnYTMarIdgFHT3cOg69x17x2+wi95eL/D7GpmM2fH7lGkTodmeaegVfeLtWiar0dY8qlQadPKvpH07JydNHiOeTMozKz2qILUerFpkvX+JXvciyhdBoWq+sesX/AMQ8i+xWcsJmDCZmvTGobDcmRr2zwNDQ3dfDtX0lyWapUrbNclzy1Z3arJZ7Vjj0C6k63FelzHhOpg12pb0FuuvhPXltt8K0PFTivIxS53u0k6xHnQIEGfFEI5u+cETrnbtV7vDoA9fTrsrLvVgh3a8WS6vm+EizSTkR+zLpIjaNoqF9tNTJYGTYRZcguFxl3Gsuv0laK2iSAO6iTO9TEqfYY1IuRfeqShNy4gXmXk9ytjV9xjFLVbo8aW7LuTbhyibfEiESaMmqNH094ltXqHp71bUd9qRHbfZMXWnAoYGPoKlfWq5zrhVFyTLYuQxruVsltxwjSHQgMvPuAB7UIHTps074h3pzryVliPIaU+xSInk12nW/O8UgNGNLfdClx5Aa07zFrtQLn+pt396iHGrIMpt2UY9Z7I/emYd0akC/9GRo9XzcAdhAHX+kO7epFWnSI7KwMpxy0ZRb24F7iG+w07R5rR9xowcpQh2EwISGupFTur7VVgHgGKPY3+jc62FcrVR/zijNwkuyqif20N0iL+L2iVCq7jxLvj0XFcetrr5vz23X33rKYXeYbDDnZaCeotdqZCe7pdA6lrsppk0iNxK4T+f2U2mWSlA+Ue6fVNO1jSNnI7xDtQRImqiRU2p+Jb7IOHuH3puI3NsbLdIbPm8c4jhxTba/yQk0Ql2fweFbI8Yx48Zaxg7NBOyg2LQwTYoTWg+Eda/qQanhnmttzezSZcCMcZ2FIrElM7g6FHRoNfq3WyqBh391Rr+5TJYsCJGhRW4kOO1GjtDqDTLdAAKfYI09CylKhERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQFH8Yymy5FIu7Npldu5aJxwZg68tHR9P66ff91VlZHfbPj1pdu17uMaBCY8bzzmo0+776/cucuEuUMW+6W3JLLZsllRZ781nInYtofdYMDkOvR3xqAlsYb6Fy79T+FVlOnSc65QIEqHEmTmGZE5wmorbp0EnjoO1RCntV1EqrYLnHKspt2Yca8ausCeXmWP3OFEajutk08bsoXe1cJo6CYiOrAeHxES6OUqEREBERAREQEREBERAREQEREHm44DQVNyoiAU51rX1LS4Zk9nzDHY9/sMrzmDI2oB1HUuYlUSpWlfR3itNxhyizYtgd0lXW5x4bsiG8zDF0up50gLURH017+X6lyPnVyuFjtVknYlLymzWWXbmmZGzT8Jg5QtADpAXSJiYtAX4hIlUzpNU7fK5W+l3paKzWBuBM1kUi1cp2pNULXfX068+7mtguTfJslPyM2x/IbzfRmvO224W/wCtkbnHYY7Aw3Ii2Hbd0ur2RXT1jvlnvsc5FmusO4stnUDcivi6IlT2a6pU5JptERFKhERAREQEREBERAREQEREBERAREQEREBERARE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" alt="How to draw a horse by Van Oktop" width="400"></a>
</div>
<div class="title">How to draw a horse. Credit to Van Oktop.</div>
</div>
<div class="paragraph">
<p>Alors on propose aussi <a href="http://ninja-squad.fr/training/angular">une formation</a>,
en France et en Europe essentiellement, mais pourquoi pas dans le monde entier.
On peut aussi faire du conseil pour aider ton équipe,
ou même travailler avec toi pour t&#8217;aider à construire ton produit.
Envoie un email à <a href="mailto:hello@ninja-squad.com">hello@ninja-squad.com</a> et on en discutera&#160;!</p>
</div>
<div class="paragraph">
<p>Mais surtout, j&#8217;adorerais avoir ton retour sur ce que tu as aimé, adoré, ou détesté dans ce livre.
Cela peut être une petite faute de frappe, une grosse erreur,
ou juste pour nous raconter comment tu as trouvé le job de tes rêves grâce à ce livre (on ne sait jamais&#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>Je ne peux pas conclure sans remercier quelques personnes.
Ma petite amie tout d&#8217;abord, qui a été d&#8217;un soutien formidable,
même quand je passais mon dimanche sur la dixième réécriture d&#8217;un chapitre dans une humeur détestable.
Mes collègues ninjas, pour leur travail et retours sans relâche,
leur gentillesse et encouragements, et pour m&#8217;avoir laissé le temps nécessaire à cette folle idée.
Et mes amis et ma famille, pour les petits mots qui redonnent l&#8217;énergie au bon moment.</p>
</div>
<div class="paragraph">
<p>Et merci surtout à toi, pour avoir acheté ce livre, et l&#8217;avoir lu jusqu&#8217;à cette toute dernière ligne.</p>
</div>
<div class="paragraph">
<p>À très bientôt.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="changelog">Annexe A: Historique des versions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Voici ci-dessous les changements que nous avons apportés à cet ebook
depuis sa première version.
C&#8217;est en anglais, mais ça devrait t&#8217;aider à voir les nouveautés depuis ta dernière lecture&#160;!</p>
</div>
<div class="paragraph">
<p>N&#8217;oublie pas qu&#8217;acheter cet ebook te donne droit à toutes ses mises à jour ultérieures, gratuitement.
Rends-toi sur la page <a href="https://books.ninja-squad.com/claim" class="bare">https://books.ninja-squad.com/claim</a> pour obtenir la toute dernière version.</p>
</div>
<div class="paragraph">
<p>Current versions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Angular: <code>6.0.0</code></p>
</li>
<li>
<p>Angular CLI: <code>6.0.0</code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_changes_since_last_release_2018_05_09">A.1. Changes since last release - 2018-05-09</h3>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update for CLI 6.0 and use a dedicated configuration <span class="small">(2018-05-09)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_10_2018_05_04">A.2. v1.10 - 2018-05-04</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>6.0.0</code> <span class="small">(2018-05-04)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.0-rc.4</code> <span class="small">(2018-04-13)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.0-rc0</code> <span class="small">(2018-04-05)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.0-beta.7</code> <span class="small">(2018-04-05)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.0-beta.6</code> <span class="small">(2018-04-05)</span></p>
</li>
<li>
<p>Bump to ng <code>6.0.0-beta.1</code> <span class="small">(2018-04-05)</span></p>
</li>
<li>
<p>Bump to ng <code>5.2.0</code> <span class="small">(2018-01-10)</span></p>
</li>
<li>
<p>Bump to ng <code>5.1.0</code> <span class="small">(2017-12-07)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The Wonderful world of Web Components</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace customelements.io by webcomponents.org <span class="small">(2018-01-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to cli <code>6.0.0</code> <span class="small">(2018-05-04)</span></p>
</li>
<li>
<p>The chapter now uses Angular CLI from the start! <span class="small">(2018-03-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>providedIn</code> to register services, as recommended for Angular 6.0 <span class="small">(2018-04-15)</span></p>
</li>
<li>
<p>Updates the dependency injection via token section with a better example <span class="small">(2018-03-19)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Reactive Programming</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>We now use the pipeable operators introduced in RxJS 5.5 <span class="small">(2018-01-28)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Building components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Better lifecycle explanation <span class="small">(2017-12-13)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Services</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>providedIn</code> to register the service, as recommended for Angular 6.0 <span class="small">(2018-04-15)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Simplify service unit tests now that they use <code>providedIn</code> from ng 6.0 <span class="small">(2018-04-15)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reintroduce the <code>min</code> and <code>max</code> validators from version 4.2.0, even if they are not available as directives. <span class="small">(2017-12-13)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove remaining mentions to the deprecated <code>HttpModule</code> and <code>Http</code> <span class="small">(2017-12-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Angular 6.0+ allows to type ElementRef&lt;T&gt; <span class="small">(2018-04-05)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced observables</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>We now use the imports introduced in RxJS 6.0 (<code>import { Observable, of } from 'rxjs'</code>) <span class="small">(2018-04-05)</span></p>
</li>
<li>
<p>We now use the pipeable operators introduced with RxJS 5.5 <span class="small">(2018-01-28)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_9_2017_11_02">A.3. v1.9 - 2017-11-02</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>5.0.0</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-rc.5</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-rc.3</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-rc.2</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-rc.0</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-beta.6</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-beta.5</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-beta.4</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>5.0.0-beta.1</code> <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Bump to ng <code>4.4.1</code> <span class="small">(2017-09-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the new i18n pipes introduced in ng 5.0.0 <span class="small">(2017-11-02)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section on the <code>updateOn: 'blur'</code> option for controls and groups introduced in 5.0 <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Remove the section about combining template-based and code-based approaches <span class="small">(2017-09-01)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use object literals for headers and params for the new http client, introduced in 5.0.0 <span class="small">(2017-11-02)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adds ng 5.0 <code>ChildActivationStart</code>/<code>ChildActivationEnd</code> to the router events <span class="small">(2017-11-02)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated i18n comment with ng 5.0.0 <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Show how to load the locale data as required in ng 5.0.0 and uses the new i18n pipes <span class="small">(2017-11-02)</span></p>
</li>
<li>
<p>Placeholders now displays the interpolation in translation files to help translators <span class="small">(2017-11-02)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_8_2017_07_16">A.4. v1.8 - 2017-07-16</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>4.3.0</code> <span class="small">(2017-07-16)</span></p>
</li>
<li>
<p>Bump to ng <code>4.2.3</code> <span class="small">(2017-06-17)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove min/max validators mention, as they have been removed temporarily in ng 4.2.3 <span class="small">(2017-06-17)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Updates the chapter to use the new <code>HttpClientModule</code> introduced in ng 4.3.0. <span class="small">(2017-07-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>List the new router events introduced in 4.3.0 <span class="small">(2017-07-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a section about <code>HostBinding</code> <span class="small">(2017-06-29)</span></p>
</li>
<li>
<p>Add a section about <code>HostListener</code> <span class="small">(2017-06-29)</span></p>
</li>
<li>
<p>New chapter on advanced components, with <code>ViewChild</code>, <code>ContentChild</code> and <code>ng-content</code>! <span class="small">(2017-06-29)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_7_2017_06_09">A.5. v1.7 - 2017-06-09</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to ng <code>4.2.0</code> <span class="small">(2017-06-09)</span></p>
</li>
<li>
<p>Bump to ng <code>4.1.0</code> <span class="small">(2017-04-28)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce the <code>min</code> and <code>max</code> validators from version 4.2.0 <span class="small">(2017-06-09)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter on advanced router usage: protected routes with guards, nested routes, resolvers and lazy-loading! <span class="small">(2017-04-28)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Angular compiler</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adds a chapter about the Angular compiler and the differences between JiT and AoT. <span class="small">(2017-05-02)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_6_2017_03_24">A.6. v1.6 - 2017-03-24</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>🎉  Bump to stable release <code>4.0.0</code> 🎉 <span class="small">(2017-03-24)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-rc.6</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-rc.5</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-rc.4</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-rc.3</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-rc.1</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-beta.8</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to ng <code>4.0.0-beta.7</code> and TS 2.1+ is now required <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-beta.5</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Bump to <code>4.0.0-beta.0</code> <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Each chapter now has a link to the corresponding exercise of our <a href="https://angular-exercises.ninja-squad.com">Pro Pack</a>
Chapters are slightly re-ordered to match the exercises order. <span class="small">(2017-03-22)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>as</code>, introduced in 4.0.0, instead of <code>let</code> for variables in templates <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>The <code>template</code> tag is now deprecated in favor of <code>ng-template</code> in 4.0 <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Introduces the else syntax from version 4.0.0 <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fix the Babel 6 config for dependency injection without TypeScript <span class="small">(2017-02-17)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce the <code>as</code> syntax to store a <code>NgIf</code> or <code>NgFor</code> result, which can be useful with some pipes like <code>slice</code> or <code>async</code>. <span class="small">(2017-03-23)</span></p>
</li>
<li>
<p>Adds <code>titlecase</code> pipe introduced in 4.0.0 <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Services</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New <code>Meta</code> service in 4.0.0 to get/set meta tags <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>overrideTemplate</code> has been added in 4.0.0 <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce the <code>email</code> validator from version 4.0.0 <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>params</code> instead of the deprecated <code>search</code> in 4.0.0 <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>paramMap</code> introduced in 4.0 instead of <code>params</code> <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced observables</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Shows the <code>as</code> syntax introduced in 4.0.0 as an alternative for the mulitple async pipe subscriptions problem <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Internationalization</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a new chapter on internationalization (i18n) <span class="small">(2017-03-23)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_5_2017_01_25">A.7. v1.5 - 2017-01-25</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to <code>2.4.4</code> <span class="small">(2017-01-25)</span></p>
</li>
<li>
<p>The big rename: "Angular 2" is now known as "Angular" <span class="small">(2017-01-13)</span></p>
</li>
<li>
<p>Bump to <code>2.4.0</code> <span class="small">(2016-12-21)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fix the <code>NgModel</code> explanation <span class="small">(2017-01-09)</span></p>
</li>
<li>
<p><code>Validators.compose()</code> is no longer necessary, we can apply several validators by just passing an array. <span class="small">(2016-12-01)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_4_2016_11_18">A.8. v1.4 - 2016-11-18</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to <code>2.2.0</code> <span class="small">(2016-11-18)</span></p>
</li>
<li>
<p>Bump to <code>2.1.0</code> <span class="small">(2016-10-17)</span></p>
</li>
<li>
<p>Remove typings and use <code>npm install @types/&#8230;&#8203;</code> <span class="small">(2016-10-17)</span></p>
</li>
<li>
<p>Use <code>const</code> instead of <code>let</code> and TypeScript type inference whenever possible <span class="small">(2016-10-01)</span></p>
</li>
<li>
<p>Bump to <code>2.0.1</code> <span class="small">(2016-09-24)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>TestBed.get</code> instead of <code>inject</code> in tests <span class="small">(2016-09-30)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add an async validator example <span class="small">(2016-11-18)</span></p>
</li>
<li>
<p>Remove the  useless (2.2+) <code>.control</code> in templates like <code>username.control.hasError('required')</code>. <span class="small">(2016-11-18)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>routerLinkActive</code> can be exported (2.2+). <span class="small">(2016-11-18)</span></p>
</li>
<li>
<p>We don&#8217;t need to unsubscribe from the router params in the <code>ngOnDestroy</code> method. <span class="small">(2016-10-07)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Advanced observables</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter on Advanced Observables! <span class="small">(2016-11-03)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_3_2016_09_15">A.9. v1.3 - 2016-09-15</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>🎉 Bump to stable release <code>2.0.0</code> 🎉 <span class="small">(2016-09-15)</span></p>
</li>
<li>
<p>Bump to <code>rc.7</code> <span class="small">(2016-09-14)</span></p>
</li>
<li>
<p>Bump to <code>rc.6</code> <span class="small">(2016-09-05)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update the SystemJS config for <code>rc.6</code> and bump the RxJS version <span class="small">(2016-09-05)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove the section about the replace pipe, removed in rc.6 <span class="small">(2016-09-05)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_2_2016_08_25">A.10. v1.2 - 2016-08-25</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to <code>rc.5</code> <span class="small">(2016-08-23)</span></p>
</li>
<li>
<p>Bump to <code>rc.4</code> <span class="small">(2016-07-08)</span></p>
</li>
<li>
<p>Bump to <code>rc.3</code> <span class="small">(2016-06-28)</span></p>
</li>
<li>
<p>Bump to <code>rc.2</code> <span class="small">(2016-06-16)</span></p>
</li>
<li>
<p>Bump to <code>rc.1</code> <span class="small">(2016-06-08)</span></p>
</li>
<li>
<p>Code examples now follow the official style guide <span class="small">(2016-06-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>From zero to something</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Small introduction to NgModule when you start your app from scratch <span class="small">(2016-08-12)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace the deprecated <code>ngSwitchWhen</code> with <code>ngSwitchCase</code> <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce modules and their role in DI.
Changed the example to use a custom service instead of Http. <span class="small">(2016-08-15)</span></p>
</li>
<li>
<p>Remove deprecated <code>provide()</code> method and use <code>{provide: &#8230;&#8203;}</code> instead <span class="small">(2016-06-09)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Date pipe is now fixed in <code>rc.2</code>, no more problem with Intl API <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Styling components and encapsulation</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter on styling components and the different encapsulation strategies! <span class="small">(2016-06-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Services</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the service to the module&#8217;s providers <span class="small">(2016-08-21)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tests now use the TestBed API instead of the deprecated TestComponentBuilder one. <span class="small">(2016-08-15)</span></p>
</li>
<li>
<p>Angular 2 does not provide Jasmine wrappers and custom matchers for unit tests in <code>rc.4</code> anymore <span class="small">(2016-07-08)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Forms now use the new form API (FormsModule and ReactiveFormsModule). <span class="small">(2016-08-22)</span></p>
</li>
<li>
<p>Warn about forms module being rewritten (and deprecated) <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the HttpModule import <span class="small">(2016-08-21)</span></p>
</li>
<li>
<p><code>http.post()</code> now autodetects the body type, removing the need of using <code>JSON.stringify</code> and setting the <code>ContentType</code> <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce RouterModule <span class="small">(2016-08-21)</span></p>
</li>
<li>
<p>Update the router to the API v3! <span class="small">(2016-07-08)</span></p>
</li>
<li>
<p>Warn about router module being rewritten (and deprecated) <span class="small">(2016-06-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Changelog</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mention free updates and web page for obtaining latest version <span class="small">(2016-07-25)</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_v1_1_2016_05_11">A.11. v1.1 - 2016-05-11</h3>
<div class="paragraph">
<p><strong>Global</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump to <code>rc.0</code>. All packages have changed! <span class="small">(2016-05-03)</span></p>
</li>
<li>
<p>Bump to <code>beta.17</code> <span class="small">(2016-05-03)</span></p>
</li>
<li>
<p>Bump to <code>beta.15</code> <span class="small">(2016-04-16)</span></p>
</li>
<li>
<p>Bump to <code>beta.14</code> <span class="small">(2016-04-11)</span></p>
</li>
<li>
<p>Bump to <code>beta.11</code> <span class="small">(2016-03-20)</span></p>
</li>
<li>
<p>Bump to <code>beta.9</code> <span class="small">(2016-03-11)</span></p>
</li>
<li>
<p>Bump to <code>beta.8</code> <span class="small">(2016-03-10)</span></p>
</li>
<li>
<p>Bump to <code>beta.7</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Display the Angular 2 version used in the intro and in the chapter "Zero to something". <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Bump to <code>beta.6</code> (<code>beta.4</code> and <code>beta.5</code> were broken) <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Bump to <code>beta.3</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Bump to <code>beta.2</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Diving into TypeScript</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>typings</code> instead of <code>tsd</code>. <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The templating syntax</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>*ngFor</code> now uses <code>let</code> instead of <code><mark></code> to declare a variable <code>*ngFor="let pony of ponies"</code> [small]</mark>(2016-05-03)#</p>
</li>
<li>
<p><code>*ngFor</code> now also exports a <code>first</code> variable <span class="small">(2016-04-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Dependency Injection</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Better explanation of hierarchical injectors <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Pipes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>replace</code> pipe has been introduced <span class="small">(2016-04-16)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Reactive Programming</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Observables are not scheduled for ES7 anymore <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Building components and directives</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Explain how to remove the compilation warning when using <code>@Input</code> and a setter at the same time <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Add an explanation on <code>isFirstChange</code> for <code>ngOnChanges</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Testing your app</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>injectAsync</code> is now deprecated and replaced by <code>async</code> <span class="small">(2016-05-03)</span></p>
</li>
<li>
<p>Add an example on how to test an event emitter <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Forms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A pattern validator has been introduced to make sure that the input matches a regexp <span class="small">(2016-04-16)</span></p>
</li>
<li>
<p>Add a mnemonic tip to rememeber the <code>[()]</code> syntax: the banana box! <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Examples use <code>module.id</code> to have a relative <code>templateUrl</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Fix error <code>ng-no-form</code> &#8594; <code>ngNoForm</code> <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Fix errors <code>(ngModel)</code> &#8594; <code>(ngModelChange)</code>, <code>is-old-enough</code> &#8594; <code>isOldEnough</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Send and receive data with Http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>JSON.stringify</code> before sending data with a POST <span class="small">(2016-03-04)</span></p>
</li>
<li>
<p>Add a mention to <code>JSONP_PROVIDERS</code> <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Router</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduce the new router (previous one is deprecated), and how to use parameters in URLs! <span class="small">(2016-05-06)</span></p>
</li>
<li>
<p><code>RouterOutlet</code> inserts the template of the component just after itself and not inside itself <span class="small">(2016-03-04)</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Zones and the Angular magic</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>New chapter! Let&#8217;s talk about how Angular 2 works under the hood!
First part is about how AngularJS 1.x used to work,
and then we&#8217;ll see how Angular 2 differs,
and uses a new concept called zones. <span class="small">(2016-05-03)</span></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Dernière mise à jour le 2018-05-09 09:25:19
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>prettyPrint()</script>
</body>
</html>